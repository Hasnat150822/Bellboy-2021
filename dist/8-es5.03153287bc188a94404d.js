!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"68rm":function(e,r,n){"use strict";n.r(r),n.d(r,"AdvertisementModule",function(){return et});var o,a,s,c,h=n("ofXK"),p=n("mrSG"),l=n("1kSV"),u=n("q2CC"),d=n("tkbi"),g=n("lJxs"),m=n("vkgz"),f=n("XNiG"),v=n("fXoL"),b=n("tk/3"),S=((o=function(){function e(i){t(this,e),this.http=i,this._url=u.g,this.onError=new f.a,this.allAdvert=new f.a}return i(e,[{key:"postAdvertisement",value:function(t){var e=new FormData;return e.append("image",t),this.http.post(this._url+"api/admin/advertisement",e).pipe(Object(g.a)(function(t){1==t.success?Object(u.f)("success","Added Successfully"):Object(u.f)("warning",t.message)},function(t){Object(u.f)("error",t.error.message)}))}},{key:"getAdvertisement",value:function(t,e,i){return this.http.get(this._url+"api/admin/advertisement"+(t=null!=t?"?status="+t:"")+(i=null!==e&&null!==i?"?year="+e+"&month="+i:"")).pipe(Object(g.a)(function(t){return t.data}))}},{key:"changeStatus",value:function(t,e){var i=new FormData;return i.append("status",t),i.append("_id",e),this.http.put(this._url+"api/admin/advertisement",i).pipe(Object(g.a)(function(t){1==t.success?Object(u.f)("success","Updated Successfully"):Object(u.f)("warning",t.message)},function(t){Object(u.f)("error",t.error.message)}))}},{key:"deleteAdvert",value:function(t){return this.http.delete(u.g+"api/admin/advertisement/"+t).pipe(Object(m.a)(function(t){1==t.success?Object(u.f)("success","Successfully Deleted"):Object(u.f)("warning","Someting went Wrong")},function(t){return Object(u.f)("error","Someting went Wrong")}))}}]),e}()).\u0275fac=function(t){return new(t||o)(v.ac(b.b))},o.\u0275prov=v.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),y=n("l7P3"),A=n("3Pt+"),x=["*"],M=((c=function(){function e(i,r,n){t(this,e),this.el=i,this.zone=r,this.platformId=n,this.afterChange=new v.n,this.beforeChange=new v.n,this.breakpoint=new v.n,this.destroy=new v.n,this.init=new v.n,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}return i(e,[{key:"ngOnDestroy",value:function(){this.unslick()}},{key:"ngAfterViewInit",value:function(){this.ngAfterViewChecked()}},{key:"ngAfterViewChecked",value:function(){var t=this;if(!Object(h.A)(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){var e=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===e?this.unslick():(this._addedSlides.forEach(function(e){t.slides.push(e),t.zone.runOutsideAngular(function(){t.$instance.slick("slickAdd",e.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(function(e){var i=t.slides.indexOf(e);t.slides=t.slides.filter(function(t){return t!==e}),t.zone.runOutsideAngular(function(){t.$instance.slick("slickRemove",i)})}),this._removedSlides=[]):e>0&&this.initSlick()}}},{key:"initSlick",value:function(){var t=this;this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(function(){t.$instance=jQuery(t.el.nativeElement),t.$instance.on("init",function(e,i){t.zone.run(function(){t.init.emit({event:e,slick:i})})}),t.$instance.slick(t.config),t.zone.run(function(){var e;t.initialized=!0,t.currentIndex=(null===(e=t.config)||void 0===e?void 0:e.initialSlide)||0}),t.$instance.on("afterChange",function(e,i,r){t.zone.run(function(){t.afterChange.emit({event:e,slick:i,currentSlide:r,first:0===r,last:i.$slides.length===r+i.options.slidesToScroll}),t.currentIndex=r})}),t.$instance.on("beforeChange",function(e,i,r,n){t.zone.run(function(){t.beforeChange.emit({event:e,slick:i,currentSlide:r,nextSlide:n}),t.currentIndex=n})}),t.$instance.on("breakpoint",function(e,i,r){t.zone.run(function(){t.breakpoint.emit({event:e,slick:i,breakpoint:r})})}),t.$instance.on("destroy",function(e,i){t.zone.run(function(){t.destroy.emit({event:e,slick:i}),t.initialized=!1})})})}},{key:"addSlide",value:function(t){this._addedSlides.push(t)}},{key:"removeSlide",value:function(t){this._removedSlides.push(t)}},{key:"slickGoTo",value:function(t){var e=this;this.zone.runOutsideAngular(function(){e.$instance.slick("slickGoTo",t)})}},{key:"slickNext",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickNext")})}},{key:"slickPrev",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickPrev")})}},{key:"slickPause",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickPause")})}},{key:"slickPlay",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickPlay")})}},{key:"unslick",value:function(){var t=this;this.$instance&&(this.zone.runOutsideAngular(function(){t.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}},{key:"ngOnChanges",value:function(t){var e=this;if(this.initialized){var i=t.config;if(i.previousValue!==i.currentValue&&void 0!==i.currentValue){var r=i.currentValue.refresh,n=Object.assign({},i.currentValue);delete n.refresh,this.zone.runOutsideAngular(function(){e.$instance.slick("slickSetOption",n,r)})}}}}]),e}()).\u0275fac=function(t){return new(t||c)(v.Nb(v.l),v.Nb(v.z),v.Nb(v.B))},c.\u0275cmp=v.Hb({type:c,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[v.zb([{provide:A.j,useExisting:Object(v.V)(function(){return c}),multi:!0}]),v.yb],ngContentSelectors:x,decls:1,vars:0,template:function(t,e){1&t&&(v.lc(),v.kc(0))},encapsulation:2}),c),z=((s=function(){function e(i,r,n){t(this,e),this.el=i,this.platformId=r,this.carousel=n}return i(e,[{key:"ngOnInit",value:function(){Object(h.z)(this.platformId)&&this.carousel.addSlide(this)}},{key:"ngOnDestroy",value:function(){Object(h.z)(this.platformId)&&this.carousel.removeSlide(this)}}]),e}()).\u0275fac=function(t){return new(t||s)(v.Nb(v.l),v.Nb(v.B),v.Nb(M,1))},s.\u0275dir=v.Ib({type:s,selectors:[["","ngxSlickItem",""]]}),s),w=((a=function e(){t(this,e)}).\u0275mod=v.Lb({type:a}),a.\u0275inj=v.Kb({factory:function(t){return new(t||a)},imports:[[h.c]]}),a),k=n("jhN1"),C=["wrapper"],I=["sourceImage"];function R(t,e){if(1&t){var i=v.Ub();v.Tb(0,"img",4,5),v.dc("load",function(){return v.zc(i),v.fc().imageLoadedInView()}),v.Sb()}if(2&t){var r=v.fc();v.Fc("visibility",r.imageVisible?"visible":"hidden")("transform",r.safeTransformStyle),v.mc("src",r.safeImgDataUrl,v.Bc)}}function O(t,e){if(1&t){var i=v.Ub();v.Rb(0),v.Tb(1,"span",9),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"topleft")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"topleft")}),v.Ob(2,"span",10),v.Sb(),v.Tb(3,"span",11),v.Ob(4,"span",10),v.Sb(),v.Tb(5,"span",12),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"topright")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"topright")}),v.Ob(6,"span",10),v.Sb(),v.Tb(7,"span",13),v.Ob(8,"span",10),v.Sb(),v.Tb(9,"span",14),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomright")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomright")}),v.Ob(10,"span",10),v.Sb(),v.Tb(11,"span",15),v.Ob(12,"span",10),v.Sb(),v.Tb(13,"span",16),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomleft")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomleft")}),v.Ob(14,"span",10),v.Sb(),v.Tb(15,"span",17),v.Ob(16,"span",10),v.Sb(),v.Tb(17,"span",18),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"top")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"top")}),v.Sb(),v.Tb(18,"span",19),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"right")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"right")}),v.Sb(),v.Tb(19,"span",20),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottom")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottom")}),v.Sb(),v.Tb(20,"span",21),v.dc("mousedown",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"left")})("touchstart",function(t){v.zc(i);var e=v.fc(2);return e.startMove(t,e.moveTypes.Resize,"left")}),v.Sb(),v.Qb()}}function T(t,e){if(1&t){var i=v.Ub();v.Tb(0,"div",6),v.dc("keydown",function(t){return v.zc(i),v.fc().keyboardAccess(t)}),v.Tb(1,"div",7),v.dc("mousedown",function(t){v.zc(i);var e=v.fc();return e.startMove(t,e.moveTypes.Move)})("touchstart",function(t){v.zc(i);var e=v.fc();return e.startMove(t,e.moveTypes.Move)}),v.Sb(),v.Gc(2,O,21,0,"ng-container",8),v.Sb()}if(2&t){var r=v.fc();v.Fc("top",r.cropper.y1,"px")("left",r.cropper.x1,"px")("width",r.cropper.x2-r.cropper.x1,"px")("height",r.cropper.y2-r.cropper.y1,"px")("margin-left","center"===r.alignImage?r.marginLeft:null)("visibility",r.imageVisible?"visible":"hidden"),v.Fb("rounded",r.roundCropper),v.Ab(2),v.mc("ngIf",!r.hideResizeSquares)}}var P,_,E={Move:"move",Resize:"resize",Pinch:"pinch"},B=((_=function(){function e(i,r){t(this,e),this.sanitizer=i,this.cd=r,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.autoRotateSupported=new Promise(function(t){var e=new Image;e.onload=function(){t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}),this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.moveTypes=E,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new v.n,this.startCropImage=new v.n,this.imageLoaded=new v.n,this.cropperReady=new v.n,this.loadImageFailed=new v.n,this.initCropper()}return i(e,[{key:"ngOnChanges",value:function(t){this.cropperStaticHeight&&this.cropperStaticWidth&&(this.hideResizeSquares=!0,this.cropperMinWidth=this.cropperStaticWidth,this.cropperMinHeight=this.cropperStaticHeight,this.maintainAspectRatio=!1),this.onChangesInputImage(t),this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}},{key:"onChangesInputImage",value:function(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.initCropper(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}},{key:"isValidImageChangedEvent",value:function(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}},{key:"setCssTransform",value:function(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}},{key:"ngOnInit",value:function(){this.stepSize=this.initialStepSize,this.activatePinchGesture()}},{key:"initCropper",value:function(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}},{key:"loadImage",value:function(t,e){this.isValidImageType(e)?this.loadBase64Image(t):this.loadImageFailed.emit()}},{key:"loadImageFile",value:function(t){var e=this,i=new FileReader;i.onload=function(i){return e.loadImage(i.target.result,t.type)},i.readAsDataURL(t)}},{key:"isValidImageType",value:function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}},{key:"loadBase64Image",value:function(t){var e=this;this.autoRotateSupported.then(function(i){return e.checkExifAndLoadBase64Image(t,i)}).then(function(){return e.transformOriginalImage()}).catch(function(t){e.loadImageFailed.emit(),e.originalImage=null,e.originalBase64=null,console.error(t)})}},{key:"checkExifAndLoadBase64Image",value:function(t,e){var i=this;return new Promise(function(r,n){i.originalImage=new Image,i.originalImage.onload=function(){i.originalBase64=t,i.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){var e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=e.charCodeAt(n);return r.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;for(var i=e.byteLength,r=2;r<i;){if(e.getUint16(r+2,!1)<=8)return-1;var n=e.getUint16(r,!1);if(r+=2,65505==n){if(1165519206!=e.getUint32(r+=2,!1))return-1;var o=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,o);var a=e.getUint16(r,o);r+=2;for(var s=0;s<a;s++)if(274==e.getUint16(r+12*s,o))return e.getUint16(r+12*s+8,o)}else{if(65280!=(65280&n))break;r+=e.getUint16(r,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(e?-1:t),i.originalSize.width=i.originalImage.naturalWidth,i.originalSize.height=i.originalImage.naturalHeight,r()},i.originalImage.onerror=n,i.originalImage.src=t})}},{key:"loadImageFromURL",value:function(t){var e=this,i=new Image;i.onerror=function(){return e.loadImageFailed.emit()},i.onload=function(){var t=document.createElement("canvas"),r=t.getContext("2d");t.width=i.width,t.height=i.height,r.drawImage(i,0,0),e.loadBase64Image(t.toDataURL())},i.crossOrigin="anonymous",i.src=t}},{key:"transformOriginalImage",value:function(){if(!this.originalImage||!this.originalImage.complete||!this.exifTransform)return Promise.reject(new Error("No image loaded"));var t=this.transformImageBase64();return this.setTransformedImage(t)}},{key:"transformImageBase64",value:function(){var t=this.canvasRotation+this.exifTransform.rotate;if(0===t&&!this.exifTransform.flip&&!this.containWithinAspectRatio)return this.originalBase64;var e=this.getTransformedSize(),i=document.createElement("canvas");i.width=e.width,i.height=e.height;var r=i.getContext("2d");return r.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),r.rotate(Math.PI*(t/2)),r.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),i.toDataURL()}},{key:"getTransformedSize",value:function(){var t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){var e=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,e)}}var i=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,i)}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}},{key:"setTransformedImage",value:function(t){var e=this;return new Promise(function(i){e.transformedBase64=t,e.safeImgDataUrl=e.sanitizer.bypassSecurityTrustResourceUrl(t),e.transformedImage=new Image,e.transformedImage.onload=function(){e.transformedSize.width=e.transformedImage.naturalWidth,e.transformedSize.height=e.transformedImage.naturalHeight,e.cd.markForCheck(),i()},e.transformedImage.src=e.transformedBase64})}},{key:"imageLoadedInView",value:function(){var t=this;null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(function(){return t.checkImageMaxSizeRecursively()}))}},{key:"checkImageMaxSizeRecursively",value:function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(function(){return t.checkImageMaxSizeRecursively()},50))}},{key:"sourceImageLoaded",value:function(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}},{key:"onResize",value:function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}},{key:"activatePinchGesture",value:function(){if(this.Hammer){var t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else Object(v.W)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}},{key:"resizeCropperPosition",value:function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}},{key:"resetCropperPosition",value:function(){var t=this.sourceImage.nativeElement;if(this.cropperStaticHeight&&this.cropperStaticWidth)this.cropper.x1=0,this.cropper.x2=t.offsetWidth>this.cropperStaticWidth?this.cropperStaticWidth:t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight>this.cropperStaticHeight?this.cropperStaticHeight:t.offsetHeight;else if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;var e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;var i=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}},{key:"keyboardAccess",value:function(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}},{key:"changeKeyboardStepSize",value:function(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}},{key:"keyboardMoveCropper",value:function(t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var e=t.shiftKey?E.Resize:E.Move,i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),r=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(r),this.moveStop()}}},{key:"getPositionForKey",value:function(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}},{key:"getInvertedPositionForKey",value:function(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}},{key:"getEventForKey",value:function(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}},{key:"startMove",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.moveStart&&this.moveStart.active&&this.moveStart.type===E.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper))}},{key:"startPinch",value:function(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:E.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}},{key:"moveImg",value:function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===E.Move?(this.move(t),this.checkCropperPosition(!0)):this.moveStart.type===E.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"onPinch",value:function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===E.Pinch&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"setMaxSize",value:function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}},{key:"setCropperScaledMinSize",value:function(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}},{key:"setCropperScaledMinWidth",value:function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}},{key:"setCropperScaledMinHeight",value:function(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}},{key:"checkCropperPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}},{key:"moveStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"pinchStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"move",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}},{key:"resize",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"center":var r=t.scale,n=Math.abs(this.moveStart.x2-this.moveStart.x1)*r,o=Math.abs(this.moveStart.y2-this.moveStart.y1)*r,a=this.cropper.x1,s=this.cropper.y1;this.cropper.x1=Math.min(this.moveStart.clientX-n/2,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.clientY-o/2,this.cropper.y2-this.cropperScaledMinHeight),this.cropper.x2=Math.max(this.moveStart.clientX+n/2,a+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.clientY+o/2,s+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}},{key:"checkAspectRatio",value:function(){var t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"center":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio;var i=Math.max(0-this.cropper.x1,0),r=Math.max(this.cropper.x2-this.maxSize.width,0),n=Math.max(this.cropper.y2-this.maxSize.height,0),o=Math.max(0-this.cropper.y1,0);(i>0||r>0||n>0||o>0)&&(this.cropper.x1+=n*this.aspectRatio>i?n*this.aspectRatio:i,this.cropper.x2-=o*this.aspectRatio>r?o*this.aspectRatio:r,this.cropper.y1+=o*this.aspectRatio>r?o:r/this.aspectRatio,this.cropper.y2-=n*this.aspectRatio>i?n:i/this.aspectRatio)}}},{key:"doAutoCrop",value:function(){this.autoCrop&&this.crop()}},{key:"crop",value:function(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();var t=this.getImagePosition(),e=t.x2-t.x1,i=t.y2-t.y1,r=document.createElement("canvas");r.width=e,r.height=i;var n=r.getContext("2d");if(n){null!=this.backgroundColor&&(n.fillStyle=this.backgroundColor,n.fillRect(0,0,e,i));var o=(this.transform.scale||1)*(this.transform.flipH?-1:1),a=(this.transform.scale||1)*(this.transform.flipV?-1:1);n.setTransform(o,0,0,a,this.transformedSize.width/2,this.transformedSize.height/2),n.translate(-t.x1/o,-t.y1/a),n.rotate((this.transform.rotate||0)*Math.PI/180),n.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);var s={width:e,height:i,imagePosition:t,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(s.offsetImagePosition=this.getOffsetImagePosition());var c=this.getResizeRatio(e,i);return 1!==c&&(s.width=Math.round(e*c),s.height=this.maintainAspectRatio?Math.round(s.width/this.aspectRatio):Math.round(i*c),function(t,e,i){var r=t.width,n=t.height,o=r/(e=Math.round(e)),a=n/(i=Math.round(i)),s=Math.ceil(o/2),c=Math.ceil(a/2),h=t.getContext("2d");if(h){for(var p=h.getImageData(0,0,r,n),l=h.createImageData(e,i),u=p.data,d=l.data,g=0;g<i;g++)for(var m=0;m<e;m++){var f=4*(m+g*e),v=g*a,b=0,S=0,y=0,A=0,x=0,M=0,z=0,w=Math.floor(m*o),k=Math.floor(g*a),C=Math.ceil((m+1)*o),I=Math.ceil((g+1)*a);C=Math.min(C,r),I=Math.min(I,n);for(var R=k;R<I;R++)for(var O=Math.abs(v-R)/c,T=m*o,P=O*O,_=w;_<C;_++){var E=Math.abs(T-_)/s,B=Math.sqrt(P+E*E);if(!(B>=1)){var W=4*(_+R*r);z+=(b=2*B*B*B-3*B*B+1)*u[W+3],y+=b,u[W+3]<255&&(b=b*u[W+3]/250),A+=b*u[W],x+=b*u[W+1],M+=b*u[W+2],S+=b}}d[f]=A/S,d[f+1]=x/S,d[f+2]=M/S,d[f+3]=z/y}t.width=e,t.height=i,h.putImageData(l,0,0)}}(r,s.width,s.height)),s.base64=this.cropToBase64(r),this.imageCropped.emit(s),s}}return null}},{key:"getImagePosition",value:function(){var t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}},{key:"getOffsetImagePosition",value:function(){var t,e,i=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;(this.canvasRotation+this.exifTransform.rotate)%2?(t=(this.transformedSize.width-this.originalSize.height)/2,e=(this.transformedSize.height-this.originalSize.width)/2):(t=(this.transformedSize.width-this.originalSize.width)/2,e=(this.transformedSize.height-this.originalSize.height)/2);var r={x1:Math.round(this.cropper.x1*i)-t,y1:Math.round(this.cropper.y1*i)-e,x2:Math.round(this.cropper.x2*i)-t,y2:Math.round(this.cropper.y2*i)-e};return this.containWithinAspectRatio||(r.x1=Math.max(r.x1,0),r.y1=Math.max(r.y1,0),r.x2=Math.min(r.x2,this.transformedSize.width),r.y2=Math.min(r.y2,this.transformedSize.height)),r}},{key:"cropToBase64",value:function(t){return t.toDataURL("image/"+this.format,this.getQuality())}},{key:"getQuality",value:function(){return Math.min(1,Math.max(0,this.imageQuality/100))}},{key:"getResizeRatio",value:function(t,e){var i=this.resizeToWidth/t,r=this.resizeToHeight/e,n=new Array;this.resizeToWidth>0&&n.push(i),this.resizeToHeight>0&&n.push(r);var o=0===n.length?1:Math.min.apply(Math,n);return o>1&&!this.onlyScaleDown?o:Math.min(o,1)}},{key:"getClientX",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}},{key:"getClientY",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}]),e}()).\u0275fac=function(t){return new(t||_)(v.Nb(k.b),v.Nb(v.h))},_.\u0275cmp=v.Hb({type:_,selectors:[["image-cropper"]],viewQuery:function(t,e){var i;1&t&&(v.Ec(C,!0),v.Nc(I,!0)),2&t&&(v.vc(i=v.ec())&&(e.wrapper=i.first),v.vc(i=v.ec())&&(e.sourceImage=i.first))},hostVars:4,hostBindings:function(t,e){1&t&&v.dc("resize",function(){return e.onResize()},!1,v.yc)("mousemove",function(t){return e.moveImg(t)},!1,v.xc)("touchmove",function(t){return e.moveImg(t)},!1,v.xc)("mouseup",function(){return e.moveStop()},!1,v.xc)("touchend",function(){return e.moveStop()},!1,v.xc),2&t&&(v.Fc("text-align",e.alignImage),v.Fb("disabled",e.disabled))},inputs:{format:"format",maintainAspectRatio:"maintainAspectRatio",transform:"transform",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",backgroundColor:"backgroundColor"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[v.yb],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(v.Tb(0,"div",null,0),v.Gc(2,R,2,5,"img",1),v.Ob(3,"div",2),v.Gc(4,T,3,15,"div",3),v.Sb()),2&t&&(v.Fc("background",e.imageVisible&&e.backgroundColor),v.Ab(2),v.mc("ngIf",e.safeImgDataUrl),v.Ab(1),v.Fc("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),v.Ab(1),v.mc("ngIf",e.imageVisible))},directives:[h.o],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),_),W=((P=function e(){t(this,e)}).\u0275mod=v.Lb({type:P}),P.\u0275inj=v.Kb({factory:function(t){return new(t||P)},imports:[[h.c]]}),P);function Q(t,e){1&t&&(v.Tb(0,"h3"),v.Ic(1,"All Advertisement"),v.Sb())}function H(t,e){1&t&&(v.Tb(0,"h3"),v.Ic(1,"Active Advertisement"),v.Sb())}function U(t,e){1&t&&(v.Tb(0,"h3"),v.Ic(1,"Deactivate Advertisement"),v.Sb())}function D(t,e){if(1&t){var i=v.Ub();v.Tb(0,"button",29),v.dc("click",function(){v.zc(i);var t=v.fc().$implicit;return v.fc().updateStatus("true",t._id)}),v.Ic(1," Activate "),v.Sb()}if(2&t){var r=v.fc(2);v.mc("disabled","Super Admin"!==r.currentRole)}}function F(t,e){if(1&t){var i=v.Ub();v.Tb(0,"button",30),v.dc("click",function(){v.zc(i);var t=v.fc().$implicit;return v.fc().updateStatus("false",t._id)}),v.Ic(1," Deactivate "),v.Sb()}if(2&t){var r=v.fc(2);v.mc("disabled","Super Admin"!==r.currentRole)}}function L(t,e){if(1&t&&(v.Tb(0,"div",31),v.Tb(1,"strong"),v.Ic(2,"Last Action: "),v.Sb(),v.Tb(3,"small"),v.Ic(4),v.gc(5,"date"),v.gc(6,"date"),v.Sb(),v.Sb()),2&t){var i=v.fc().$implicit;v.Ab(4),v.Lc("",v.ic(5,2,i.actionDate,"mediumDate"),", ",v.ic(6,5,i.actionDate,"mediumTime"),"")}}var j=function(t,e){return{"text-success":t,"text-error":e}};function V(t,e){if(1&t){var i=v.Ub();v.Tb(0,"div",18),v.Tb(1,"div",19),v.Tb(2,"div",20),v.Tb(3,"h6"),v.Tb(4,"span",14),v.Ic(5,"Advertisement Title"),v.Sb(),v.Tb(6,"p",21),v.Tb(7,"small",14),v.Ic(8,"Status: "),v.Sb(),v.Tb(9,"small",22),v.Ic(10),v.Sb(),v.Sb(),v.Sb(),v.Ob(11,"img",23),v.Tb(12,"div",12),v.Tb(13,"div",2),v.Gc(14,D,2,1,"button",24),v.Gc(15,F,2,1,"button",25),v.Sb(),v.Tb(16,"div",26),v.Tb(17,"button",27),v.dc("click",function(){v.zc(i);var t=e.$implicit;return v.fc().deleteAdvert(t._id)}),v.Ic(18," Delete "),v.Sb(),v.Sb(),v.Gc(19,L,7,8,"div",28),v.Sb(),v.Sb(),v.Sb(),v.Sb()}if(2&t){var r=e.$implicit,n=v.fc();v.Ab(9),v.mc("ngClass",v.sc(8,j,r.status,!r.status)),v.Ab(1),v.Jc(r.status?"Activated":"Deactivated"),v.Ab(1),v.pc("src","",n.amazonUrl,"",r.image,"",v.Bc),v.Ab(3),v.mc("ngIf",0==r.status),v.Ab(1),v.mc("ngIf",1==r.status),v.Ab(2),v.mc("disabled","Super Admin"!==n.currentRole),v.Ab(2),v.mc("ngIf",r.actionDate)}}function G(t,e){if(1&t&&(v.Tb(0,"p",47),v.Ic(1),v.Sb()),2&t){var i=v.fc(2);v.Ab(1),v.Jc(i.message)}}function $(t,e){1&t&&(v.Tb(0,"p",48),v.Ic(1,"Use *HD Quality and 16:9 Ratio*"),v.Sb())}function N(t,e){1&t&&(v.Tb(0,"p",49),v.Ic(1,"Only JPG, GIF, PNG, and BMP images are supported."),v.Sb())}function X(t,e){if(1&t){var i=v.Ub();v.Tb(0,"div",32),v.Tb(1,"h3"),v.Ic(2,"Upload File"),v.Sb(),v.Sb(),v.Tb(3,"div",33),v.Tb(4,"div",34),v.Tb(5,"image-cropper",35),v.dc("imageCropped",function(t){return v.zc(i),v.fc().imageCropped(t)})("imageLoaded",function(){return v.zc(i),v.fc().imageLoaded()}),v.Sb(),v.Tb(6,"input",36,37),v.dc("change",function(t){return v.zc(i),v.fc().fileChangeEvent(t)}),v.Sb(),v.Tb(8,"button",38),v.Ic(9,"Insert Image"),v.Sb(),v.Ob(10,"img",39),v.Sb(),v.Gc(11,G,2,1,"p",40),v.Gc(12,$,2,0,"p",41),v.Gc(13,N,2,0,"p",42),v.Sb(),v.Tb(14,"div",43),v.Tb(15,"div",44),v.Tb(16,"button",45),v.dc("click",function(){return e.$implicit.close("close click")}),v.Ic(17,"Close"),v.Sb(),v.Tb(18,"button",46),v.dc("click",function(){return v.zc(i),v.fc().uploadImg()}),v.Ic(19,"Upload Image"),v.Sb(),v.Sb(),v.Sb()}if(2&t){var r=v.fc();v.Ab(5),v.Fc("display",r.showCropper?null:"none"),v.mc("imageChangedEvent",r.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",r.containWithinAspectRatio)("aspectRatio",16/9)("resizeToWidth",641)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",r.canvasRotation)("transform",r.transform)("alignImage","left"),v.Ab(5),v.nc("src",r.croppedImage,v.Bc),v.Ab(1),v.mc("ngIf",r.message),v.Ab(1),v.mc("ngIf",!r.croppedImage),v.Ab(1),v.mc("ngIf",!r.croppedImage)}}var Y,K,J=((Y=function(){function e(i,r,n,o){t(this,e),this.modalService=i,this.service=r,this.gs=n,this.store=o,this.highlighted=!1,this.allAdvert=[],this.headStatus="all",this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={},this.amazonUrl=u.a,this.slideConfig={infinite:!0,speed:900,autoplay:!1,slidesToShow:3,slidesToScroll:2,prevArrow:'<button class="leftRs ft-chevron-left"></button>',nextArrow:'<button class="rightRs ft-chevron-right"></button>',responsive:[{breakpoint:1025,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:769,settings:{slidesToShow:1,slidesToScroll:2}},{breakpoint:605,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.store.subscribe(function(t){},function(t){},function(){t.subscription.unsubscribe()}),this.getAdvert(null,null,null)}},{key:"getAdvert",value:function(t,e,i){var r=this;this.service.getAdvertisement(t,e,i).subscribe(function(t){r.allAdvert=t})}},{key:"preview",value:function(t){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imageFile=t[0],0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(null==t[0].type.match(/image\/*/)){e.next=8;break}return e.next=5,function(t){return new Promise(function(e,i){var r=new FileReader;r.readAsDataURL(t[0]),r.onload=function(){return e(r.result)},r.onerror=function(t){return i(t)}})}(t).then(function(t){i.imgURL=t});case 5:this.gs.compress(this.imgURL,t[0].name).then(function(t){var e=t[0];if(1==e.status)return i.imageFile=e.file,void(i.imgURL=e.con64)}),e.next=9;break;case 8:this.message="Only images are supported.";case 9:case"end":return e.stop()}},e,this)}))}},{key:"deleteAdvert",value:function(t){var e=this;Object(u.c)().then(function(i){i&&e.service.deleteAdvert(t).subscribe(function(){e.getAdvert(null,null,null)})})}},{key:"uploadImg",value:function(){var t=this;this.submitted=!0,null!=this.imageFile&&this.service.postAdvertisement(this.imageFile).subscribe(function(e){t.modalService.dismissAll(),t.getAdvert(null,null,null)},function(e){t.modalService.dismissAll()})}},{key:"updateStatus",value:function(t,e){var i=this;this.service.changeStatus(t,e).subscribe(function(){i.getAdvert(null,null,null)})}},{key:"open",value:function(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}},{key:"fileChangeEvent",value:function(t){if(this.tempFile=t.target.files[0],this.imageChangedEvent=t,!this.tempFile)return!1;null!=this.tempFile.type.match(/image\/*/)||(this.message="Only images are supported.")}},{key:"imageCropped",value:function(t){this.height=t.height,this.width=t.width,this.croppedImage=t.base64,this.imageFile=Object(d.b)(this.croppedImage,this.tempFile.name)}},{key:"getDate",value:function(t){var e=t.split("-")[0],i=t.split("-")[1];this.getAdvert(null,e,i)}},{key:"imageLoaded",value:function(){this.showCropper=!0}}]),e}()).\u0275fac=function(t){return new(t||Y)(v.Nb(l.i),v.Nb(S),v.Nb(d.a),v.Nb(y.a))},Y.\u0275cmp=v.Hb({type:Y,selectors:[["app-advertisement"]],features:[v.zb([l.c])],decls:37,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[4,"ngIf"],[1,"col-sm-6","d-flex","align-items-center","justify-content-end"],[1,"form-group","mb-0","mr-2"],["type","month","min","2020-01","max","2100-01",1,"form-control","perPage",3,"change"],[1,"btn","btn-orange","float-right",3,"click"],[1,"col-sm-12"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],[1,"row","py-2"],[1,"col-sm-12","text-right"],[1,"font-weight-500"],[1,"hoverTotal",3,"click"],[1,"text-orange"],["addAdvert",""],["ngxSlickItem","",1,"slide"],[1,"card"],[1,"card-body"],[1,"float-right"],[3,"ngClass"],["height","230px","width","300px","onerror","src='../../../assets/img/gallery/1.jpg'","alt","","width","100%",3,"src"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","btn btn-orange",3,"disabled","click",4,"ngIf"],[1,"col-sm-6","text-right"],[1,"btn","btn-danger",3,"disabled","click"],["class","col-sm-12 text-center mt-2",4,"ngIf"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-orange",3,"disabled","click"],[1,"col-sm-12","text-center","mt-2"],[1,"modal-header","justify-content-center"],[1,"modal-body"],[1,"position-relative","text-center"],["format","*",1,"cropper",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded"],["type","file","accept","image/x-png,image/gif,image/jpeg","multiple","",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-warning text-center",4,"ngIf"],["class","text-error text-center",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"text-error","mb-0"],[1,"text-warning","text-center"],[1,"text-error","text-center"]],template:function(t,e){if(1&t){var i=v.Ub();v.Tb(0,"div",0),v.Tb(1,"div",1),v.Tb(2,"div",2),v.Gc(3,Q,2,0,"h3",3),v.Gc(4,H,2,0,"h3",3),v.Gc(5,U,2,0,"h3",3),v.Sb(),v.Tb(6,"div",4),v.Tb(7,"div",5),v.Tb(8,"input",6),v.dc("change",function(t){return e.getDate(t.target.value)}),v.Sb(),v.Sb(),v.Tb(9,"button",7),v.dc("click",function(){v.zc(i);var t=v.wc(36);return e.open(t)}),v.Ic(10,"Add Advertisement"),v.Sb(),v.Sb(),v.Sb(),v.Tb(11,"div",1),v.Tb(12,"div",8),v.Tb(13,"ngx-slick-carousel",9,10),v.Gc(15,V,20,11,"div",11),v.Sb(),v.Sb(),v.Sb(),v.Tb(16,"div",12),v.Tb(17,"div",13),v.Tb(18,"span",14),v.Tb(19,"a",15),v.dc("click",function(){return e.headStatus="active",e.getAdvert(!0,null,null)}),v.Ic(20,"Total Actived Advertisements: "),v.Sb(),v.Sb(),v.Tb(21,"span",16),v.Ic(22),v.Sb(),v.Ic(23," \xa0 "),v.Tb(24,"span",14),v.Tb(25,"a",15),v.dc("click",function(){return e.headStatus="deactivate",e.getAdvert(!1,null,null)}),v.Ic(26,"Total Deactivated Advertisements: "),v.Sb(),v.Sb(),v.Tb(27,"span",16),v.Ic(28),v.Sb(),v.Ic(29," \xa0 "),v.Tb(30,"span",14),v.Tb(31,"a",15),v.dc("click",function(){return e.headStatus="all",e.getAdvert(null,null,null)}),v.Ic(32,"Total Advertisements: "),v.Sb(),v.Sb(),v.Tb(33,"span",16),v.Ic(34),v.Sb(),v.Sb(),v.Sb(),v.Sb(),v.Gc(35,X,20,17,"ng-template",null,17,v.Hc)}2&t&&(v.Ab(3),v.mc("ngIf","all"==e.headStatus),v.Ab(1),v.mc("ngIf","active"==e.headStatus),v.Ab(1),v.mc("ngIf","deactivate"==e.headStatus),v.Ab(8),v.mc("config",e.slideConfig),v.Ab(2),v.mc("ngForOf",e.allAdvert.advertisements),v.Ab(7),v.Jc(e.allAdvert.totalActive),v.Ab(6),v.Jc(e.allAdvert.totalDeactive),v.Ab(6),v.Jc(e.allAdvert.total))},directives:[h.o,M,h.n,z,h.m,B],pipes:[h.f],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;bottom:0;opacity:0;z-index:1;cursor:pointer}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:scale-down;object-fit:scale-down;border-radius:15px}.ft-chevron-left[_ngcontent-%COMP%], .ft-chevron-right[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:orange;text-shadow:0 0 10px rgba(0,0,0,.9)}.hoverTotal[_ngcontent-%COMP%]:hover{color:#1a73e8!important;text-decoration:underline!important}.cropper[_ngcontent-%COMP%]{height:200px;width:200px;margin:0 auto}"]}),Y),q=n("tyNb"),Z=n("RLft"),tt=[{path:"",component:J}],et=((K=function e(){t(this,e)}).\u0275mod=v.Lb({type:K}),K.\u0275inj=v.Kb({factory:function(t){return new(t||K)},imports:[[h.c,l.j,w,q.g.forChild(tt),W,y.b.forFeature("UserData",Z.b)]]}),K)}}])}();