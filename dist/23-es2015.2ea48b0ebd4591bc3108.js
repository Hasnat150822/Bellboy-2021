(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{jHYc:function(e,t,i){"use strict";i.r(t),i.d(t,"MyProfileModule",function(){return S});var o=i("ofXK"),r=i("mrSG"),n=i("Fjs1"),a=i("3pA8"),s=i("tkbi"),l=i("q2CC"),c=i("fXoL"),b=i("tyNb"),d=i("3Pt+"),m=i("l7P3");function u(e,t){if(1&e&&(c.Tb(0,"p",28),c.Ic(1),c.Sb()),2&e){const e=c.fc();c.Ab(1),c.Jc(e.message)}}function p(e,t){1&e&&(c.Tb(0,"p",29),c.Ic(1," Image is required "),c.Sb())}function g(e,t){if(1&e&&(c.Tb(0,"option",30),c.Ic(1),c.Sb()),2&e){const e=t.$implicit;c.nc("value",e._id),c.Ab(1),c.Jc(e.title)}}let h=(()=>{class e{constructor(e,t,i,o,r,n,a){this.route=e,this.userService=t,this.formbuilder=i,this.roleService=o,this.globalService=r,this.store=n,this.ref=a,this.detailUser={name:"null",contact_number:"null",email:"null",password:"null",role:{title:"null"},avatar:{value:"null"}},this.submitted=!1,this.amazonImgUrl=l.a,this.updateProfile=this.formbuilder.group({name:[""],cellNo:[""],email:[""],pass:[""],selectRole:[""]}),this.getUser()}ngOnInit(){this.route.params.subscribe(e=>{this._id=e.id}),this.roleService.getRole().subscribe(e=>{this.allRoles=e.data.Roles})}ngAfterViewInit(){this.ref.detectChanges()}getUser(){this.store.subscribe(e=>{void 0!==(e=e.UserData.data)&&(this.detailUser=e,this.updateProfile.controls.name.setValue(this.detailUser.name),this.updateProfile.controls.email.setValue(this.detailUser.email),this.updateProfile.controls.cellNo.setValue(this.detailUser.contact_number),e.avatar.value&&(this.imgURL=e.avatar.value),"Super Admin"!==this.detailUser.role.title&&(this.updateProfile.controls.selectRole.disable(),this.updateProfile.controls.email.disable()))},e=>{},()=>{this.subscription.unsubscribe()})}preview(e){return Object(r.a)(this,void 0,void 0,function*(){if(this.imageFile=e[0],0===e.length)return!1;null!=e[0].type.match(/image\/*/)?(yield function(e){return new Promise((t,i)=>{const o=new FileReader;o.readAsDataURL(e[0]),o.onload=()=>t(o.result),o.onerror=e=>i(e)})}(e).then(e=>{this.imgURL=e}),this.globalService.compress(this.imgURL,e[0].name).then(e=>{let t=e[0];if(1==t.status)return this.imageFile=t.file,void(this.imgURL=t.con64)})):this.message="Only images are supported."})}updateUser(e){let t=e.getRawValue();void 0!==this.imageFile&&(t.image=this.imageFile),this.submitted=!0,this.userService.updateUser(t,this._id,"").subscribe(()=>{this.getUser()})}}return e.\u0275fac=function(t){return new(t||e)(c.Nb(b.a),c.Nb(n.a),c.Nb(d.b),c.Nb(a.a),c.Nb(s.a),c.Nb(m.a),c.Nb(c.h))},e.\u0275cmp=c.Hb({type:e,selectors:[["app-my-profile"]],decls:41,vars:7,consts:[[1,"row","justify-content-center"],[1,"card"],[1,"card-content","row","m-0","justify-content-center"],[1,"card-header","prof-heading"],["src","https://www.marketogre.com/assets/img/my%20profile50px.png","alt","",1,"img-fit"],[1,"head-title"],[1,"card-body"],[1,"d-flex","m-0","justify-content-center","pb-3"],[1,"media-object"],["onerror","src='../../../assets/img/gallery/1.jpg'",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-error",4,"ngIf"],["type","file","name","","id","",1,"input-upload",3,"change"],["file",""],[1,"btn","btn-secondary"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-sm-6"],[1,"form-group"],["type","text","formControlName","name","placeholder","Name",1,"form-control"],["type","text","formControlName","cellNo","placeholder","cell No",1,"form-control"],["type","text","formControlName","email","placeholder","Email",1,"form-control"],["type","password","formControlName","pass","placeholder","Password",1,"form-control"],["name","role","formControlName","selectRole",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-12","text-center"],["type","submit",1,"btn","btn-orange"],[1,"text-error","mb-0"],[1,"text-error"],[3,"value"]],template:function(e,t){if(1&e){const e=c.Ub();c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Tb(3,"div",3),c.Tb(4,"span"),c.Ob(5,"img",4),c.Sb(),c.Tb(6,"span",5),c.Ic(7,"Edit Profile"),c.Sb(),c.Sb(),c.Tb(8,"div",6),c.Tb(9,"div",7),c.Tb(10,"div",8),c.Ob(11,"img",9),c.Gc(12,u,2,1,"p",10),c.Gc(13,p,2,0,"p",11),c.Tb(14,"input",12,13),c.dc("change",function(){c.zc(e);const i=c.wc(15);return t.preview(i.files)}),c.Sb(),c.Tb(16,"button",14),c.Ic(17,"Change Image"),c.Sb(),c.Sb(),c.Sb(),c.Tb(18,"form",15),c.dc("ngSubmit",function(){return t.updateUser(t.updateProfile)}),c.Tb(19,"div",16),c.Tb(20,"div",17),c.Tb(21,"div",18),c.Ob(22,"input",19),c.Sb(),c.Sb(),c.Tb(23,"div",17),c.Tb(24,"div",18),c.Ob(25,"input",20),c.Sb(),c.Sb(),c.Tb(26,"div",17),c.Tb(27,"div",18),c.Ob(28,"input",21),c.Sb(),c.Sb(),c.Tb(29,"div",17),c.Tb(30,"div",18),c.Ob(31,"input",22),c.Sb(),c.Sb(),c.Tb(32,"div",17),c.Tb(33,"div",18),c.Tb(34,"select",23),c.Tb(35,"option",24),c.Ic(36),c.Sb(),c.Gc(37,g,2,2,"option",25),c.Sb(),c.Sb(),c.Sb(),c.Tb(38,"div",26),c.Tb(39,"button",27),c.Ic(40,"Update Profile"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()}2&e&&(c.Ab(11),c.pc("src","",t.amazonImgUrl,"",t.imgURL,"",c.Bc),c.Ab(1),c.mc("ngIf",t.message),c.Ab(1),c.mc("ngIf",null==t.imgURL&&t.submitted),c.Ab(5),c.mc("formGroup",t.updateProfile),c.Ab(18),c.Jc(null==t.detailUser||null==t.detailUser.role?null:t.detailUser.role.title),c.Ab(1),c.mc("ngForOf",t.allRoles))},directives:[o.o,d.u,d.l,d.f,d.a,d.k,d.d,d.r,d.o,d.t,o.n],styles:[".prof-heading[_ngcontent-%COMP%]{background:#cac9c6;width:95%;padding:15px;border-radius:3px;margin-top:-20px;box-shadow:0 4px 20px 0 rgba(0,0,0,.14),0 7px 10px -5px rgba(0,0,0,.4)}.row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:70%}.row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .img-fit[_ngcontent-%COMP%]{vertical-align:text-bottom;width:30px}.row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .head-title[_ngcontent-%COMP%]{font-size:26px;font-weight:500;color:#343434;margin-left:12px}.media-object[_ngcontent-%COMP%]{height:120px;width:120px;position:relative}.media-object[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:6px;width:100%;height:100%;position:absolute}.media-object[_ngcontent-%COMP%]   .input-upload[_ngcontent-%COMP%]{width:200px;bottom:0;z-index:1;right:0;opacity:0;position:absolute;cursor:pointer}.media-object[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{bottom:0;width:100%;position:absolute;border-radius:0 0 6px 6px}@media only screen and (max-width:600px){.row[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%!important}}img[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}"]}),e})();var f=i("RLft");const v=[{path:"",component:h}];let S=(()=>{class e{}return e.\u0275mod=c.Lb({type:e}),e.\u0275inj=c.Kb({factory:function(t){return new(t||e)},imports:[[o.c,d.g,d.q,m.b.forFeature("UserData",f.b),b.g.forChild(v)]]}),e})()}}]);