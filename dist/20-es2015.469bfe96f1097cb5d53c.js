(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"0eu4":function(t,c,e){"use strict";e.r(c),e.d(c,"HiringActionsModule",function(){return E});var i,n=e("ofXK"),o=e("mrSG"),b=e("3Pt+"),r=e("tk/3"),s=e("lJxs"),a=e("vkgz"),l=e("q2CC"),d=e("fXoL"),u=e("1kSV");let g=(()=>{class t{constructor(t,c){this.http=t,this.modalService=c,this._url=l.g,i={headers:new r.d({"Content-Type":"application/x-www-form-urlencoded"})}}getHiringActions(t){return this.http.get(this._url+"api/admin/hiring-action-type?status="+t)}addHiringActions(t,c){let e=new FormData;return e.append("title",t.title),e.append("description",t.desc),e.append("icon",c),this.http.post(this._url+"api/admin/hiring-action-type",e).pipe(Object(s.a)(t=>(1==t.success?Object(l.f)("success","Added"):Object(l.f)("error",t.msg),t),t=>{Object(l.f)("error",t.error.msg)}))}assignLabel(t,c,e){let n=(new r.e).set("label",c).set("hiringActionType",t).set("locale",e);return this.http.post(this._url+"api/admin/hiring-action-type/assignLabel",n.toString(),i).pipe(Object(s.a)(t=>(200==t.code?(Object(l.f)("success","Label Successfully Added"),this.modalService.dismissAll()):(Object(l.f)("error",t.msg),this.modalService.dismissAll()),t),t=>{Object(l.f)("error",t.error.msg),this.modalService.dismissAll()}))}changeStatus(t,c){let e=new FormData;return e.append("status",t),e.append("action_type_id",c),this.http.put(this._url+"api/admin/hiring-action-type",e).pipe(Object(a.a)(()=>{Object(l.f)("success","Status is Changed")},t=>{Object(l.f)("error",t.error.msg)}))}}return t.\u0275fac=function(c){return new(c||t)(d.ac(r.b),d.ac(u.i))},t.\u0275prov=d.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=e("tkbi");function p(t,c){if(1&t){const t=d.Ub();d.Tb(0,"div",20),d.dc("click",function(){d.zc(t);const c=d.fc();return c.tableContext="all",c.getActions("")}),d.Ic(1,"All Actions"),d.Sb()}}function f(t,c){1&t&&d.Pb(0)}function h(t,c){1&t&&d.Pb(0)}function S(t,c){if(1&t&&(d.Tb(0,"table",21),d.Tb(1,"thead"),d.Gc(2,f,1,0,"ng-container",22),d.Sb(),d.Tb(3,"tbody"),d.Gc(4,h,1,0,"ng-container",22),d.Sb(),d.Sb()),2&t){d.fc();const t=d.wc(30),c=d.wc(32);d.Ab(2),d.mc("ngTemplateOutlet",t),d.Ab(2),d.mc("ngTemplateOutlet",c)}}function T(t,c){if(1&t){const t=d.Ub();d.Tb(0,"div",20),d.dc("click",function(){d.zc(t);const c=d.fc();return c.tableContext="active",c.getActions("true")}),d.Ic(1,"Active Actions"),d.Sb()}}function A(t,c){1&t&&d.Pb(0)}function v(t,c){1&t&&d.Pb(0)}function I(t,c){if(1&t&&(d.Tb(0,"table",21),d.Tb(1,"thead"),d.Gc(2,A,1,0,"ng-container",22),d.Sb(),d.Tb(3,"tbody"),d.Gc(4,v,1,0,"ng-container",22),d.Sb(),d.Sb()),2&t){d.fc();const t=d.wc(30),c=d.wc(32);d.Ab(2),d.mc("ngTemplateOutlet",t),d.Ab(2),d.mc("ngTemplateOutlet",c)}}function y(t,c){if(1&t){const t=d.Ub();d.Tb(0,"div",20),d.dc("click",function(){d.zc(t);const c=d.fc();return c.tableContext="blocked",c.getActions("false")}),d.Ic(1,"Blocked Actions"),d.Sb()}}function k(t,c){1&t&&d.Pb(0)}function O(t,c){1&t&&d.Pb(0)}function w(t,c){if(1&t&&(d.Tb(0,"table",21),d.Tb(1,"thead"),d.Gc(2,k,1,0,"ng-container",22),d.Sb(),d.Tb(3,"tbody"),d.Gc(4,O,1,0,"ng-container",22),d.Sb(),d.Sb()),2&t){d.fc();const t=d.wc(30),c=d.wc(32);d.Ab(2),d.mc("ngTemplateOutlet",t),d.Ab(2),d.mc("ngTemplateOutlet",c)}}function x(t,c){if(1&t&&(d.Tb(0,"p",42),d.Ic(1),d.Sb()),2&t){const t=d.fc(2);d.Ab(1),d.Jc(t.message)}}function G(t,c){1&t&&(d.Tb(0,"p",43),d.Ic(1," Image is required "),d.Sb())}function L(t,c){1&t&&(d.Tb(0,"p",43),d.Ic(1," Title is required "),d.Sb())}function C(t,c){1&t&&(d.Tb(0,"p",43),d.Ic(1," Description is required "),d.Sb())}function j(t,c){if(1&t){const t=d.Ub();d.Tb(0,"div",23),d.Tb(1,"h3",24),d.Ic(2,"Add Vehicle Type"),d.Sb(),d.Tb(3,"a",25),d.dc("click",function(){return c.$implicit.close("Cancel Modal")}),d.Ob(4,"i",26),d.Sb(),d.Sb(),d.Tb(5,"div",27),d.Tb(6,"form",28),d.Tb(7,"div",29),d.Tb(8,"div",30),d.Tb(9,"input",31,32),d.dc("change",function(){d.zc(t);const c=d.wc(10);return d.fc().preview(c.files)}),d.Sb(),d.Tb(11,"button",33),d.Ic(12,"Add Image"),d.Sb(),d.Ob(13,"img",34),d.Gc(14,x,2,1,"p",35),d.Gc(15,G,2,0,"p",36),d.Sb(),d.Sb(),d.Tb(16,"div",37),d.Ob(17,"input",38),d.Gc(18,L,2,0,"p",36),d.Sb(),d.Tb(19,"div",37),d.Ob(20,"input",39),d.Gc(21,C,2,0,"p",36),d.Sb(),d.Sb(),d.Sb(),d.Tb(22,"div",40),d.Tb(23,"div"),d.Tb(24,"button",41),d.dc("click",function(){d.zc(t);const c=d.fc();return c.addAction(c.addHiringAction)}),d.Ic(25,"Add"),d.Sb(),d.Sb(),d.Sb()}if(2&t){const t=d.fc();d.Ab(6),d.mc("formGroup",t.addHiringAction),d.Ab(7),d.nc("src",t.imgURL,d.Bc),d.Ab(1),d.mc("ngIf",t.message),d.Ab(1),d.mc("ngIf",null==t.imgURL&&t.submitted),d.Ab(3),d.mc("ngIf",t.addHiringAction.controls.title.hasError("required")&&t.submitted),d.Ab(3),d.mc("ngIf",t.addHiringAction.controls.desc.hasError("required")&&t.submitted)}}function H(t,c){if(1&t&&(d.Tb(0,"option",52),d.Ic(1),d.Sb()),2&t){const t=c.$implicit;d.pc("value","",t.code,"/",t._id,""),d.Ab(1),d.Kc(" ",t.title," ")}}function z(t,c){1&t&&(d.Tb(0,"div",37),d.Ob(1,"input",53),d.Sb())}function U(t,c){1&t&&(d.Tb(0,"div",37),d.Ob(1,"input",54),d.Sb())}function _(t,c){if(1&t){const t=d.Ub();d.Tb(0,"div",44),d.Tb(1,"h3",24),d.Ic(2,"Add Label"),d.Sb(),d.Tb(3,"a",25),d.dc("click",function(){return c.$implicit.close("Cancel Modal")}),d.Ob(4,"i",26),d.Sb(),d.Sb(),d.Tb(5,"div",45),d.Tb(6,"form",28),d.Tb(7,"div",37),d.Tb(8,"select",46),d.dc("change",function(c){return d.zc(t),d.fc().changeLocal(c)}),d.Tb(9,"option",47),d.Ic(10,"Select Language"),d.Sb(),d.Gc(11,H,2,3,"option",48),d.Sb(),d.Sb(),d.Gc(12,z,2,0,"div",49),d.Gc(13,U,2,0,"div",49),d.Sb(),d.Sb(),d.Tb(14,"div",50),d.Tb(15,"button",51),d.dc("click",function(){d.zc(t);const c=d.fc();return c.submitLabel(c.assignLabel)}),d.Ic(16,"Add Label"),d.Sb(),d.Sb()}if(2&t){const t=d.fc();d.Ab(6),d.mc("formGroup",t.assignLabel),d.Ab(5),d.mc("ngForOf",t.locals),d.Ab(1),d.mc("ngIf","ur"==t.code||"ar"==t.code),d.Ab(1),d.mc("ngIf","en"==t.code)}}function P(t,c){if(1&t&&(d.Tb(0,"div",55),d.Tb(1,"a",56),d.Tb(2,"span",57),d.dc("click",function(){return c.$implicit.close("Cancel Cick")}),d.Sb(),d.Sb(),d.Sb(),d.Tb(3,"div",58),d.Ob(4,"img",59),d.Sb()),2&t){const t=d.fc();d.Ab(4),d.nc("src",t.currentImage,d.Bc)}}function F(t,c){1&t&&(d.Tb(0,"tr"),d.Tb(1,"th"),d.Ic(2,"Icon"),d.Sb(),d.Tb(3,"th"),d.Ic(4,"Title"),d.Sb(),d.Tb(5,"th",60),d.Ic(6,"Description"),d.Sb(),d.Tb(7,"th"),d.Ic(8,"Task Performed"),d.Sb(),d.Tb(9,"th"),d.Ic(10,"Action"),d.Sb(),d.Sb())}function q(t,c){1&t&&d.Pb(0)}function M(t,c){if(1&t){const t=d.Ub();d.Tb(0,"button",69),d.dc("click",function(){d.zc(t);const c=d.fc().$implicit;return d.fc(2).changeActionStatus(!1,c._id)}),d.Ic(1,"Block Action"),d.Sb()}}function N(t,c){if(1&t){const t=d.Ub();d.Tb(0,"button",70),d.dc("click",function(){d.zc(t);const c=d.fc().$implicit;return d.fc(2).changeActionStatus(!0,c._id)}),d.Ic(1,"Active Action"),d.Sb()}}function R(t,c){if(1&t){const t=d.Ub();d.Tb(0,"tr"),d.Tb(1,"td",62),d.Tb(2,"img",63),d.dc("click",function(){d.zc(t);const e=c.$implicit,i=d.fc(2),n=d.wc(28);return i.bigImage(n,e.icon)}),d.Sb(),d.Sb(),d.Tb(3,"td"),d.Ic(4),d.Sb(),d.Tb(5,"td",64),d.Ic(6),d.Sb(),d.Tb(7,"td"),d.Ic(8),d.Sb(),d.Tb(9,"td",65),d.Tb(10,"button",66),d.dc("click",function(){d.zc(t);const e=c.$implicit,i=d.fc(2),n=d.wc(26);return i.open(n),i.actionTypeId=e._id}),d.Ic(11,"Assign Label"),d.Sb(),d.Gc(12,M,2,0,"button",67),d.Gc(13,N,2,0,"button",68),d.Sb(),d.Sb()}if(2&t){const t=c.$implicit,e=d.fc(2);d.Ab(2),d.pc("src","",e.amazonImgUrl,"",t.icon,"",d.Bc),d.Ab(2),d.Jc(t.title),d.Ab(2),d.Jc(t.description),d.Ab(2),d.Jc(t.actionCount),d.Ab(4),d.mc("ngIf","active"==e.tableContext),d.Ab(1),d.mc("ngIf","blocked"==e.tableContext)}}function $(t,c){if(1&t&&(d.Gc(0,q,1,0,"ng-container",22),d.Gc(1,R,14,7,"tr",61)),2&t){const t=d.fc(),c=d.wc(34);d.mc("ngTemplateOutlet",c),d.Ab(1),d.mc("ngForOf",t.hiringActions)}}function B(t,c){1&t&&(d.Tb(0,"tr"),d.Tb(1,"td",72),d.Ob(2,"div",73),d.Sb(),d.Sb())}function J(t,c){if(1&t&&d.Gc(0,B,3,0,"tr",71),2&t){const t=d.fc();d.mc("ngIf",t.spinner)}}let D=(()=>{class t{constructor(t,c,e,i){this.fb=t,this.modalService=c,this.hirngActService=e,this.globalService=i,this.locals=[],this.tableContext="all",this.amazonImgUrl=l.a,this.addHiringAction=this.fb.group({title:["",b.s.required],hasLocation:[""],desc:["",b.s.required]}),this.assignLabel=this.fb.group({label:["",b.s.required]})}ngOnInit(){this.getActions(""),this.globalService.getLocals().subscribe(t=>{200==t.code&&(this.locals=t.data.data)})}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}changeLocal(t){this.singleLocal=t.target.value.split("/"),this.code=this.singleLocal[0],this.localId=this.singleLocal[1]}bigImage(t,c){this.currentImage=this.amazonImgUrl+c,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}preview(t){return Object(o.a)(this,void 0,void 0,function*(){if(this.imageFile=t[0],0===t.length)return!1;null!=t[0].type.match(/image\/*/)?(yield function(t){return new Promise((c,e)=>{const i=new FileReader;i.readAsDataURL(t[0]),i.onload=()=>c(i.result),i.onerror=t=>e(t)})}(t).then(t=>{this.imgURL=t}),this.globalService.compress(this.imgURL,t[0].name).then(t=>{let c=t[0];if(1==c.status)return this.imageFile=c.file,void(this.imgURL=c.con64)})):this.message="Only images are supported."})}addAction(t){if(this.submitted=!0,!t.valid||void 0===this.imageFile)return!1;{let c=t.getRawValue();this.hirngActService.addHiringActions(c,this.imageFile).subscribe(t=>{1==t.success?(this.modalService.dismissAll(),this.getActions("")):this.modalService.dismissAll()},t=>{this.modalService.dismissAll()})}}getActions(t){this.spinner=!0,this.hiringActions=[],this.hirngActService.getHiringActions(t).subscribe(t=>{this.spinner=!1,this.hiringActions=t.data.HiringActionTypes})}submitLabel(t){if(this.submitted=!0,t.valid){let c=t.getRawValue();this.hirngActService.assignLabel(this.actionTypeId,c.label,this.localId).subscribe(t=>{200==t.code&&this.getActions("")})}}changeActionStatus(t,c){this.hirngActService.changeStatus(t,c).subscribe(()=>{this.getActions(!t)})}}return t.\u0275fac=function(c){return new(c||t)(d.Nb(b.b),d.Nb(u.i),d.Nb(g),d.Nb(m.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-hiring-actions"]],decls:35,vars:0,consts:[["id","tabs"],[1,"row","text-left","mt-2"],[1,"col-sm-6","mb-1"],[1,"mb-0"],[1,"col-sm-6","text-right"],[1,"btn","btn-orange","mb-0",3,"click"],[1,"row","text-left"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-content"],[1,"card-body"],["type","pills"],["ngbTabTitle",""],["ngbTabContent",""],["addActionsModel",""],["addLabel",""],["bigImg",""],["tableHeader",""],["tableBody",""],["shimmer",""],[1,"tab-padding",3,"click"],[1,"table","table-responsive-md","table-striped"],[4,"ngTemplateOutlet"],[1,"modal-header","justify-content-center","mb-1"],[1,"card-title","mb-0"],[3,"click"],[1,"ft-x","close-icon"],[1,"modal-body","pb-0"],[3,"formGroup"],[1,"form-group","text-center","col-sm-12"],[1,"position-relative"],["accept","image/*","type","file","accept","image/*","type","file",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"form-group"],["type","text","formControlName","title","placeholder","Action Title",1,"form-control"],["type","text","formControlName","desc","placeholder","Description",1,"form-control"],[1,"modal-footer","mb-2"],["type","submit",1,"btn","btn-success",3,"click"],[1,"text-error","mb-0"],[1,"text-error"],[1,"modal-header","justify-content-center"],[1,"modal-body"],[1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],[3,"value"],["type","text","formControlName","label","placeholder","\u0644\u06cc\u0628\u0644",1,"form-control","text-right"],["type","text","formControlName","label","placeholder","Label",1,"form-control"],[1,"modal-header","d-flex","justify-content-end","pb-0","mb-2"],[1,"mb-2"],[1,"ft-x","text-error",3,"click"],[1,"modal-body","d-flex","justify-content-center","pt-0"],["onerror","src='../../../../assets/img/gallery/1.jpg'",1,"object-fit",3,"src"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"image-td"],["onerror","src='../../../assets/img/gallery/1.jpg'","alt","img",1,"table-img-size",3,"src","click"],[1,"desc"],[2,"width","210px !important"],[1,"btn","btn-orange",3,"click"],["class","btn btn-danger ml-2",3,"click",4,"ngIf"],["class","btn btn-success ml-2",3,"click",4,"ngIf"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"btn","btn-success","ml-2",3,"click"],[4,"ngIf"],["colspan","12"],[1,"py-3","shine","w-100"]],template:function(t,c){if(1&t){const t=d.Ub();d.Tb(0,"section",0),d.Tb(1,"div",1),d.Tb(2,"div",2),d.Tb(3,"h3",3),d.Ic(4,"Hiring Actions Types"),d.Sb(),d.Sb(),d.Tb(5,"div",4),d.Tb(6,"button",5),d.dc("click",function(){d.zc(t);const e=d.wc(24);return c.open(e)}),d.Ic(7,"Add Action Type"),d.Sb(),d.Sb(),d.Sb(),d.Tb(8,"div",6),d.Tb(9,"div",7),d.Tb(10,"div",8),d.Tb(11,"div",9),d.Tb(12,"div",10),d.Tb(13,"ngb-tabset",11),d.Tb(14,"ngb-tab"),d.Gc(15,p,2,0,"ng-template",12),d.Gc(16,S,5,2,"ng-template",13),d.Sb(),d.Tb(17,"ngb-tab"),d.Gc(18,T,2,0,"ng-template",12),d.Gc(19,I,5,2,"ng-template",13),d.Sb(),d.Tb(20,"ngb-tab"),d.Gc(21,y,2,0,"ng-template",12),d.Gc(22,w,5,2,"ng-template",13),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Gc(23,j,26,6,"ng-template",null,14,d.Hc),d.Gc(25,_,17,4,"ng-template",null,15,d.Hc),d.Gc(27,P,5,1,"ng-template",null,16,d.Hc),d.Gc(29,F,11,0,"ng-template",null,17,d.Hc),d.Gc(31,$,2,2,"ng-template",null,18,d.Hc),d.Gc(33,J,1,1,"ng-template",null,19,d.Hc)}},directives:[u.o,u.l,u.n,u.m,n.p,b.u,b.l,b.f,n.o,b.a,b.k,b.d,b.o,b.t,n.n],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;right:0;opacity:0;bottom:0;z-index:1;cursor:pointer}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:cover;object-fit:cover;border-radius:15px}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.ng2-smart-page-item[_ngcontent-%COMP%]{line-height:unset;margin:0!important}.form-check-label[_ngcontent-%COMP%]{cursor:pointer;text-transform:capitalize}"]}),t})();var V=e("tyNb");const K=[{path:"",component:D}];let E=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(c){return new(c||t)},imports:[[n.c,b.g,u.j,b.q,V.g.forChild(K)]]}),t})()}}]);