(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{QMXj:function(t,e,i){"use strict";i.r(e),i.d(e,"VersionControlModule",function(){return O});var n,c=i("ofXK"),s=i("3Pt+"),o=i("PSD3"),r=i.n(o),b=i("tk/3"),a=i("q2CC"),d=i("lJxs"),l=i("vkgz"),u=i("fXoL");let p=(()=>{class t{constructor(t){this.http=t,n={headers:new b.d({"Content-Type":"application/x-www-form-urlencoded"})}}getVersionList(){return this.http.get(a.g+"api/admin/version").pipe(Object(d.a)(t=>t.data))}addVersion({version:t,title:e,description:i}){let c=(new b.e).set("version",t).set("title",e).set("description",i);return this.http.post(a.g+"api/admin/version",c.toString(),n).pipe(Object(l.a)(t=>{t.success?Object(a.f)("success","Version Added Successfully"):Object(a.f)("warning",t.message)},t=>Object(a.f)("error",t.error.message)))}changeStatus(t){return this.http.put(a.g+"api/admin/version/activate/"+t,"",n).pipe(Object(l.a)(t=>{t.success?Object(a.f)("success","Version is Activated"):Object(a.f)("warning",t.message)},t=>{Object(a.f)("error",t.error.message)}))}}return t.\u0275fac=function(e){return new(e||t)(u.ac(b.b))},t.\u0275prov=u.Jb({token:t,factory:t.\u0275fac}),t})();var m=i("1kSV");function f(t,e){1&t&&u.Pb(0)}function v(t,e){1&t&&u.Pb(0)}function S(t,e){1&t&&(u.Tb(0,"tr"),u.Tb(1,"td",9),u.Ob(2,"div",10),u.Sb(),u.Sb())}function h(t,e){1&t&&(u.Tb(0,"tr"),u.Tb(1,"th"),u.Ic(2,"Version"),u.Sb(),u.Tb(3,"th"),u.Ic(4,"Title"),u.Sb(),u.Tb(5,"th",11),u.Ic(6,"Description"),u.Sb(),u.Tb(7,"th"),u.Ic(8,"Status"),u.Sb(),u.Tb(9,"th"),u.Ic(10,"AddedBy"),u.Sb(),u.Tb(11,"th"),u.Ic(12,"Date"),u.Sb(),u.Tb(13,"th"),u.Ic(14,"Time"),u.Sb(),u.Tb(15,"th"),u.Ic(16,"Actions"),u.Sb(),u.Sb())}function T(t,e){if(1&t){const t=u.Ub();u.Tb(0,"tr"),u.Tb(1,"td"),u.Ic(2),u.Sb(),u.Tb(3,"td"),u.Ic(4),u.Sb(),u.Tb(5,"td",13),u.Ic(6),u.Sb(),u.Tb(7,"td",14),u.Ic(8),u.Sb(),u.Tb(9,"td"),u.Ic(10),u.Sb(),u.Tb(11,"td"),u.Ic(12),u.gc(13,"date"),u.Sb(),u.Tb(14,"td"),u.Ic(15),u.gc(16,"date"),u.Sb(),u.Tb(17,"td"),u.Tb(18,"button",15),u.dc("click",function(){u.zc(t);const i=e.$implicit;return u.fc(2).sendId(i._id)}),u.Ic(19),u.Sb(),u.Sb(),u.Sb()}if(2&t){const t=e.$implicit;u.Ab(2),u.Kc(" ",t.version," "),u.Ab(2),u.Jc(t.title),u.Ab(2),u.Jc(t.description),u.Ab(1),u.mc("ngClass",0==t.active?"text-danger":"text-success"),u.Ab(1),u.Jc(0==t.active?"Deactive":"Active"),u.Ab(2),u.Kc(" ",t.addedBy.name," "),u.Ab(2),u.Jc(u.ic(13,10,t.created_at,"mediumDate")),u.Ab(3),u.Jc(u.ic(16,13,t.created_at,"mediumTime")),u.Ab(3),u.mc("ngClass",0==t.active?"btn-success":"btn-danger"),u.Ab(1),u.Jc(0==t.active?"Activate":"Deactivate")}}function g(t,e){if(1&t&&u.Gc(0,T,20,16,"tr",12),2&t){const t=u.fc();u.mc("ngForOf",t.versionList)}}let w=(()=>{class t{constructor(){this.id=new u.n}ngOnInit(){}sendId(t){this.id.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Hb({type:t,selectors:[["app-version-history"]],inputs:{versionList:"versionList"},outputs:{id:"id"},decls:15,vars:2,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"table","table-responsive-md","table-striped","text-left"],[4,"ngTemplateOutlet"],["shimmer",""],["tableHead",""],["tableData",""],["colspan","12"],[1,"py-3","shine","w-100"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"w-25"],[3,"ngClass"],[1,"btn",3,"ngClass","click"]],template:function(t,e){if(1&t&&(u.Tb(0,"div",0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Tb(3,"div",3),u.Tb(4,"table",4),u.Tb(5,"thead"),u.Gc(6,f,1,0,"ng-container",5),u.Sb(),u.Tb(7,"tbody"),u.Gc(8,v,1,0,"ng-container",5),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Sb(),u.Gc(9,S,3,0,"ng-template",null,6,u.Hc),u.Gc(11,h,17,0,"ng-template",null,7,u.Hc),u.Gc(13,g,1,1,"ng-template",null,8,u.Hc)),2&t){const t=u.wc(10),i=u.wc(12),n=u.wc(14);u.Ab(6),u.mc("ngTemplateOutlet",i),u.Ab(2),u.mc("ngTemplateOutlet",e.versionList?n:t)}},directives:[c.p,c.n,c.m],pipes:[c.f],styles:[""]}),t})();function A(t,e){if(1&t){const t=u.Ub();u.Tb(0,"div",8),u.Tb(1,"h3",9),u.Ic(2,"Add Version"),u.Sb(),u.Tb(3,"a",10),u.dc("click",function(){return e.$implicit.close("Cancel Modal")}),u.Ob(4,"i",11),u.Sb(),u.Sb(),u.Tb(5,"div",12),u.Tb(6,"form",13),u.dc("ngSubmit",function(){return u.zc(t),u.fc().submitVersion()}),u.Tb(7,"div",14),u.Ob(8,"input",15),u.Sb(),u.Tb(9,"div",14),u.Ob(10,"input",16),u.Sb(),u.Tb(11,"div",14),u.Ob(12,"input",17),u.Sb(),u.Tb(13,"div",18),u.Tb(14,"button",19),u.Ic(15," Add Version "),u.Sb(),u.Sb(),u.Sb(),u.Sb()}if(2&t){const t=u.fc();u.Ab(6),u.mc("formGroup",t.versionForm),u.Ab(8),u.mc("disabled",t.versionForm.invalid)}}let y=(()=>{class t{constructor(t,e){this.service=t,this.modalService=e,this.versionForm=new s.e({version:new s.c("",s.s.required),title:new s.c(""),description:new s.c("")})}ngOnInit(){this.getVersions()}openModal(t){this.modalService.open(t)}getVersions(){this.service.getVersionList().subscribe(t=>{this.response=t.versions})}submitVersion(){let t=this.versionForm.getRawValue();""!==t&&this.service.addVersion(t).subscribe(()=>{this.modalService.dismissAll(),this.versionForm.reset(),this.getVersions()},t=>{this.modalService.dismissAll(),this.versionForm.reset(),this.getVersions()})}changeStatus(t){r.a.fire({icon:"question",title:"Are You Sure",width:"300px",showCancelButton:!0,showConfirmButton:!0}).then(e=>{e.value&&this.service.changeStatus(t).subscribe(()=>{this.getVersions()})})}}return t.\u0275fac=function(e){return new(e||t)(u.Nb(p),u.Nb(m.i))},t.\u0275cmp=u.Hb({type:t,selectors:[["app-version-control"]],decls:12,vars:1,consts:[["id","tabs"],[1,"row","text-left","mt-2"],[1,"col-6","mb-1"],[1,"mb-0"],[1,"col-6","text-right"],[1,"btn","btn-orange",3,"click"],[3,"versionList","id"],["addVersion",""],[1,"modal-header","justify-content-center","mb-1"],[1,"card-title","mb-0"],[3,"click"],[1,"ft-x","close-icon"],[1,"modal-body"],[1,"row",3,"formGroup","ngSubmit"],[1,"form-group","col-12"],["type","text","placeholder","Type Version","formControlName","version",1,"form-control"],["type","text","placeholder","Type Title","formControlName","title",1,"form-control"],["type","text","placeholder","Type Description","formControlName","description",1,"form-control"],[1,"modal-footer","ml-auto"],["type","submit",1,"btn","btn-orange",3,"disabled"]],template:function(t,e){if(1&t){const t=u.Ub();u.Tb(0,"section",0),u.Tb(1,"div",1),u.Tb(2,"div",2),u.Tb(3,"h3",3),u.Ic(4,"Version Control"),u.Sb(),u.Sb(),u.Tb(5,"div",4),u.Tb(6,"button",5),u.dc("click",function(){u.zc(t);const i=u.wc(11);return e.openModal(i)}),u.Ic(7,"Add Version"),u.Sb(),u.Sb(),u.Sb(),u.Tb(8,"app-version-history",6),u.dc("id",function(t){return e.changeStatus(t)}),u.Sb(),u.Sb(),u.Tb(9,"section"),u.Gc(10,A,16,2,"ng-template",null,7,u.Hc),u.Sb()}2&t&&(u.Ab(8),u.mc("versionList",e.response))},directives:[w,s.u,s.l,s.f,s.a,s.k,s.d],styles:[""]}),t})();var I=i("tyNb");const V=[{path:"",component:y}];let O=(()=>{class t{}return t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({factory:function(e){return new(e||t)},providers:[p],imports:[[c.c,s.q,I.g.forChild(V)]]}),t})()}}]);