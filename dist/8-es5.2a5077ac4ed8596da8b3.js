!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"68rm":function(e,r,n){"use strict";n.r(r),n.d(r,"AdvertisementModule",function(){return Z});var o,s,a,c,h,p=n("ofXK"),l=n("mrSG"),u=n("1kSV"),d=n("q2CC"),g=n("tkbi"),m=n("tk/3"),f=n("lJxs"),v=n("vkgz"),b=n("XNiG"),S=n("fXoL"),y=((s=function(){function e(i,r){t(this,e),this.gs=i,this.http=r,this._url=d.g,this.onError=new b.a,this.allAdvert=new b.a,this.gs.token.subscribe(function(t){o={headers:new m.d({Authorization:"bearer "+t})}})}return i(e,[{key:"postAdvertisement",value:function(t){var e=new FormData;return e.append("image",t),this.http.post(this._url+"api/admin/advertisement",e,o).pipe(Object(f.a)(function(t){1==t.success?Object(d.f)("success","Added Successfully"):Object(d.f)("warning",t.message)},function(t){Object(d.f)("error",t.error.message)}))}},{key:"getAdvertisement",value:function(t){return null!=t?this.http.get(this._url+"api/admin/advertisement?status="+t,o).pipe(Object(f.a)(function(t){return t.data})):this.http.get(this._url+"api/admin/advertisement",o).pipe(Object(f.a)(function(t){return t.data}))}},{key:"changeStatus",value:function(t,e){var i=new FormData;return i.append("status",t),i.append("_id",e),this.http.put(this._url+"api/admin/advertisement",i,o).pipe(Object(f.a)(function(t){1==t.success?Object(d.f)("success","Updated Successfully"):Object(d.f)("warning",t.message)},function(t){Object(d.f)("error",t.error.message)}))}},{key:"deleteAdvert",value:function(t){return this.http.delete(d.g+"api/admin/advertisement/5f5da805abd69550176fad6f",o).pipe(Object(v.a)(function(t){1==t.success?Object(d.f)("success","Successfully Deleted"):Object(d.f)("warning","Someting went Wrong")},function(t){return Object(d.f)("error","Someting went Wrong")}))}}]),e}()).\u0275fac=function(t){return new(t||s)(S.ac(g.a),S.ac(m.b))},s.\u0275prov=S.Jb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),A=n("l7P3"),x=n("3Pt+"),M=["*"],z=((h=function(){function e(i,r,n){t(this,e),this.el=i,this.zone=r,this.platformId=n,this.afterChange=new S.n,this.beforeChange=new S.n,this.breakpoint=new S.n,this.destroy=new S.n,this.init=new S.n,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}return i(e,[{key:"ngOnDestroy",value:function(){this.unslick()}},{key:"ngAfterViewInit",value:function(){this.ngAfterViewChecked()}},{key:"ngAfterViewChecked",value:function(){var t=this;if(!Object(p.A)(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){var e=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===e?this.unslick():(this._addedSlides.forEach(function(e){t.slides.push(e),t.zone.runOutsideAngular(function(){t.$instance.slick("slickAdd",e.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(function(e){var i=t.slides.indexOf(e);t.slides=t.slides.filter(function(t){return t!==e}),t.zone.runOutsideAngular(function(){t.$instance.slick("slickRemove",i)})}),this._removedSlides=[]):e>0&&this.initSlick()}}},{key:"initSlick",value:function(){var t=this;this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(function(){t.$instance=jQuery(t.el.nativeElement),t.$instance.on("init",function(e,i){t.zone.run(function(){t.init.emit({event:e,slick:i})})}),t.$instance.slick(t.config),t.zone.run(function(){var e;t.initialized=!0,t.currentIndex=(null===(e=t.config)||void 0===e?void 0:e.initialSlide)||0}),t.$instance.on("afterChange",function(e,i,r){t.zone.run(function(){t.afterChange.emit({event:e,slick:i,currentSlide:r,first:0===r,last:i.$slides.length===r+i.options.slidesToScroll}),t.currentIndex=r})}),t.$instance.on("beforeChange",function(e,i,r,n){t.zone.run(function(){t.beforeChange.emit({event:e,slick:i,currentSlide:r,nextSlide:n}),t.currentIndex=n})}),t.$instance.on("breakpoint",function(e,i,r){t.zone.run(function(){t.breakpoint.emit({event:e,slick:i,breakpoint:r})})}),t.$instance.on("destroy",function(e,i){t.zone.run(function(){t.destroy.emit({event:e,slick:i}),t.initialized=!1})})})}},{key:"addSlide",value:function(t){this._addedSlides.push(t)}},{key:"removeSlide",value:function(t){this._removedSlides.push(t)}},{key:"slickGoTo",value:function(t){var e=this;this.zone.runOutsideAngular(function(){e.$instance.slick("slickGoTo",t)})}},{key:"slickNext",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickNext")})}},{key:"slickPrev",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickPrev")})}},{key:"slickPause",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickPause")})}},{key:"slickPlay",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.$instance.slick("slickPlay")})}},{key:"unslick",value:function(){var t=this;this.$instance&&(this.zone.runOutsideAngular(function(){t.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}},{key:"ngOnChanges",value:function(t){var e=this;if(this.initialized){var i=t.config;if(i.previousValue!==i.currentValue&&void 0!==i.currentValue){var r=i.currentValue.refresh,n=Object.assign({},i.currentValue);delete n.refresh,this.zone.runOutsideAngular(function(){e.$instance.slick("slickSetOption",n,r)})}}}}]),e}()).\u0275fac=function(t){return new(t||h)(S.Nb(S.l),S.Nb(S.z),S.Nb(S.B))},h.\u0275cmp=S.Hb({type:h,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[S.zb([{provide:x.j,useExisting:Object(S.V)(function(){return h}),multi:!0}]),S.yb],ngContentSelectors:M,decls:1,vars:0,template:function(t,e){1&t&&(S.lc(),S.kc(0))},encapsulation:2}),h),w=((c=function(){function e(i,r,n){t(this,e),this.el=i,this.platformId=r,this.carousel=n}return i(e,[{key:"ngOnInit",value:function(){Object(p.z)(this.platformId)&&this.carousel.addSlide(this)}},{key:"ngOnDestroy",value:function(){Object(p.z)(this.platformId)&&this.carousel.removeSlide(this)}}]),e}()).\u0275fac=function(t){return new(t||c)(S.Nb(S.l),S.Nb(S.B),S.Nb(z,1))},c.\u0275dir=S.Ib({type:c,selectors:[["","ngxSlickItem",""]]}),c),k=((a=function e(){t(this,e)}).\u0275mod=S.Lb({type:a}),a.\u0275inj=S.Kb({factory:function(t){return new(t||a)},imports:[[p.c]]}),a),C=n("jhN1"),I=["wrapper"],R=["sourceImage"];function O(t,e){if(1&t){var i=S.Ub();S.Tb(0,"img",4,5),S.dc("load",function(){return S.zc(i),S.fc().imageLoadedInView()}),S.Sb()}if(2&t){var r=S.fc();S.Fc("visibility",r.imageVisible?"visible":"hidden")("transform",r.safeTransformStyle),S.mc("src",r.safeImgDataUrl,S.Bc)}}function P(t,e){if(1&t){var i=S.Ub();S.Rb(0),S.Tb(1,"span",9),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"topleft")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"topleft")}),S.Ob(2,"span",10),S.Sb(),S.Tb(3,"span",11),S.Ob(4,"span",10),S.Sb(),S.Tb(5,"span",12),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"topright")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"topright")}),S.Ob(6,"span",10),S.Sb(),S.Tb(7,"span",13),S.Ob(8,"span",10),S.Sb(),S.Tb(9,"span",14),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomright")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomright")}),S.Ob(10,"span",10),S.Sb(),S.Tb(11,"span",15),S.Ob(12,"span",10),S.Sb(),S.Tb(13,"span",16),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomleft")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottomleft")}),S.Ob(14,"span",10),S.Sb(),S.Tb(15,"span",17),S.Ob(16,"span",10),S.Sb(),S.Tb(17,"span",18),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"top")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"top")}),S.Sb(),S.Tb(18,"span",19),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"right")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"right")}),S.Sb(),S.Tb(19,"span",20),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottom")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"bottom")}),S.Sb(),S.Tb(20,"span",21),S.dc("mousedown",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"left")})("touchstart",function(t){S.zc(i);var e=S.fc(2);return e.startMove(t,e.moveTypes.Resize,"left")}),S.Sb(),S.Qb()}}function T(t,e){if(1&t){var i=S.Ub();S.Tb(0,"div",6),S.dc("keydown",function(t){return S.zc(i),S.fc().keyboardAccess(t)}),S.Tb(1,"div",7),S.dc("mousedown",function(t){S.zc(i);var e=S.fc();return e.startMove(t,e.moveTypes.Move)})("touchstart",function(t){S.zc(i);var e=S.fc();return e.startMove(t,e.moveTypes.Move)}),S.Sb(),S.Gc(2,P,21,0,"ng-container",8),S.Sb()}if(2&t){var r=S.fc();S.Fc("top",r.cropper.y1,"px")("left",r.cropper.x1,"px")("width",r.cropper.x2-r.cropper.x1,"px")("height",r.cropper.y2-r.cropper.y1,"px")("margin-left","center"===r.alignImage?r.marginLeft:null)("visibility",r.imageVisible?"visible":"hidden"),S.Fb("rounded",r.roundCropper),S.Ab(2),S.mc("ngIf",!r.hideResizeSquares)}}var _,E,B={Move:"move",Resize:"resize",Pinch:"pinch"},W=((E=function(){function e(i,r){t(this,e),this.sanitizer=i,this.cd=r,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.autoRotateSupported=new Promise(function(t){var e=new Image;e.onload=function(){t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}),this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.moveTypes=B,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new S.n,this.startCropImage=new S.n,this.imageLoaded=new S.n,this.cropperReady=new S.n,this.loadImageFailed=new S.n,this.initCropper()}return i(e,[{key:"ngOnChanges",value:function(t){this.cropperStaticHeight&&this.cropperStaticWidth&&(this.hideResizeSquares=!0,this.cropperMinWidth=this.cropperStaticWidth,this.cropperMinHeight=this.cropperStaticHeight,this.maintainAspectRatio=!1),this.onChangesInputImage(t),this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}},{key:"onChangesInputImage",value:function(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.initCropper(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}},{key:"isValidImageChangedEvent",value:function(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}},{key:"setCssTransform",value:function(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}},{key:"ngOnInit",value:function(){this.stepSize=this.initialStepSize,this.activatePinchGesture()}},{key:"initCropper",value:function(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}},{key:"loadImage",value:function(t,e){this.isValidImageType(e)?this.loadBase64Image(t):this.loadImageFailed.emit()}},{key:"loadImageFile",value:function(t){var e=this,i=new FileReader;i.onload=function(i){return e.loadImage(i.target.result,t.type)},i.readAsDataURL(t)}},{key:"isValidImageType",value:function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}},{key:"loadBase64Image",value:function(t){var e=this;this.autoRotateSupported.then(function(i){return e.checkExifAndLoadBase64Image(t,i)}).then(function(){return e.transformOriginalImage()}).catch(function(t){e.loadImageFailed.emit(),e.originalImage=null,e.originalBase64=null,console.error(t)})}},{key:"checkExifAndLoadBase64Image",value:function(t,e){var i=this;return new Promise(function(r,n){i.originalImage=new Image,i.originalImage.onload=function(){i.originalBase64=t,i.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){var e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=e.charCodeAt(n);return r.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;for(var i=e.byteLength,r=2;r<i;){if(e.getUint16(r+2,!1)<=8)return-1;var n=e.getUint16(r,!1);if(r+=2,65505==n){if(1165519206!=e.getUint32(r+=2,!1))return-1;var o=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,o);var s=e.getUint16(r,o);r+=2;for(var a=0;a<s;a++)if(274==e.getUint16(r+12*a,o))return e.getUint16(r+12*a+8,o)}else{if(65280!=(65280&n))break;r+=e.getUint16(r,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(e?-1:t),i.originalSize.width=i.originalImage.naturalWidth,i.originalSize.height=i.originalImage.naturalHeight,r()},i.originalImage.onerror=n,i.originalImage.src=t})}},{key:"loadImageFromURL",value:function(t){var e=this,i=new Image;i.onerror=function(){return e.loadImageFailed.emit()},i.onload=function(){var t=document.createElement("canvas"),r=t.getContext("2d");t.width=i.width,t.height=i.height,r.drawImage(i,0,0),e.loadBase64Image(t.toDataURL())},i.crossOrigin="anonymous",i.src=t}},{key:"transformOriginalImage",value:function(){if(!this.originalImage||!this.originalImage.complete||!this.exifTransform)return Promise.reject(new Error("No image loaded"));var t=this.transformImageBase64();return this.setTransformedImage(t)}},{key:"transformImageBase64",value:function(){var t=this.canvasRotation+this.exifTransform.rotate;if(0===t&&!this.exifTransform.flip&&!this.containWithinAspectRatio)return this.originalBase64;var e=this.getTransformedSize(),i=document.createElement("canvas");i.width=e.width,i.height=e.height;var r=i.getContext("2d");return r.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),r.rotate(Math.PI*(t/2)),r.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),i.toDataURL()}},{key:"getTransformedSize",value:function(){var t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){var e=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,e)}}var i=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,i)}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}},{key:"setTransformedImage",value:function(t){var e=this;return new Promise(function(i){e.transformedBase64=t,e.safeImgDataUrl=e.sanitizer.bypassSecurityTrustResourceUrl(t),e.transformedImage=new Image,e.transformedImage.onload=function(){e.transformedSize.width=e.transformedImage.naturalWidth,e.transformedSize.height=e.transformedImage.naturalHeight,e.cd.markForCheck(),i()},e.transformedImage.src=e.transformedBase64})}},{key:"imageLoadedInView",value:function(){var t=this;null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(function(){return t.checkImageMaxSizeRecursively()}))}},{key:"checkImageMaxSizeRecursively",value:function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(function(){return t.checkImageMaxSizeRecursively()},50))}},{key:"sourceImageLoaded",value:function(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}},{key:"onResize",value:function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}},{key:"activatePinchGesture",value:function(){if(this.Hammer){var t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else Object(S.W)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}},{key:"resizeCropperPosition",value:function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}},{key:"resetCropperPosition",value:function(){var t=this.sourceImage.nativeElement;if(this.cropperStaticHeight&&this.cropperStaticWidth)this.cropper.x1=0,this.cropper.x2=t.offsetWidth>this.cropperStaticWidth?this.cropperStaticWidth:t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight>this.cropperStaticHeight?this.cropperStaticHeight:t.offsetHeight;else if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;var e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;var i=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}},{key:"keyboardAccess",value:function(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}},{key:"changeKeyboardStepSize",value:function(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}},{key:"keyboardMoveCropper",value:function(t){if(["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key)){var e=t.shiftKey?B.Resize:B.Move,i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),r=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(r),this.moveStop()}}},{key:"getPositionForKey",value:function(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}},{key:"getInvertedPositionForKey",value:function(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}},{key:"getEventForKey",value:function(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}},{key:"startMove",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.moveStart&&this.moveStart.active&&this.moveStart.type===B.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper))}},{key:"startPinch",value:function(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:B.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}},{key:"moveImg",value:function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===B.Move?(this.move(t),this.checkCropperPosition(!0)):this.moveStart.type===B.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"onPinch",value:function(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===B.Pinch&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"setMaxSize",value:function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}},{key:"setCropperScaledMinSize",value:function(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}},{key:"setCropperScaledMinWidth",value:function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}},{key:"setCropperScaledMinHeight",value:function(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}},{key:"checkCropperPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}},{key:"moveStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"pinchStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"move",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}},{key:"resize",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"center":var r=t.scale,n=Math.abs(this.moveStart.x2-this.moveStart.x1)*r,o=Math.abs(this.moveStart.y2-this.moveStart.y1)*r,s=this.cropper.x1,a=this.cropper.y1;this.cropper.x1=Math.min(this.moveStart.clientX-n/2,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.clientY-o/2,this.cropper.y2-this.cropperScaledMinHeight),this.cropper.x2=Math.max(this.moveStart.clientX+n/2,s+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.clientY+o/2,a+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}},{key:"checkAspectRatio",value:function(){var t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"center":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio;var i=Math.max(0-this.cropper.x1,0),r=Math.max(this.cropper.x2-this.maxSize.width,0),n=Math.max(this.cropper.y2-this.maxSize.height,0),o=Math.max(0-this.cropper.y1,0);(i>0||r>0||n>0||o>0)&&(this.cropper.x1+=n*this.aspectRatio>i?n*this.aspectRatio:i,this.cropper.x2-=o*this.aspectRatio>r?o*this.aspectRatio:r,this.cropper.y1+=o*this.aspectRatio>r?o:r/this.aspectRatio,this.cropper.y2-=n*this.aspectRatio>i?n:i/this.aspectRatio)}}},{key:"doAutoCrop",value:function(){this.autoCrop&&this.crop()}},{key:"crop",value:function(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();var t=this.getImagePosition(),e=t.x2-t.x1,i=t.y2-t.y1,r=document.createElement("canvas");r.width=e,r.height=i;var n=r.getContext("2d");if(n){null!=this.backgroundColor&&(n.fillStyle=this.backgroundColor,n.fillRect(0,0,e,i));var o=(this.transform.scale||1)*(this.transform.flipH?-1:1),s=(this.transform.scale||1)*(this.transform.flipV?-1:1);n.setTransform(o,0,0,s,this.transformedSize.width/2,this.transformedSize.height/2),n.translate(-t.x1/o,-t.y1/s),n.rotate((this.transform.rotate||0)*Math.PI/180),n.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);var a={width:e,height:i,imagePosition:t,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(a.offsetImagePosition=this.getOffsetImagePosition());var c=this.getResizeRatio(e,i);return 1!==c&&(a.width=Math.round(e*c),a.height=this.maintainAspectRatio?Math.round(a.width/this.aspectRatio):Math.round(i*c),function(t,e,i){var r=t.width,n=t.height,o=r/(e=Math.round(e)),s=n/(i=Math.round(i)),a=Math.ceil(o/2),c=Math.ceil(s/2),h=t.getContext("2d");if(h){for(var p=h.getImageData(0,0,r,n),l=h.createImageData(e,i),u=p.data,d=l.data,g=0;g<i;g++)for(var m=0;m<e;m++){var f=4*(m+g*e),v=g*s,b=0,S=0,y=0,A=0,x=0,M=0,z=0,w=Math.floor(m*o),k=Math.floor(g*s),C=Math.ceil((m+1)*o),I=Math.ceil((g+1)*s);C=Math.min(C,r),I=Math.min(I,n);for(var R=k;R<I;R++)for(var O=Math.abs(v-R)/c,P=m*o,T=O*O,_=w;_<C;_++){var E=Math.abs(P-_)/a,B=Math.sqrt(T+E*E);if(!(B>=1)){var W=4*(_+R*r);z+=(b=2*B*B*B-3*B*B+1)*u[W+3],y+=b,u[W+3]<255&&(b=b*u[W+3]/250),A+=b*u[W],x+=b*u[W+1],M+=b*u[W+2],S+=b}}d[f]=A/S,d[f+1]=x/S,d[f+2]=M/S,d[f+3]=z/y}t.width=e,t.height=i,h.putImageData(l,0,0)}}(r,a.width,a.height)),a.base64=this.cropToBase64(r),this.imageCropped.emit(a),a}}return null}},{key:"getImagePosition",value:function(){var t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}},{key:"getOffsetImagePosition",value:function(){var t,e,i=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;(this.canvasRotation+this.exifTransform.rotate)%2?(t=(this.transformedSize.width-this.originalSize.height)/2,e=(this.transformedSize.height-this.originalSize.width)/2):(t=(this.transformedSize.width-this.originalSize.width)/2,e=(this.transformedSize.height-this.originalSize.height)/2);var r={x1:Math.round(this.cropper.x1*i)-t,y1:Math.round(this.cropper.y1*i)-e,x2:Math.round(this.cropper.x2*i)-t,y2:Math.round(this.cropper.y2*i)-e};return this.containWithinAspectRatio||(r.x1=Math.max(r.x1,0),r.y1=Math.max(r.y1,0),r.x2=Math.min(r.x2,this.transformedSize.width),r.y2=Math.min(r.y2,this.transformedSize.height)),r}},{key:"cropToBase64",value:function(t){return t.toDataURL("image/"+this.format,this.getQuality())}},{key:"getQuality",value:function(){return Math.min(1,Math.max(0,this.imageQuality/100))}},{key:"getResizeRatio",value:function(t,e){var i=this.resizeToWidth/t,r=this.resizeToHeight/e,n=new Array;this.resizeToWidth>0&&n.push(i),this.resizeToHeight>0&&n.push(r);var o=0===n.length?1:Math.min.apply(Math,n);return o>1&&!this.onlyScaleDown?o:Math.min(o,1)}},{key:"getClientX",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}},{key:"getClientY",value:function(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}]),e}()).\u0275fac=function(t){return new(t||E)(S.Nb(C.b),S.Nb(S.h))},E.\u0275cmp=S.Hb({type:E,selectors:[["image-cropper"]],viewQuery:function(t,e){var i;1&t&&(S.Ec(I,!0),S.Nc(R,!0)),2&t&&(S.vc(i=S.ec())&&(e.wrapper=i.first),S.vc(i=S.ec())&&(e.sourceImage=i.first))},hostVars:4,hostBindings:function(t,e){1&t&&S.dc("resize",function(){return e.onResize()},!1,S.yc)("mousemove",function(t){return e.moveImg(t)},!1,S.xc)("touchmove",function(t){return e.moveImg(t)},!1,S.xc)("mouseup",function(){return e.moveStop()},!1,S.xc)("touchend",function(){return e.moveStop()},!1,S.xc),2&t&&(S.Fc("text-align",e.alignImage),S.Fb("disabled",e.disabled))},inputs:{format:"format",maintainAspectRatio:"maintainAspectRatio",transform:"transform",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",backgroundColor:"backgroundColor"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[S.yb],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(S.Tb(0,"div",null,0),S.Gc(2,O,2,5,"img",1),S.Ob(3,"div",2),S.Gc(4,T,3,15,"div",3),S.Sb()),2&t&&(S.Fc("background",e.imageVisible&&e.backgroundColor),S.Ab(2),S.mc("ngIf",e.safeImgDataUrl),S.Ab(1),S.Fc("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),S.Ab(1),S.mc("ngIf",e.imageVisible))},directives:[p.o],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),E),Q=((_=function e(){t(this,e)}).\u0275mod=S.Lb({type:_}),_.\u0275inj=S.Kb({factory:function(t){return new(t||_)},imports:[[p.c]]}),_);function H(t,e){1&t&&(S.Tb(0,"h3"),S.Ic(1,"All Advertisement"),S.Sb())}function U(t,e){1&t&&(S.Tb(0,"h3"),S.Ic(1,"Active Advertisement"),S.Sb())}function F(t,e){1&t&&(S.Tb(0,"h3"),S.Ic(1,"Deactivate Advertisement"),S.Sb())}function D(t,e){if(1&t){var i=S.Ub();S.Tb(0,"button",25),S.dc("click",function(){S.zc(i);var t=S.fc().$implicit;return S.fc().updateStatus("true",t._id)}),S.Ic(1," Activate "),S.Sb()}if(2&t){var r=S.fc(2);S.mc("disabled","Super Admin"!==r.currentRole)}}function L(t,e){if(1&t){var i=S.Ub();S.Tb(0,"button",5),S.dc("click",function(){S.zc(i);var t=S.fc().$implicit;return S.fc().updateStatus("false",t._id)}),S.Ic(1," Deactivate "),S.Sb()}if(2&t){var r=S.fc(2);S.mc("disabled","Super Admin"!==r.currentRole)}}function j(t,e){if(1&t){var i=S.Ub();S.Tb(0,"div",16),S.Tb(1,"div",17),S.Tb(2,"div",18),S.Tb(3,"h6"),S.Tb(4,"span",12),S.Ic(5,"Advertisement Title"),S.Sb(),S.Tb(6,"p",19),S.Tb(7,"small",12),S.Ic(8,"Status: "),S.Sb(),S.Tb(9,"small",20),S.Ic(10),S.Sb(),S.Sb(),S.Sb(),S.Ob(11,"img",21),S.Tb(12,"div",10),S.Tb(13,"div",2),S.Gc(14,D,2,1,"button",22),S.Gc(15,L,2,1,"button",23),S.Sb(),S.Tb(16,"div",4),S.Tb(17,"button",24),S.dc("click",function(){S.zc(i);var t=e.$implicit;return S.fc().deleteAdvert(t._id)}),S.Ic(18," Delete "),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Sb()}if(2&t){var r=e.$implicit,n=S.fc();S.Ab(10),S.Jc(r.status),S.Ab(1),S.pc("src","",n.amazonUrl,"",r.image,"",S.Bc),S.Ab(3),S.mc("ngIf",0==r.status),S.Ab(1),S.mc("ngIf",1==r.status),S.Ab(2),S.mc("disabled","Super Admin"!==n.currentRole)}}function V(t,e){if(1&t&&(S.Tb(0,"p",40),S.Ic(1),S.Sb()),2&t){var i=S.fc(2);S.Ab(1),S.Jc(i.message)}}function $(t,e){1&t&&(S.Tb(0,"p",41),S.Ic(1," Image is required "),S.Sb())}function X(t,e){if(1&t){var i=S.Ub();S.Tb(0,"div",26),S.Tb(1,"h3"),S.Ic(2,"Upload File"),S.Sb(),S.Sb(),S.Tb(3,"div",27),S.Tb(4,"div",28),S.Tb(5,"image-cropper",29),S.dc("imageCropped",function(t){return S.zc(i),S.fc().imageCropped(t)})("imageLoaded",function(){return S.zc(i),S.fc().imageLoaded()}),S.Sb(),S.Tb(6,"input",30,31),S.dc("change",function(t){return S.zc(i),S.fc().fileChangeEvent(t)}),S.Sb(),S.Tb(8,"button",32),S.Ic(9,"Insert Image"),S.Sb(),S.Ob(10,"img",33),S.Gc(11,V,2,1,"p",34),S.Gc(12,$,2,0,"p",35),S.Sb(),S.Sb(),S.Tb(13,"div",36),S.Tb(14,"div",37),S.Tb(15,"button",38),S.dc("click",function(){return e.$implicit.close("close click")}),S.Ic(16,"Close"),S.Sb(),S.Tb(17,"button",39),S.dc("click",function(){return S.zc(i),S.fc().uploadImg()}),S.Ic(18,"Upload Image"),S.Sb(),S.Sb(),S.Sb()}if(2&t){var r=S.fc();S.Ab(5),S.Fc("display",r.showCropper?null:"none"),S.mc("imageChangedEvent",r.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",r.containWithinAspectRatio)("aspectRatio",16/9)("resizeToWidth",641)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",r.canvasRotation)("transform",r.transform)("alignImage","left"),S.Ab(5),S.nc("src",r.croppedImage,S.Bc),S.Ab(1),S.mc("ngIf",r.message),S.Ab(1),S.mc("ngIf",r.croppedImage&&r.submitted)}}var Y,N,G=((Y=function(){function e(i,r,n,o){t(this,e),this.modalService=i,this.service=r,this.gs=n,this.store=o,this.highlighted=!1,this.allAdvert=[],this.headStatus="all",this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={},this.amazonUrl=d.a,this.slideConfig={infinite:!0,speed:900,autoplay:!1,slidesToShow:3,slidesToScroll:2,prevArrow:'<button class="leftRs ft-chevron-left"></button>',nextArrow:'<button class="rightRs ft-chevron-right"></button>',responsive:[{breakpoint:1025,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:605,settings:{slidesToShow:1,slidesToScroll:2,infinite:!0}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:2}}]}}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.store.subscribe(function(e){void 0!==e.UserData.data&&(t.currentRole=e.UserData.data.role.title)},function(t){},function(){t.subscription.unsubscribe()}),this.getAdvert(null)}},{key:"getAdvert",value:function(t){var e=this;this.service.getAdvertisement(t).subscribe(function(t){e.allAdvert=t})}},{key:"preview",value:function(t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imageFile=t[0],0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(null==t[0].type.match(/image\/*/)){e.next=8;break}return e.next=5,function(t){return new Promise(function(e,i){var r=new FileReader;r.readAsDataURL(t[0]),r.onload=function(){return e(r.result)},r.onerror=function(t){return i(t)}})}(t).then(function(t){i.imgURL=t});case 5:this.gs.compress(this.imgURL,t[0].name).then(function(t){var e=t[0];if(1==e.status)return i.imageFile=e.file,void(i.imgURL=e.con64)}),e.next=9;break;case 8:this.message="Only images are supported.";case 9:case"end":return e.stop()}},e,this)}))}},{key:"deleteAdvert",value:function(t){var e=this;Object(d.c)().then(function(i){i&&(alert("asdf"),e.service.deleteAdvert(t).subscribe(function(){e.getAdvert(null)}))})}},{key:"uploadImg",value:function(){var t=this;this.submitted=!0,null!=this.imageFile&&this.service.postAdvertisement(this.imageFile).subscribe(function(e){t.modalService.dismissAll(),t.getAdvert(null)},function(e){t.modalService.dismissAll()})}},{key:"updateStatus",value:function(t,e){var i=this;this.service.changeStatus(t,e).subscribe(function(){i.getAdvert(null)})}},{key:"open",value:function(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}},{key:"fileChangeEvent",value:function(t){if(this.tempFile=t.target.files[0],this.imageChangedEvent=t,!this.tempFile)return!1;null!=this.tempFile.type.match(/image\/*/)||(this.message="Only images are supported.")}},{key:"imageCropped",value:function(t){this.croppedImage=t.base64,this.imageFile=Object(g.b)(this.croppedImage,this.tempFile.name)}},{key:"imageLoaded",value:function(){this.showCropper=!0}}]),e}()).\u0275fac=function(t){return new(t||Y)(S.Nb(u.i),S.Nb(y),S.Nb(g.a),S.Nb(A.a))},Y.\u0275cmp=S.Hb({type:Y,selectors:[["app-advertisement"]],features:[S.zb([u.c])],decls:35,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[4,"ngIf"],[1,"col-sm-6","text-right"],[1,"btn","btn-orange",3,"disabled","click"],[1,"col-sm-12"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],[1,"row","py-2"],[1,"col-sm-12","text-right"],[1,"font-weight-500"],[1,"hoverTotal",3,"click"],[1,"text-orange"],["addAdvert",""],["ngxSlickItem","",1,"slide"],[1,"card"],[1,"card-body"],[1,"float-right"],[1,"text-success"],["height","230px","width","300px","onerror","src='../../../assets/img/gallery/1.jpg'","alt","","width","100%",3,"src"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","btn btn-orange",3,"disabled","click",4,"ngIf"],[1,"btn","btn-danger",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[1,"modal-header","justify-content-center"],[1,"modal-body"],[1,"position-relative","text-center"],["format","png",1,"cropper",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded"],["type","file","accept","image/*","type","file",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"text-error","mb-0"],[1,"text-error"]],template:function(t,e){if(1&t){var i=S.Ub();S.Tb(0,"div",0),S.Tb(1,"div",1),S.Tb(2,"div",2),S.Gc(3,H,2,0,"h3",3),S.Gc(4,U,2,0,"h3",3),S.Gc(5,F,2,0,"h3",3),S.Sb(),S.Tb(6,"div",4),S.Tb(7,"button",5),S.dc("click",function(){S.zc(i);var t=S.wc(34);return e.open(t)}),S.Ic(8,"Add Advertisement"),S.Sb(),S.Sb(),S.Sb(),S.Tb(9,"div",1),S.Tb(10,"div",6),S.Tb(11,"ngx-slick-carousel",7,8),S.Gc(13,j,19,6,"div",9),S.Sb(),S.Sb(),S.Sb(),S.Tb(14,"div",10),S.Tb(15,"div",11),S.Tb(16,"span",12),S.Tb(17,"a",13),S.dc("click",function(){return e.headStatus="active",e.getAdvert(!0)}),S.Ic(18,"Total Actived Advertisements: "),S.Sb(),S.Sb(),S.Tb(19,"span",14),S.Ic(20),S.Sb(),S.Ic(21," \xa0 "),S.Tb(22,"span",12),S.Tb(23,"a",13),S.dc("click",function(){return e.headStatus="deactivate",e.getAdvert(!1)}),S.Ic(24,"Total Deactivated Advertisements: "),S.Sb(),S.Sb(),S.Tb(25,"span",14),S.Ic(26),S.Sb(),S.Ic(27," \xa0 "),S.Tb(28,"span",12),S.Tb(29,"a",13),S.dc("click",function(){return e.headStatus="all",e.getAdvert(null)}),S.Ic(30,"Total Advertisements: "),S.Sb(),S.Sb(),S.Tb(31,"span",14),S.Ic(32),S.Sb(),S.Sb(),S.Sb(),S.Sb(),S.Gc(33,X,19,16,"ng-template",null,15,S.Hc)}2&t&&(S.Ab(3),S.mc("ngIf","all"==e.headStatus),S.Ab(1),S.mc("ngIf","active"==e.headStatus),S.Ab(1),S.mc("ngIf","deactivate"==e.headStatus),S.Ab(2),S.mc("disabled","Super Admin"!==e.currentRole),S.Ab(4),S.mc("config",e.slideConfig),S.Ab(2),S.mc("ngForOf",e.allAdvert.advertisements),S.Ab(7),S.Jc(e.allAdvert.totalActive),S.Ab(6),S.Jc(e.allAdvert.totalDeactive),S.Ab(6),S.Jc(e.allAdvert.total))},directives:[p.o,z,p.n,w,W],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;bottom:0;opacity:0;z-index:1;cursor:pointer}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:scale-down;object-fit:scale-down;border-radius:15px}.ft-chevron-left[_ngcontent-%COMP%], .ft-chevron-right[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:orange;text-shadow:0 0 10px rgba(0,0,0,.9)}.hoverTotal[_ngcontent-%COMP%]:hover{color:#1a73e8!important;text-decoration:underline!important}.cropper[_ngcontent-%COMP%]{height:200px;width:200px;margin:0 auto}"]}),Y),K=n("tyNb"),J=n("RLft"),q=[{path:"",component:G}],Z=((N=function e(){t(this,e)}).\u0275mod=S.Lb({type:N}),N.\u0275inj=S.Kb({factory:function(t){return new(t||N)},imports:[[p.c,u.j,k,K.g.forChild(q),Q,A.b.forFeature("UserData",J.b)]]}),N)}}])}();