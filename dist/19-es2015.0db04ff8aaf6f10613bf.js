(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0eu4":function(t,i,c){"use strict";c.r(i),c.d(i,"HiringActionsModule",function(){return Y});var e,n,o=c("ofXK"),r=c("mrSG"),b=c("3Pt+"),s=c("tk/3"),a=c("PSD3"),l=c.n(a),d=c("lJxs"),u=c("vkgz"),g=c("tkbi"),m=c("q2CC"),p=c("fXoL"),f=c("1kSV");let h=(()=>{class t{constructor(t,i,c){this.http=t,this.modalService=i,this.gs=c,this._url=m.f,this.gs.token.subscribe(t=>{let i=t;e={headers:new s.c({Authorization:"bearer "+i})},n={headers:new s.c({"Content-Type":"application/x-www-form-urlencoded",Authorization:"bearer "+i})}})}getHiringActions(t){return this.http.get(this._url+"api/admin/hiring-action-type?status="+t,e)}addHiringActions(t,i){let c=new FormData;return c.append("title",t.title),c.append("description",t.desc),c.append("icon",i),this.http.post(this._url+"api/admin/hiring-action-type",c,e).pipe(Object(d.a)(t=>(1==t.success?S("success","Added"):S("error",t.msg),t),t=>{S("error",t.error.msg)}))}assignLabel(t,i,c){let e=(new s.d).set("label",i).set("hiringActionType",t).set("locale",c);return this.http.post(this._url+"api/admin/hiring-action-type/assignLabel",e.toString(),n).pipe(Object(d.a)(t=>(200==t.code?(S("success","Label Successfully Added"),this.modalService.dismissAll()):(S("error",t.msg),this.modalService.dismissAll()),t),t=>{S("error",t.error.msg),this.modalService.dismissAll()}))}changeStatus(t,i){let c=new FormData;return c.append("status",t),c.append("action_type_id",i),this.http.put(this._url+"api/admin/hiring-action-type",c,e).pipe(Object(u.a)(()=>{S("success","Status is Changed")},t=>{S("error",t.error.msg)}))}}return t.\u0275fac=function(i){return new(i||t)(p.ac(s.a),p.ac(f.i),p.ac(g.a))},t.\u0275prov=p.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function S(t,i){l.a.fire({icon:t,text:i,width:"400px",timer:2500,showConfirmButton:!1})}function T(t,i){if(1&t){const t=p.Ub();p.Tb(0,"div",20),p.dc("click",function(){p.zc(t);const i=p.fc();return i.tableContext="all",i.getActions("")}),p.Ic(1,"All Actions"),p.Sb()}}function A(t,i){1&t&&p.Pb(0)}function v(t,i){1&t&&p.Pb(0)}function I(t,i){if(1&t&&(p.Tb(0,"table",21),p.Tb(1,"thead"),p.Gc(2,A,1,0,"ng-container",22),p.Sb(),p.Tb(3,"tbody"),p.Gc(4,v,1,0,"ng-container",22),p.Sb(),p.Sb()),2&t){p.fc();const t=p.wc(30),i=p.wc(32);p.Ab(2),p.mc("ngTemplateOutlet",t),p.Ab(2),p.mc("ngTemplateOutlet",i)}}function y(t,i){if(1&t){const t=p.Ub();p.Tb(0,"div",20),p.dc("click",function(){p.zc(t);const i=p.fc();return i.tableContext="active",i.getActions("true")}),p.Ic(1,"Active Actions"),p.Sb()}}function k(t,i){1&t&&p.Pb(0)}function w(t,i){1&t&&p.Pb(0)}function x(t,i){if(1&t&&(p.Tb(0,"table",21),p.Tb(1,"thead"),p.Gc(2,k,1,0,"ng-container",22),p.Sb(),p.Tb(3,"tbody"),p.Gc(4,w,1,0,"ng-container",22),p.Sb(),p.Sb()),2&t){p.fc();const t=p.wc(30),i=p.wc(32);p.Ab(2),p.mc("ngTemplateOutlet",t),p.Ab(2),p.mc("ngTemplateOutlet",i)}}function G(t,i){if(1&t){const t=p.Ub();p.Tb(0,"div",20),p.dc("click",function(){p.zc(t);const i=p.fc();return i.tableContext="blocked",i.getActions("false")}),p.Ic(1,"Blocked Actions"),p.Sb()}}function L(t,i){1&t&&p.Pb(0)}function O(t,i){1&t&&p.Pb(0)}function C(t,i){if(1&t&&(p.Tb(0,"table",21),p.Tb(1,"thead"),p.Gc(2,L,1,0,"ng-container",22),p.Sb(),p.Tb(3,"tbody"),p.Gc(4,O,1,0,"ng-container",22),p.Sb(),p.Sb()),2&t){p.fc();const t=p.wc(30),i=p.wc(32);p.Ab(2),p.mc("ngTemplateOutlet",t),p.Ab(2),p.mc("ngTemplateOutlet",i)}}function z(t,i){if(1&t&&(p.Tb(0,"p",42),p.Ic(1),p.Sb()),2&t){const t=p.fc(2);p.Ab(1),p.Jc(t.message)}}function H(t,i){1&t&&(p.Tb(0,"p",43),p.Ic(1," Image is required "),p.Sb())}function U(t,i){1&t&&(p.Tb(0,"p",43),p.Ic(1," Title is required "),p.Sb())}function j(t,i){1&t&&(p.Tb(0,"p",43),p.Ic(1," Description is required "),p.Sb())}function P(t,i){if(1&t){const t=p.Ub();p.Tb(0,"div",23),p.Tb(1,"h3",24),p.Ic(2,"Add Vehicle Type"),p.Sb(),p.Tb(3,"a",25),p.dc("click",function(){return i.$implicit.close("Cancel Modal")}),p.Ob(4,"i",26),p.Sb(),p.Sb(),p.Tb(5,"div",27),p.Tb(6,"form",28),p.Tb(7,"div",29),p.Tb(8,"div",30),p.Tb(9,"input",31,32),p.dc("change",function(){p.zc(t);const i=p.wc(10);return p.fc().preview(i.files)}),p.Sb(),p.Tb(11,"button",33),p.Ic(12,"Add Image"),p.Sb(),p.Ob(13,"img",34),p.Gc(14,z,2,1,"p",35),p.Gc(15,H,2,0,"p",36),p.Sb(),p.Sb(),p.Tb(16,"div",37),p.Ob(17,"input",38),p.Gc(18,U,2,0,"p",36),p.Sb(),p.Tb(19,"div",37),p.Ob(20,"input",39),p.Gc(21,j,2,0,"p",36),p.Sb(),p.Sb(),p.Sb(),p.Tb(22,"div",40),p.Tb(23,"div"),p.Tb(24,"button",41),p.dc("click",function(){p.zc(t);const i=p.fc();return i.addAction(i.addHiringAction)}),p.Ic(25,"Add"),p.Sb(),p.Sb(),p.Sb()}if(2&t){const t=p.fc();p.Ab(6),p.mc("formGroup",t.addHiringAction),p.Ab(7),p.nc("src",t.imgURL,p.Bc),p.Ab(1),p.mc("ngIf",t.message),p.Ab(1),p.mc("ngIf",null==t.imgURL&&t.submitted),p.Ab(3),p.mc("ngIf",t.addHiringAction.controls.title.hasError("required")&&t.submitted),p.Ab(3),p.mc("ngIf",t.addHiringAction.controls.desc.hasError("required")&&t.submitted)}}function _(t,i){if(1&t&&(p.Tb(0,"option",52),p.Ic(1),p.Sb()),2&t){const t=i.$implicit;p.pc("value","",t.code,"/",t._id,""),p.Ab(1),p.Kc(" ",t.title," ")}}function F(t,i){1&t&&(p.Tb(0,"div",37),p.Ob(1,"input",53),p.Sb())}function q(t,i){1&t&&(p.Tb(0,"div",37),p.Ob(1,"input",54),p.Sb())}function B(t,i){if(1&t){const t=p.Ub();p.Tb(0,"div",44),p.Tb(1,"h3",24),p.Ic(2,"Add Label"),p.Sb(),p.Tb(3,"a",25),p.dc("click",function(){return i.$implicit.close("Cancel Modal")}),p.Ob(4,"i",26),p.Sb(),p.Sb(),p.Tb(5,"div",45),p.Tb(6,"form",28),p.Tb(7,"div",37),p.Tb(8,"select",46),p.dc("change",function(i){return p.zc(t),p.fc().changeLocal(i)}),p.Tb(9,"option",47),p.Ic(10,"Select Language"),p.Sb(),p.Gc(11,_,2,3,"option",48),p.Sb(),p.Sb(),p.Gc(12,F,2,0,"div",49),p.Gc(13,q,2,0,"div",49),p.Sb(),p.Sb(),p.Tb(14,"div",50),p.Tb(15,"button",51),p.dc("click",function(){p.zc(t);const i=p.fc();return i.submitLabel(i.assignLabel)}),p.Ic(16,"Add Label"),p.Sb(),p.Sb()}if(2&t){const t=p.fc();p.Ab(6),p.mc("formGroup",t.assignLabel),p.Ab(5),p.mc("ngForOf",t.locals),p.Ab(1),p.mc("ngIf","ur"==t.code||"ar"==t.code),p.Ab(1),p.mc("ngIf","en"==t.code)}}function M(t,i){if(1&t&&(p.Tb(0,"div",55),p.Tb(1,"a",56),p.Tb(2,"span",57),p.dc("click",function(){return i.$implicit.close("Cancel Cick")}),p.Sb(),p.Sb(),p.Sb(),p.Tb(3,"div",58),p.Ob(4,"img",59),p.Sb()),2&t){const t=p.fc();p.Ab(4),p.nc("src",t.currentImage,p.Bc)}}function N(t,i){1&t&&(p.Tb(0,"tr"),p.Tb(1,"th"),p.Ic(2,"Icon"),p.Sb(),p.Tb(3,"th"),p.Ic(4,"Title"),p.Sb(),p.Tb(5,"th",60),p.Ic(6,"Description"),p.Sb(),p.Tb(7,"th"),p.Ic(8,"Task Performed"),p.Sb(),p.Tb(9,"th"),p.Ic(10,"Action"),p.Sb(),p.Sb())}function R(t,i){1&t&&p.Pb(0)}function $(t,i){if(1&t){const t=p.Ub();p.Tb(0,"button",68),p.dc("click",function(){p.zc(t);const i=p.fc().$implicit;return p.fc(2).changeActionStatus(!1,i._id)}),p.Ic(1,"Block Action"),p.Sb()}}function J(t,i){if(1&t){const t=p.Ub();p.Tb(0,"button",69),p.dc("click",function(){p.zc(t);const i=p.fc().$implicit;return p.fc(2).changeActionStatus(!0,i._id)}),p.Ic(1,"Active Action"),p.Sb()}}function D(t,i){if(1&t){const t=p.Ub();p.Tb(0,"tr"),p.Tb(1,"td",62),p.Tb(2,"img",63),p.dc("click",function(){p.zc(t);const c=i.$implicit,e=p.fc(2),n=p.wc(28);return e.bigImage(n,c.icon)}),p.Sb(),p.Sb(),p.Tb(3,"td"),p.Ic(4),p.Sb(),p.Tb(5,"td",64),p.Ic(6),p.Sb(),p.Tb(7,"td"),p.Ic(8),p.Sb(),p.Tb(9,"td"),p.Tb(10,"button",65),p.dc("click",function(){p.zc(t);const c=i.$implicit,e=p.fc(2),n=p.wc(26);return e.open(n),e.actionTypeId=c._id}),p.Ic(11,"Assign Label"),p.Sb(),p.Gc(12,$,2,0,"button",66),p.Gc(13,J,2,0,"button",67),p.Sb(),p.Sb()}if(2&t){const t=i.$implicit,c=p.fc(2);p.Ab(2),p.pc("src","",c.amazonImgUrl,"",t.icon,"",p.Bc),p.Ab(2),p.Jc(t.title),p.Ab(2),p.Jc(t.description),p.Ab(2),p.Jc(t.actionCount),p.Ab(4),p.mc("ngIf","active"==c.tableContext),p.Ab(1),p.mc("ngIf","blocked"==c.tableContext)}}function V(t,i){if(1&t&&(p.Gc(0,R,1,0,"ng-container",22),p.Gc(1,D,14,7,"tr",61)),2&t){const t=p.fc(),i=p.wc(34);p.mc("ngTemplateOutlet",i),p.Ab(1),p.mc("ngForOf",t.hiringActions)}}function K(t,i){1&t&&(p.Tb(0,"tr"),p.Tb(1,"td",71),p.Ob(2,"div",72),p.Sb(),p.Sb())}function E(t,i){if(1&t&&p.Gc(0,K,3,0,"tr",70),2&t){const t=p.fc();p.mc("ngIf",t.spinner)}}let X=(()=>{class t{constructor(t,i,c,e){this.fb=t,this.modalService=i,this.hirngActService=c,this.globalService=e,this.hiringActions=[],this.locals=[],this.tableContext="all",this.amazonImgUrl=m.a,this.addHiringAction=this.fb.group({title:["",b.s.required],hasLocation:[""],desc:["",b.s.required]}),this.assignLabel=this.fb.group({label:["",b.s.required]})}ngOnInit(){this.getActions(""),this.globalService.getLocals().subscribe(t=>{200==t.code&&(this.locals=t.data.data)})}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}changeLocal(t){this.singleLocal=t.target.value.split("/"),this.code=this.singleLocal[0],this.localId=this.singleLocal[1]}bigImage(t,i){this.currentImage=this.amazonImgUrl+i,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}preview(t){return Object(r.a)(this,void 0,void 0,function*(){if(this.imageFile=t[0],0===t.length)return!1;null!=t[0].type.match(/image\/*/)?(yield function(t){return new Promise((i,c)=>{const e=new FileReader;e.readAsDataURL(t[0]),e.onload=()=>i(e.result),e.onerror=t=>c(t)})}(t).then(t=>{this.imgURL=t}),this.globalService.compress(this.imgURL,t[0].name).then(t=>{let i=t[0];if(1==i.status)return this.imageFile=i.file,void(this.imgURL=i.con64)})):this.message="Only images are supported."})}addAction(t){if(this.submitted=!0,!t.valid||void 0===this.imageFile)return!1;{let i=t.getRawValue();this.hirngActService.addHiringActions(i,this.imageFile).subscribe(t=>{1==t.success?(this.modalService.dismissAll(),this.getActions("")):this.modalService.dismissAll()},t=>{this.modalService.dismissAll()})}}getActions(t){this.spinner=!0,this.hirngActService.getHiringActions(t).subscribe(t=>{this.spinner=!1,this.hiringActions=t.data.HiringActionTypes})}submitLabel(t){if(this.submitted=!0,t.valid){let i=t.getRawValue();this.hirngActService.assignLabel(this.actionTypeId,i.label,this.localId).subscribe(t=>{200==t.code&&this.getActions("")})}}changeActionStatus(t,i){this.hirngActService.changeStatus(t,i).subscribe(()=>{this.getActions(!t)})}}return t.\u0275fac=function(i){return new(i||t)(p.Nb(b.b),p.Nb(f.i),p.Nb(h),p.Nb(g.a))},t.\u0275cmp=p.Hb({type:t,selectors:[["app-hiring-actions"]],decls:35,vars:0,consts:[["id","tabs"],[1,"row","text-left","mt-2"],[1,"col-sm-6","mb-1"],[1,"mb-0"],[1,"col-sm-6","text-right"],[1,"btn","btn-orange","mb-0",3,"click"],[1,"row","text-left"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-content"],[1,"card-body"],["type","pills"],["ngbTabTitle",""],["ngbTabContent",""],["addActionsModel",""],["addLabel",""],["bigImg",""],["tableHeader",""],["tableBody",""],["shimmer",""],[1,"tab-padding",3,"click"],[1,"table","table-responsive-md","table-striped"],[4,"ngTemplateOutlet"],[1,"modal-header","justify-content-center","mb-1"],[1,"card-title","mb-0"],[3,"click"],[1,"ft-x","close-icon"],[1,"modal-body","pb-0"],[3,"formGroup"],[1,"form-group","text-center","col-sm-12"],[1,"position-relative"],["accept","image/*","type","file","accept","image/*","type","file",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"form-group"],["type","text","formControlName","title","placeholder","Action Title",1,"form-control"],["type","text","formControlName","desc","placeholder","Description",1,"form-control"],[1,"modal-footer","mb-2"],["type","submit",1,"btn","btn-success",3,"click"],[1,"text-error","mb-0"],[1,"text-error"],[1,"modal-header","justify-content-center"],[1,"modal-body"],[1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],[3,"value"],["type","text","formControlName","label","placeholder","\u0644\u06cc\u0628\u0644",1,"form-control","text-right"],["type","text","formControlName","label","placeholder","Label",1,"form-control"],[1,"modal-header","d-flex","justify-content-end","pb-0","mb-2"],[1,"mb-2"],[1,"ft-x","text-error",3,"click"],[1,"modal-body","d-flex","justify-content-center","pt-0"],["onerror","src='../../../../assets/img/gallery/1.jpg'",1,"object-fit",3,"src"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"image-td"],["onerror","src='../../../assets/img/gallery/1.jpg'","alt","img",1,"table-img-size",3,"src","click"],[1,"desc"],[1,"btn","btn-orange",3,"click"],["class","btn btn-danger ml-2",3,"click",4,"ngIf"],["class","btn btn-success ml-2",3,"click",4,"ngIf"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"btn","btn-success","ml-2",3,"click"],[4,"ngIf"],["colspan","12"],[1,"py-3","shine","w-100"]],template:function(t,i){if(1&t){const t=p.Ub();p.Tb(0,"section",0),p.Tb(1,"div",1),p.Tb(2,"div",2),p.Tb(3,"h3",3),p.Ic(4,"Hiring Actions Types"),p.Sb(),p.Sb(),p.Tb(5,"div",4),p.Tb(6,"button",5),p.dc("click",function(){p.zc(t);const c=p.wc(24);return i.open(c)}),p.Ic(7,"Add Action Type"),p.Sb(),p.Sb(),p.Sb(),p.Tb(8,"div",6),p.Tb(9,"div",7),p.Tb(10,"div",8),p.Tb(11,"div",9),p.Tb(12,"div",10),p.Tb(13,"ngb-tabset",11),p.Tb(14,"ngb-tab"),p.Gc(15,T,2,0,"ng-template",12),p.Gc(16,I,5,2,"ng-template",13),p.Sb(),p.Tb(17,"ngb-tab"),p.Gc(18,y,2,0,"ng-template",12),p.Gc(19,x,5,2,"ng-template",13),p.Sb(),p.Tb(20,"ngb-tab"),p.Gc(21,G,2,0,"ng-template",12),p.Gc(22,C,5,2,"ng-template",13),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Gc(23,P,26,6,"ng-template",null,14,p.Hc),p.Gc(25,B,17,4,"ng-template",null,15,p.Hc),p.Gc(27,M,5,1,"ng-template",null,16,p.Hc),p.Gc(29,N,11,0,"ng-template",null,17,p.Hc),p.Gc(31,V,2,2,"ng-template",null,18,p.Hc),p.Gc(33,E,1,1,"ng-template",null,19,p.Hc)}},directives:[f.o,f.l,f.n,f.m,o.p,b.u,b.l,b.f,o.o,b.a,b.k,b.d,b.o,b.t,o.n],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;right:0;opacity:0;bottom:0;z-index:1;cursor:pointer}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:cover;object-fit:cover;border-radius:15px}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.ng2-smart-page-item[_ngcontent-%COMP%]{line-height:unset;margin:0!important}.form-check-label[_ngcontent-%COMP%]{cursor:pointer;text-transform:capitalize}"]}),t})();var Q=c("tyNb");const W=[{path:"",component:X}];let Y=(()=>{class t{}return t.\u0275mod=p.Lb({type:t}),t.\u0275inj=p.Kb({factory:function(i){return new(i||t)},imports:[[o.c,b.g,f.j,b.q,Q.g.forChild(W)]]}),t})()}}]);