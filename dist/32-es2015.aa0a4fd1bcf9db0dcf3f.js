(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{QMXj:function(t,e,i){"use strict";i.r(e),i.d(e,"VersionControlModule",function(){return k});var n,s,c=i("ofXK"),o=i("3Pt+"),r=i("PSD3"),b=i.n(r),a=i("tk/3"),d=i("q2CC"),l=i("tkbi"),u=i("lJxs"),p=i("vkgz"),m=i("fXoL");let v=(()=>{class t{constructor(t,e){this.gs=t,this.http=e,this.gs.token.subscribe(t=>{let e=t;n={headers:new a.c({Authorization:"bearer "+e})},s={headers:new a.c({"Content-Type":"application/x-www-form-urlencoded",Authorization:"bearer "+e})}})}getVersionList(){return this.http.get(d.f+"api/admin/version",n).pipe(Object(u.a)(t=>t.data))}addVersion({version:t,title:e,description:i}){let n=(new a.d).set("version",t).set("title",e).set("description",i);return this.http.post(d.f+"api/admin/version",n.toString(),s).pipe(Object(p.a)(t=>{t.success?Object(d.e)("success","Version Added Successfully"):Object(d.e)("warning",t.message)},t=>Object(d.e)("error",t.error.message)))}changeStatus(t){return this.http.put(d.f+"api/admin/version/activate/"+t,"",s).pipe(Object(p.a)(t=>{t.success?Object(d.e)("success","Version is Activated"):Object(d.e)("warning",t.message)},t=>{Object(d.e)("error",t.error.message)}))}}return t.\u0275fac=function(e){return new(e||t)(m.ac(l.a),m.ac(a.a))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac}),t})();var f=i("1kSV");function h(t,e){1&t&&m.Pb(0)}function S(t,e){1&t&&m.Pb(0)}function T(t,e){1&t&&(m.Tb(0,"tr"),m.Tb(1,"td",9),m.Ob(2,"div",10),m.Sb(),m.Sb())}function g(t,e){1&t&&(m.Tb(0,"tr"),m.Tb(1,"th"),m.Ic(2,"Version"),m.Sb(),m.Tb(3,"th"),m.Ic(4,"Title"),m.Sb(),m.Tb(5,"th",11),m.Ic(6,"Description"),m.Sb(),m.Tb(7,"th"),m.Ic(8,"Status"),m.Sb(),m.Tb(9,"th"),m.Ic(10,"AddedBy"),m.Sb(),m.Tb(11,"th"),m.Ic(12,"Date"),m.Sb(),m.Tb(13,"th"),m.Ic(14,"Time"),m.Sb(),m.Tb(15,"th"),m.Ic(16,"Actions"),m.Sb(),m.Sb())}function w(t,e){if(1&t){const t=m.Ub();m.Tb(0,"tr"),m.Tb(1,"td"),m.Ic(2),m.Sb(),m.Tb(3,"td"),m.Ic(4),m.Sb(),m.Tb(5,"td",13),m.Ic(6),m.Sb(),m.Tb(7,"td",14),m.Ic(8),m.Sb(),m.Tb(9,"td"),m.Ic(10),m.Sb(),m.Tb(11,"td"),m.Ic(12),m.gc(13,"date"),m.Sb(),m.Tb(14,"td"),m.Ic(15),m.gc(16,"date"),m.Sb(),m.Tb(17,"td"),m.Tb(18,"button",15),m.dc("click",function(){m.zc(t);const i=e.$implicit;return m.fc(2).sendId(i._id)}),m.Ic(19),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=e.$implicit;m.Ab(2),m.Kc(" ",t.version," "),m.Ab(2),m.Jc(t.title),m.Ab(2),m.Jc(t.description),m.Ab(1),m.mc("ngClass",0==t.active?"text-danger":"text-success"),m.Ab(1),m.Jc(0==t.active?"Deactive":"Active"),m.Ab(2),m.Kc(" ",t.addedBy.name," "),m.Ab(2),m.Jc(m.ic(13,10,t.created_at,"mediumDate")),m.Ab(3),m.Jc(m.ic(16,13,t.created_at,"mediumTime")),m.Ab(3),m.mc("ngClass",0==t.active?"btn-success":"btn-danger"),m.Ab(1),m.Jc(0==t.active?"Activate":"Deactivate")}}function A(t,e){if(1&t&&m.Gc(0,w,20,16,"tr",12),2&t){const t=m.fc();m.mc("ngForOf",t.versionList)}}let y=(()=>{class t{constructor(){this.id=new m.n}ngOnInit(){}sendId(t){this.id.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Hb({type:t,selectors:[["app-version-history"]],inputs:{versionList:"versionList"},outputs:{id:"id"},decls:15,vars:2,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"table","table-responsive-md","table-striped","text-left"],[4,"ngTemplateOutlet"],["shimmer",""],["tableHead",""],["tableData",""],["colspan","12"],[1,"py-3","shine","w-100"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"w-25"],[3,"ngClass"],[1,"btn",3,"ngClass","click"]],template:function(t,e){if(1&t&&(m.Tb(0,"div",0),m.Tb(1,"div",1),m.Tb(2,"div",2),m.Tb(3,"div",3),m.Tb(4,"table",4),m.Tb(5,"thead"),m.Gc(6,h,1,0,"ng-container",5),m.Sb(),m.Tb(7,"tbody"),m.Gc(8,S,1,0,"ng-container",5),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Gc(9,T,3,0,"ng-template",null,6,m.Hc),m.Gc(11,g,17,0,"ng-template",null,7,m.Hc),m.Gc(13,A,1,1,"ng-template",null,8,m.Hc)),2&t){const t=m.wc(10),i=m.wc(12),n=m.wc(14);m.Ab(6),m.mc("ngTemplateOutlet",i),m.Ab(2),m.mc("ngTemplateOutlet",e.versionList?n:t)}},directives:[c.p,c.n,c.m],pipes:[c.f],styles:[""]}),t})();function I(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div",8),m.Tb(1,"h3",9),m.Ic(2,"Add Version"),m.Sb(),m.Tb(3,"a",10),m.dc("click",function(){return e.$implicit.close("Cancel Modal")}),m.Ob(4,"i",11),m.Sb(),m.Sb(),m.Tb(5,"div",12),m.Tb(6,"form",13),m.dc("ngSubmit",function(){return m.zc(t),m.fc().submitVersion()}),m.Tb(7,"div",14),m.Ob(8,"input",15),m.Sb(),m.Tb(9,"div",14),m.Ob(10,"input",16),m.Sb(),m.Tb(11,"div",14),m.Ob(12,"input",17),m.Sb(),m.Tb(13,"div",18),m.Tb(14,"button",19),m.Ic(15," Add Version "),m.Sb(),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=m.fc();m.Ab(6),m.mc("formGroup",t.versionForm),m.Ab(8),m.mc("disabled",t.versionForm.invalid)}}let V=(()=>{class t{constructor(t,e){this.service=t,this.modalService=e,this.versionForm=new o.e({version:new o.c("",o.s.required),title:new o.c(""),description:new o.c("")})}ngOnInit(){this.getVersions()}openModal(t){this.modalService.open(t)}getVersions(){this.service.getVersionList().subscribe(t=>{this.response=t.versions})}submitVersion(){let t=this.versionForm.getRawValue();""!==t&&this.service.addVersion(t).subscribe(()=>{this.modalService.dismissAll(),this.versionForm.reset(),this.getVersions()},t=>{this.modalService.dismissAll(),this.versionForm.reset(),this.getVersions()})}changeStatus(t){b.a.fire({icon:"question",title:"Are You Sure",width:"300px",showCancelButton:!0,showConfirmButton:!0}).then(e=>{e.value&&this.service.changeStatus(t).subscribe(()=>{this.getVersions()})})}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(v),m.Nb(f.i))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-version-control"]],decls:12,vars:1,consts:[["id","tabs"],[1,"row","text-left","mt-2"],[1,"col-6","mb-1"],[1,"mb-0"],[1,"col-6","text-right"],[1,"btn","btn-orange",3,"click"],[3,"versionList","id"],["addVersion",""],[1,"modal-header","justify-content-center","mb-1"],[1,"card-title","mb-0"],[3,"click"],[1,"ft-x","close-icon"],[1,"modal-body"],[1,"row",3,"formGroup","ngSubmit"],[1,"form-group","col-12"],["type","text","placeholder","Type Version","formControlName","version",1,"form-control"],["type","text","placeholder","Type Title","formControlName","title",1,"form-control"],["type","text","placeholder","Type Description","formControlName","description",1,"form-control"],[1,"modal-footer","ml-auto"],["type","submit",1,"btn","btn-orange",3,"disabled"]],template:function(t,e){if(1&t){const t=m.Ub();m.Tb(0,"section",0),m.Tb(1,"div",1),m.Tb(2,"div",2),m.Tb(3,"h3",3),m.Ic(4,"Version Control"),m.Sb(),m.Sb(),m.Tb(5,"div",4),m.Tb(6,"button",5),m.dc("click",function(){m.zc(t);const i=m.wc(11);return e.openModal(i)}),m.Ic(7,"Add Version"),m.Sb(),m.Sb(),m.Sb(),m.Tb(8,"app-version-history",6),m.dc("id",function(t){return e.changeStatus(t)}),m.Sb(),m.Sb(),m.Tb(9,"section"),m.Gc(10,I,16,2,"ng-template",null,7,m.Hc),m.Sb()}2&t&&(m.Ab(8),m.mc("versionList",e.response))},directives:[y,o.u,o.l,o.f,o.a,o.k,o.d],styles:[""]}),t})();var O=i("tyNb");const C=[{path:"",component:V}];let k=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},providers:[v],imports:[[c.c,o.q,O.g.forChild(C)]]}),t})()}}]);