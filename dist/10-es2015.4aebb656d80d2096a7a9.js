(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"68rm":function(t,e,i){"use strict";i.r(e),i.d(e,"AdvertisementModule",function(){return P});var n=i("ofXK"),s=i("1kSV"),c=i("q2CC"),r=i("tkbi"),a=i("lJxs"),o=i("vkgz"),l=i("XNiG"),d=i("fXoL"),b=i("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this._url=c.g,this.onError=new l.a,this.allAdvert=new l.a}postAdvertisement(t,e,i){let n=new FormData;return n.append("image",t),""!==e&&n.append("title",e),""!==i&&n.append("description",i),this.http.post(this._url+"api/admin/advertisement",n).pipe(Object(a.a)(t=>{1==t.success?Object(c.f)("success","Added Successfully"):Object(c.f)("warning",t.message)},t=>{Object(c.f)("error",t.error.message)}))}getAdvertisement(t,e,i){return this.http.get(this._url+"api/admin/advertisement"+(t=null!=t?"?status="+t:"")+(i=null!==e&&null!==i?"?year="+e+"&month="+i:"")).pipe(Object(a.a)(t=>t.data))}changeStatus(t,e){let i=new FormData;return i.append("status",t),i.append("_id",e),this.http.put(this._url+"api/admin/advertisement",i).pipe(Object(a.a)(t=>{1==t.success?Object(c.f)("success","Updated Successfully"):Object(c.f)("warning",t.message)},t=>{Object(c.f)("error",t.error.message)}))}deleteAdvert(t){return this.http.delete(c.g+"api/admin/advertisement/"+t).pipe(Object(o.a)(t=>{1==t.success?Object(c.f)("success","Successfully Deleted"):Object(c.f)("warning","Someting went Wrong")},t=>Object(c.f)("error","Someting went Wrong")))}}return t.\u0275fac=function(e){return new(e||t)(d.ac(b.b))},t.\u0275prov=d.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i("l7P3"),p=i("3Pt+");const g=["*"];let m=(()=>{class t{constructor(t,e,i){this.el=t,this.zone=e,this.platformId=i,this.afterChange=new d.n,this.beforeChange=new d.n,this.breakpoint=new d.n,this.destroy=new d.n,this.init=new d.n,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if(!Object(n.A)(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){const t=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===t?this.unslick():(this._addedSlides.forEach(t=>{this.slides.push(t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",t.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(t=>{const e=this.slides.indexOf(t);this.slides=this.slides.filter(e=>e!==t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",e)})}),this._removedSlides=[]):t>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(t,e)=>{this.zone.run(()=>{this.init.emit({event:t,slick:e})})}),this.$instance.slick(this.config),this.zone.run(()=>{var t;this.initialized=!0,this.currentIndex=(null===(t=this.config)||void 0===t?void 0:t.initialSlide)||0}),this.$instance.on("afterChange",(t,e,i)=>{this.zone.run(()=>{this.afterChange.emit({event:t,slick:e,currentSlide:i,first:0===i,last:e.$slides.length===i+e.options.slidesToScroll}),this.currentIndex=i})}),this.$instance.on("beforeChange",(t,e,i,n)=>{this.zone.run(()=>{this.beforeChange.emit({event:t,slick:e,currentSlide:i,nextSlide:n}),this.currentIndex=n})}),this.$instance.on("breakpoint",(t,e,i)=>{this.zone.run(()=>{this.breakpoint.emit({event:t,slick:e,breakpoint:i})})}),this.$instance.on("destroy",(t,e)=>{this.zone.run(()=>{this.destroy.emit({event:t,slick:e}),this.initialized=!1})})})}addSlide(t){this._addedSlides.push(t)}removeSlide(t){this._removedSlides.push(t)}slickGoTo(t){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",t)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(t){if(this.initialized){const e=t.config;if(e.previousValue!==e.currentValue&&void 0!==e.currentValue){const t=e.currentValue.refresh,i=Object.assign({},e.currentValue);delete i.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",i,t)})}}}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(d.l),d.Nb(d.z),d.Nb(d.B))},t.\u0275cmp=d.Hb({type:t,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[d.zb([{provide:p.j,useExisting:Object(d.V)(()=>t),multi:!0}]),d.yb],ngContentSelectors:g,decls:1,vars:0,template:function(t,e){1&t&&(d.lc(),d.kc(0))},encapsulation:2}),t})(),f=(()=>{class t{constructor(t,e,i){this.el=t,this.platformId=e,this.carousel=i}ngOnInit(){Object(n.z)(this.platformId)&&this.carousel.addSlide(this)}ngOnDestroy(){Object(n.z)(this.platformId)&&this.carousel.removeSlide(this)}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(d.l),d.Nb(d.B),d.Nb(m,1))},t.\u0275dir=d.Ib({type:t,selectors:[["","ngxSlickItem",""]]}),t})(),v=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})();var S=i("rIor");function A(t,e){1&t&&(d.Tb(0,"h3"),d.Ic(1,"All Advertisement"),d.Sb())}function T(t,e){1&t&&(d.Tb(0,"h3"),d.Ic(1,"Active Advertisement"),d.Sb())}function k(t,e){1&t&&(d.Tb(0,"h3"),d.Ic(1,"Deactivate Advertisement"),d.Sb())}function I(t,e){if(1&t&&d.Ob(0,"a",30),2&t){const t=d.fc().$implicit;d.nc("ngbTooltip",t.description)}}function w(t,e){if(1&t){const t=d.Ub();d.Tb(0,"button",31),d.dc("click",function(){d.zc(t);const e=d.fc().$implicit;return d.fc().updateStatus("true",e._id)}),d.Ic(1," Activate "),d.Sb()}if(2&t){const t=d.fc(2);d.mc("disabled","Super Admin"!==t.currentRole)}}function x(t,e){if(1&t){const t=d.Ub();d.Tb(0,"button",32),d.dc("click",function(){d.zc(t);const e=d.fc().$implicit;return d.fc().updateStatus("false",e._id)}),d.Ic(1," Deactivate "),d.Sb()}if(2&t){const t=d.fc(2);d.mc("disabled","Super Admin"!==t.currentRole)}}function O(t,e){if(1&t&&(d.Tb(0,"div",33),d.Tb(1,"strong"),d.Ic(2,"Last Action: "),d.Sb(),d.Tb(3,"small"),d.Ic(4),d.gc(5,"date"),d.gc(6,"date"),d.Sb(),d.Sb()),2&t){const t=d.fc().$implicit;d.Ab(4),d.Lc("",d.ic(5,2,t.actionDate,"mediumDate"),", ",d.ic(6,5,t.actionDate,"mediumTime"),"")}}const C=function(t,e){return{"text-success":t,"text-error":e}};function y(t,e){if(1&t){const t=d.Ub();d.Tb(0,"div",18),d.Tb(1,"div",19),d.Tb(2,"div",20),d.Tb(3,"h6"),d.Tb(4,"span",14),d.Ic(5),d.Sb(),d.Ic(6," \xa0 "),d.Gc(7,I,1,1,"a",21),d.Tb(8,"p",22),d.Tb(9,"small",14),d.Ic(10,"Status: "),d.Sb(),d.Tb(11,"small",23),d.Ic(12),d.Sb(),d.Sb(),d.Sb(),d.Ob(13,"img",24),d.Tb(14,"div",12),d.Tb(15,"div",2),d.Gc(16,w,2,1,"button",25),d.Gc(17,x,2,1,"button",26),d.Sb(),d.Tb(18,"div",27),d.Tb(19,"button",28),d.dc("click",function(){d.zc(t);const i=e.$implicit;return d.fc().deleteAdvert(i._id)}),d.Ic(20," Delete "),d.Sb(),d.Sb(),d.Gc(21,O,7,8,"div",29),d.Sb(),d.Sb(),d.Sb(),d.Sb()}if(2&t){const t=e.$implicit,i=d.fc();d.Ab(5),d.Jc(t.title?t.title:"Advertisement Title"),d.Ab(2),d.mc("ngIf",t.description),d.Ab(4),d.mc("ngClass",d.sc(10,C,t.status,!t.status)),d.Ab(1),d.Jc(t.status?"Activated":"Deactivated"),d.Ab(1),d.pc("src","",i.amazonUrl,"",t.image,"",d.Bc),d.Ab(3),d.mc("ngIf",0==t.status),d.Ab(1),d.mc("ngIf",1==t.status),d.Ab(2),d.mc("disabled","Super Admin"!==i.currentRole),d.Ab(2),d.mc("ngIf",t.actionDate)}}function z(t,e){if(1&t&&(d.Tb(0,"p",54),d.Ic(1),d.Sb()),2&t){const t=d.fc(2);d.Ab(1),d.Jc(t.message)}}function j(t,e){1&t&&(d.Tb(0,"p",55),d.Ic(1,"Use *HD Quality and 16:9 Ratio*"),d.Sb())}function _(t,e){1&t&&(d.Tb(0,"p",56),d.Ic(1,"Only JPG, GIF, PNG, and BMP images are supported."),d.Sb())}function $(t,e){if(1&t){const t=d.Ub();d.Tb(0,"div",34),d.Tb(1,"h3"),d.Ic(2,"Upload File"),d.Sb(),d.Tb(3,"a",35),d.dc("click",function(){return e.$implicit.close("Cancel Modal")}),d.Ob(4,"i",36),d.Sb(),d.Sb(),d.Tb(5,"div",37),d.Tb(6,"div",38),d.Tb(7,"image-cropper",39),d.dc("imageCropped",function(e){return d.zc(t),d.fc().imageCropped(e)})("imageLoaded",function(){return d.zc(t),d.fc().imageLoaded()}),d.Sb(),d.Tb(8,"input",40,41),d.dc("change",function(e){return d.zc(t),d.fc().fileChangeEvent(e)}),d.Sb(),d.Tb(10,"button",42),d.Ic(11,"Insert Image"),d.Sb(),d.Ob(12,"img",43),d.Sb(),d.Gc(13,z,2,1,"p",44),d.Gc(14,j,2,0,"p",45),d.Gc(15,_,2,0,"p",46),d.Tb(16,"form",47),d.Tb(17,"div",48),d.Ob(18,"input",49),d.Sb(),d.Tb(19,"div",48),d.Ob(20,"textarea",50),d.Sb(),d.Sb(),d.Sb(),d.Tb(21,"div",51),d.Tb(22,"div",52),d.Tb(23,"button",53),d.dc("click",function(){return d.zc(t),d.fc().submitForm()}),d.Ic(24,"Add Advertisement"),d.Sb(),d.Sb(),d.Sb()}if(2&t){const t=d.fc();d.Ab(7),d.Fc("display",t.showCropper?null:"none"),d.mc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",t.containWithinAspectRatio)("aspectRatio",16/9)("resizeToWidth",641)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",t.canvasRotation)("transform",t.transform)("alignImage","left"),d.Ab(5),d.nc("src",t.croppedImage,d.Bc),d.Ab(1),d.mc("ngIf",t.message),d.Ab(1),d.mc("ngIf",!t.croppedImage),d.Ab(1),d.mc("ngIf",!t.croppedImage),d.Ab(1),d.mc("formGroup",t.advertForm)}}let D=(()=>{class t{constructor(t,e,i,n,s){this.modalService=t,this.service=e,this.gs=i,this.store=n,this.fb=s,this.highlighted=!1,this.allAdvert=[],this.headStatus="all",this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={},this.amazonUrl=c.a,this.slideConfig={infinite:!0,speed:900,autoplay:!1,slidesToShow:3,slidesToScroll:2,prevArrow:'<button class="leftRs ft-chevron-left"></button>',nextArrow:'<button class="rightRs ft-chevron-right"></button>',responsive:[{breakpoint:1025,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:769,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:605,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},this.advertForm=this.fb.group({title:"",desc:""})}ngOnInit(){this.store.subscribe(t=>{void 0!==t.UserData.data&&(this.currentRole=t.UserData.data.role.title)},t=>{},()=>{this.subscription.unsubscribe()}),this.getAdvert(null,null,null)}getAdvert(t,e,i){this.service.getAdvertisement(t,e,i).subscribe(t=>{this.allAdvert=t})}deleteAdvert(t){Object(c.c)().then(e=>{e.value&&this.service.deleteAdvert(t).subscribe(()=>{this.getAdvert(null,null,null)})})}submitForm(){this.submitted=!0;let t=this.advertForm.getRawValue();null!=this.imageFile&&this.service.postAdvertisement(this.imageFile,t.title,t.desc).subscribe(t=>{this.modalService.dismissAll(),this.getAdvert(null,null,null)},t=>{this.modalService.dismissAll()})}updateStatus(t,e){this.service.changeStatus(t,e).subscribe(()=>{this.getAdvert(null,null,null)})}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}fileChangeEvent(t){if(this.tempFile=t.target.files[0],this.imageChangedEvent=t,!this.tempFile)return!1;null!=this.tempFile.type.match(/image\/*/)||(this.message="Only images are supported.")}imageCropped(t){this.height=t.height,this.width=t.width,this.croppedImage=t.base64,this.imageFile=Object(r.b)(this.croppedImage,this.tempFile.name)}imageLoaded(){this.showCropper=!0}getDate(t){let e=t.split("-")[0],i=t.split("-")[1];this.getAdvert(null,e,i)}}return t.\u0275fac=function(e){return new(e||t)(d.Nb(s.i),d.Nb(u),d.Nb(r.a),d.Nb(h.a),d.Nb(p.b))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-advertisement"]],features:[d.zb([s.c])],decls:37,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[4,"ngIf"],[1,"col-sm-6","d-flex","align-items-center","justify-content-end"],[1,"form-group","mb-0","mr-2"],["type","month","min","2020-01","max","2100-01",1,"form-control","perPage",3,"change"],[1,"btn","btn-orange","float-right",3,"click"],[1,"col-sm-12"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],[1,"row","py-2"],[1,"col-sm-12","text-right"],[1,"font-weight-500"],[1,"hoverTotal",3,"click"],[1,"text-orange"],["addAdvert",""],["ngxSlickItem","",1,"slide"],[1,"card"],[1,"card-body"],["class","ft-alert-circle",3,"ngbTooltip",4,"ngIf"],[1,"float-right"],[3,"ngClass"],["height","230px","width","300px","onerror","src='../../../assets/img/gallery/1.jpg'","alt","","width","100%",3,"src"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","btn btn-orange",3,"disabled","click",4,"ngIf"],[1,"col-sm-6","text-right"],[1,"btn","btn-danger",3,"disabled","click"],["class","col-sm-12 text-center mt-2",4,"ngIf"],[1,"ft-alert-circle",3,"ngbTooltip"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-orange",3,"disabled","click"],[1,"col-sm-12","text-center","mt-2"],[1,"modal-header","justify-content-center"],[3,"click"],[1,"ft-x","close-icon"],[1,"modal-body"],[1,"position-relative","text-center"],["format","*",1,"cropper",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded"],["type","file","accept","image/x-png,image/gif,image/jpeg","multiple","",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-warning text-center",4,"ngIf"],["class","text-error text-center",4,"ngIf"],[1,"mt-2",3,"formGroup"],[1,"form-group"],["type","text","formControlName","title","placeholder","Title",1,"form-control"],["name","","id","","cols","30","rows","5","formControlName","desc","placeholder","Description",1,"form-control"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-success",3,"click"],[1,"text-error","mb-0"],[1,"text-warning","text-center"],[1,"text-error","text-center"]],template:function(t,e){if(1&t){const t=d.Ub();d.Tb(0,"div",0),d.Tb(1,"div",1),d.Tb(2,"div",2),d.Gc(3,A,2,0,"h3",3),d.Gc(4,T,2,0,"h3",3),d.Gc(5,k,2,0,"h3",3),d.Sb(),d.Tb(6,"div",4),d.Tb(7,"div",5),d.Tb(8,"input",6),d.dc("change",function(t){return e.getDate(t.target.value)}),d.Sb(),d.Sb(),d.Tb(9,"button",7),d.dc("click",function(){d.zc(t);const i=d.wc(36);return e.open(i)}),d.Ic(10,"Add Advertisement"),d.Sb(),d.Sb(),d.Sb(),d.Tb(11,"div",1),d.Tb(12,"div",8),d.Tb(13,"ngx-slick-carousel",9,10),d.Gc(15,y,22,13,"div",11),d.Sb(),d.Sb(),d.Sb(),d.Tb(16,"div",12),d.Tb(17,"div",13),d.Tb(18,"span",14),d.Tb(19,"a",15),d.dc("click",function(){return e.headStatus="active",e.getAdvert(!0,null,null)}),d.Ic(20,"Total Actived Advertisements: "),d.Sb(),d.Sb(),d.Tb(21,"span",16),d.Ic(22),d.Sb(),d.Ic(23," \xa0 "),d.Tb(24,"span",14),d.Tb(25,"a",15),d.dc("click",function(){return e.headStatus="deactivate",e.getAdvert(!1,null,null)}),d.Ic(26,"Total Deactivated Advertisements: "),d.Sb(),d.Sb(),d.Tb(27,"span",16),d.Ic(28),d.Sb(),d.Ic(29," \xa0 "),d.Tb(30,"span",14),d.Tb(31,"a",15),d.dc("click",function(){return e.headStatus="all",e.getAdvert(null,null,null)}),d.Ic(32,"Total Advertisements: "),d.Sb(),d.Sb(),d.Tb(33,"span",16),d.Ic(34),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Gc(35,$,25,18,"ng-template",null,17,d.Hc)}2&t&&(d.Ab(3),d.mc("ngIf","all"==e.headStatus),d.Ab(1),d.mc("ngIf","active"==e.headStatus),d.Ab(1),d.mc("ngIf","deactivate"==e.headStatus),d.Ab(8),d.mc("config",e.slideConfig),d.Ab(2),d.mc("ngForOf",e.allAdvert.advertisements),d.Ab(7),d.Jc(e.allAdvert.totalActive),d.Ab(6),d.Jc(e.allAdvert.totalDeactive),d.Ab(6),d.Jc(e.allAdvert.total))},directives:[n.o,m,n.n,f,n.m,s.p,S.a,p.u,p.l,p.f,p.a,p.k,p.d],pipes:[n.f],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;bottom:0;opacity:0;z-index:1;cursor:pointer}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:scale-down;object-fit:scale-down;border-radius:15px}.ft-chevron-left[_ngcontent-%COMP%], .ft-chevron-right[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:orange;text-shadow:0 0 10px rgba(0,0,0,.9)}.hoverTotal[_ngcontent-%COMP%]:hover{color:#1a73e8!important;text-decoration:underline!important}.cropper[_ngcontent-%COMP%]{height:auto;width:200px;margin:0 auto}"]}),t})();var R=i("tyNb"),F=i("RLft");const G=[{path:"",component:D}];let P=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[n.c,s.j,v,p.q,R.g.forChild(G),S.b,h.b.forFeature("UserData",F.b)]]}),t})()}}]);