!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function i(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{U5Jw:function(e,a,n){"use strict";n.r(a),n.d(a,"CategoriesModule",function(){return Y});var c,r,o,l=n("ofXK"),s=n("mrSG"),b=n("3Pt+"),u=n("tk/3"),g=n("tkbi"),d=n("q2CC"),p=n("fXoL"),f=((o=function(){function e(i,a){t(this,e),this.http=i,this.gs=a,this._url=d.f,this.gs.token.subscribe(function(t){var e=t;r={headers:new u.c({Authorization:"bearer "+e})},c={headers:new u.c({"Content-Type":"application/x-www-form-urlencoded",Authorization:"bearer "+e})}})}return i(e,[{key:"createCat",value:function(t,e){var i=new FormData;return i.append("title",t),i.append("icon",e),this.http.post(this._url+"api/admin/category",i,r)}},{key:"getCat",value:function(t,e){return this.http.get(this._url+"api/admin/category?search="+t+"&pageNo="+e+"&perPage=10",r)}},{key:"getCatById",value:function(t){return this.http.get(this._url+"api/admin/category/"+t+"/en",r)}},{key:"addLabelToCat",value:function(t,e,i){var a=(new u.d).set("category",e).set("label",t).set("locale",i);return this.http.post(this._url+"api/admin/category/assignLabel",a.toString(),c)}},{key:"updateCat",value:function(t,e,i,a,n){var c=new FormData;return c.append("title",t),c.append("category",e),c.append("label_id",i),c.append("status",a),c.append("icon",n),this.http.put(this._url+"api/admin/category",c,r)}}]),e}()).\u0275fac=function(t){return new(t||o)(p.ac(u.a),p.ac(g.a))},o.\u0275prov=p.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=n("PSD3"),h=n.n(m),v=n("PBnp"),S=n("1kSV"),T=n("tyNb");function y(t,e){1&t&&(p.Tb(0,"div",25),p.Ob(1,"div",26),p.Sb())}function w(t,e){if(1&t&&(p.Tb(0,"td"),p.Ic(1),p.Sb()),2&t){var i=p.fc().$implicit;p.Ab(1),p.Jc(null==i.labels[1]?null:i.labels[1].label)}}function k(t,e){1&t&&(p.Tb(0,"td"),p.Ic(1,"-"),p.Sb())}function C(t,e){if(1&t){var i=p.Ub();p.Tb(0,"div"),p.Tb(1,"span"),p.Ic(2,"Active"),p.Sb(),p.Tb(3,"a",31),p.dc("click",function(){p.zc(i);var t=p.fc().$implicit;return p.fc().changeStatus(t._id,"false")}),p.Ob(4,"i",32),p.Sb(),p.Sb()}}function x(t,e){if(1&t){var i=p.Ub();p.Tb(0,"div"),p.Tb(1,"span"),p.Ic(2,"Deactivate"),p.Sb(),p.Tb(3,"a",31),p.dc("click",function(){p.zc(i);var t=p.fc().$implicit;return p.fc().changeStatus(t._id,"true")}),p.Ob(4,"i",33),p.Sb(),p.Sb()}}function I(t,e){if(1&t){var i=p.Ub();p.Tb(0,"tr"),p.Tb(1,"td"),p.Ic(2),p.Sb(),p.Tb(3,"td"),p.Tb(4,"a"),p.Tb(5,"img",27),p.dc("click",function(){p.zc(i);var t=e.$implicit,a=p.fc(),n=p.wc(47);return a.bigImage(n,t.icon)}),p.Sb(),p.Sb(),p.Sb(),p.Gc(6,w,2,1,"td",28),p.Gc(7,k,2,0,"td",28),p.Tb(8,"td"),p.Ic(9,"Hasnat Hameed"),p.Sb(),p.Tb(10,"td"),p.Gc(11,C,5,0,"div",28),p.Gc(12,x,5,0,"div",28),p.Sb(),p.Tb(13,"td"),p.Tb(14,"a",29),p.dc("click",function(){p.zc(i);var t=e.$implicit;return p.fc().categoryDetail(t._id)}),p.Ob(15,"img",30),p.Sb(),p.Sb(),p.Sb()}if(2&t){var a=e.$implicit,n=p.fc();p.Ab(2),p.Jc(null==a.labels[0]?null:a.labels[0].label),p.Ab(3),p.pc("src","",n.amazonImgUrl,"",a.icon,"",p.Bc),p.Ab(1),p.mc("ngIf",null==a.labels[1]?null:a.labels[1].label),p.Ab(1),p.mc("ngIf",!(null!=a.labels[1]&&a.labels[1].label)),p.Ab(4),p.mc("ngIf",1==a.status),p.Ab(1),p.mc("ngIf",0==a.status)}}var A=function(t){return{active:t}};function O(t,e){if(1&t){var i=p.Ub();p.Tb(0,"li",41),p.Tb(1,"a",42),p.dc("click",function(){p.zc(i);var t=e.$implicit,a=p.fc(2);return a.getCat(a.keyword,t)}),p.Ic(2),p.Sb(),p.Sb()}if(2&t){var a=e.$implicit,n=p.fc(2);p.mc("ngClass",p.rc(2,A,n.pager.currentPage===a)),p.Ab(2),p.Jc(a)}}var L=function(t){return{disabled:t}};function P(t,e){if(1&t){var i=p.Ub();p.Tb(0,"ul",34),p.Tb(1,"li",35),p.Tb(2,"a",36),p.dc("click",function(){p.zc(i);var t=p.fc();return t.getCat(t.keyword,1)}),p.Tb(3,"span"),p.Ic(4,"First"),p.Sb(),p.Sb(),p.Sb(),p.Tb(5,"li",35),p.Tb(6,"a",37),p.dc("click",function(){p.zc(i);var t=p.fc();return t.getCat(t.keyword,t.pager.currentPage-10)}),p.Tb(7,"span"),p.Ic(8,"\xab"),p.Sb(),p.Sb(),p.Sb(),p.Gc(9,O,3,4,"li",38),p.Tb(10,"li",35),p.Tb(11,"a",39),p.dc("click",function(){p.zc(i);var t=p.fc();return t.getCat(t.keyword,t.pager.currentPage+10)}),p.Tb(12,"span"),p.Ic(13,"\xbb"),p.Sb(),p.Sb(),p.Sb(),p.Tb(14,"li",35),p.Tb(15,"a",40),p.dc("click",function(){p.zc(i);var t=p.fc();return t.getCat(t.keyword,t.pager.totalPages)}),p.Tb(16,"span"),p.Ic(17,"Last"),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&t){var a=p.fc();p.Ab(1),p.mc("ngClass",p.rc(5,L,1===a.pager.currentPage)),p.Ab(4),p.mc("ngClass",p.rc(7,L,1===a.pager.currentPage)),p.Ab(4),p.mc("ngForOf",a.pager.pages),p.Ab(1),p.mc("ngClass",p.rc(9,L,a.pager.currentPage===a.pager.totalPages)),p.Ab(4),p.mc("ngClass",p.rc(11,L,a.pager.currentPage===a.pager.totalPages))}}function U(t,e){if(1&t&&(p.Tb(0,"p",60),p.Ic(1),p.Sb()),2&t){var i=p.fc(2);p.Ab(1),p.Jc(i.message)}}function _(t,e){1&t&&(p.Tb(0,"p",61),p.Ic(1," Image is required "),p.Sb())}function F(t,e){1&t&&(p.Tb(0,"p",61),p.Ic(1," Category title is required "),p.Sb())}function z(t,e){if(1&t){var i=p.Ub();p.Tb(0,"div",43),p.Tb(1,"h3",44),p.Ic(2,"Add New Category"),p.Sb(),p.Sb(),p.Tb(3,"div",45),p.Tb(4,"form",46),p.Tb(5,"div",47),p.Tb(6,"div",48),p.Tb(7,"input",49,50),p.dc("change",function(){p.zc(i);var t=p.wc(8);return p.fc().preview(t.files)}),p.Sb(),p.Tb(9,"button",51),p.Ic(10,"Add Image"),p.Sb(),p.Ob(11,"img",52),p.Gc(12,U,2,1,"p",53),p.Gc(13,_,2,0,"p",54),p.Sb(),p.Sb(),p.Tb(14,"div",55),p.Ob(15,"input",56),p.Gc(16,F,2,0,"p",54),p.Sb(),p.Sb(),p.Sb(),p.Tb(17,"div",57),p.Tb(18,"button",58),p.dc("click",function(){return e.$implicit.close("Cross click")}),p.Ic(19,"Cancel"),p.Sb(),p.Tb(20,"button",59),p.dc("click",function(){p.zc(i);var t=p.fc();return t.submitCat(t.addCategory)}),p.Ic(21,"Add Category"),p.Sb(),p.Sb()}if(2&t){var a=p.fc();p.Ab(4),p.mc("formGroup",a.addCategory),p.Ab(7),p.nc("src",a.imgURL,p.Bc),p.Ab(1),p.mc("ngIf",a.message),p.Ab(1),p.mc("ngIf",null==a.imgURL&&a.submitted),p.Ab(3),p.mc("ngIf",a.submitted&&a.addCategory.controls.catTitle.hasError("required"))}}function D(t,e){if(1&t&&(p.Tb(0,"div",62),p.Tb(1,"a",63),p.Tb(2,"span",64),p.dc("click",function(){return e.$implicit.close("Cancel Cick")}),p.Sb(),p.Sb(),p.Sb(),p.Tb(3,"div",65),p.Ob(4,"img",66),p.Sb()),2&t){var i=p.fc();p.Ab(4),p.nc("src",i.currentImage,p.Bc)}}var G,M=((G=function(){function e(i,a,n,c,r,o){t(this,e),this.pagerService=i,this.modalService=a,this.fb=n,this.catService=c,this.router=r,this.globalService=o,this.closeResult="",this.allCat=[],this.pager={},this.amazonImgUrl=d.a,this.addCategory=this.fb.group({catTitle:["",b.s.required]})}return i(e,[{key:"ngOnInit",value:function(){this.getCat("",1)}},{key:"open",value:function(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}},{key:"bigImage",value:function(t,e){this.currentImage="https://api.bellboy.co/"+e,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}},{key:"preview",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imageFile=t[0],0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(null==t[0].type.match(/image\/*/)){e.next=8;break}return e.next=5,function(t){return new Promise(function(e,i){var a=new FileReader;a.readAsDataURL(t[0]),a.onload=function(){return e(a.result)},a.onerror=function(t){return i(t)}})}(t).then(function(t){i.imgURL=t});case 5:this.globalService.compress(this.imgURL,t[0].name).then(function(t){var e=t[0];if(1==e.status)return i.imageFile=e.file,void(i.imgURL=e.con64)}),e.next=9;break;case 8:this.message="Only images are supported.";case 9:case"end":return e.stop()}},e,this)}))}},{key:"getCat",value:function(t,e){var i=this;this.spinner=!0,e>this.pager.totalPages?e=this.pager.totalPages:e<0&&(e=1),this.keyword=t,this.catService.getCat(t,e).subscribe(function(t){200==t.code&&(i.totalitems=t.data.count,i.allCat=t.data.categories,i.spinner=!1,i.pager=i.pagerService.getPager(t.data.count,1))},function(t){i.spinner=!1})}},{key:"categoryDetail",value:function(t){this.router.navigate(["/categories/categorydetail",t])}},{key:"changeStatus",value:function(t,e){var i=this;this.catService.updateCat("",t,"",e,"").subscribe(function(t){1==t.success?(h.a.fire({icon:"success",text:"Updated",width:"300px",timer:2500,showCancelButton:!1,showConfirmButton:!1}),i.getCat("",1)):i.showError(t.message)},function(t){i.showError(t.error.message)})}},{key:"submitCat",value:function(t){var e=this;this.submitted=!0,1==t.valid&&void 0!==this.imageFile&&(this.catService.createCat(t.value.catTitle,this.imageFile).subscribe(function(t){200==t.code?(e.getCat("",1),e.imageFile=void 0,e.imgURL=void 0,e.submitted=!1,h.a.fire({icon:"success",title:"Category Added successfully",width:"400px",timer:2500,showConfirmButton:!1})):e.showError(t.message)},function(t){e.imageFile=void 0,e.imgURL=void 0,e.showError(t.error.message)}),this.submitted=!1,t.reset(),this.modalService.dismissAll())}},{key:"showError",value:function(t){h.a.fire({icon:"error",title:t,width:"400px",timer:2500,showConfirmButton:!1})}}]),e}()).\u0275fac=function(t){return new(t||G)(p.Nb(v.a),p.Nb(S.i),p.Nb(b.b),p.Nb(f),p.Nb(T.c),p.Nb(g.a))},G.\u0275cmp=p.Hb({type:G,selectors:[["app-categories"]],decls:48,vars:5,consts:[["id","tabs"],["class","loading-container",4,"ngIf"],[1,"row","text-left","mb-2","mt-2"],[1,"col-sm-6","mb-1"],[1,"col-sm-6","text-right"],[1,"btn","btn-orange","mb-0",3,"click"],[1,"col-sm-12"],[1,"parent"],[1,"ft-search","child"],["type","text","id","SearchBellboy","name","search","placeholder","Search Category",1,"form-control","placeholder-pad","w-33",3,"ngModel","ngModelChange"],[1,"row","text-left"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-content"],[1,"card-body"],[1,"table","table-responsive-md","table-striped"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end"],[1,"mr-3","d-flex","align-items-center"],[1,"h6","mb-0","font-weight-normal","text-shadow","text-orange"],[1,"text-secondary","ml-2"],[1,"ng2-smart-pagination-nav","ng-star-inserted"],["class","ng2-smart-pagination pagination",4,"ngIf"],["addCat",""],["bigImg",""],[1,"loading-container"],[1,"spinner"],["alt","img",1,"table-img-size",3,"src","click"],[4,"ngIf"],[1,"p-0","text-dark",3,"click"],["src","../../../assets/img/ico/eye.png","alt","",1,"img-eye"],[3,"click"],["placement","top","ngbTooltip","Deactivate Category",1,"text-danger","ft-power"],["placement","top","ngbTooltip","Activate Category",1,"text-success","ft-power"],[1,"ng2-smart-pagination","pagination"],[1,"ng2-smart-page-item","page-item",3,"ngClass"],["aria-label","First",1,"ng2-smart-page-link","page-link",3,"click"],["aria-label","Prev","ngbTooltip","Previous",1,"ng2-smart-page-link","page-link","page-link-prev",3,"click"],["class","ng2-smart-page-item page-item ng-star-inserted",3,"ngClass",4,"ngFor","ngForOf"],["ngbTooltip","Next","aria-label","Next",1,"ng2-smart-page-link","page-link","page-link-next",3,"click"],["aria-label","Last",1,"ng2-smart-page-link","page-link",3,"click"],[1,"ng2-smart-page-item","page-item","ng-star-inserted",3,"ngClass"],[1,"ng2-smart-page-link","page-link","ng-star-inserted",3,"click"],[1,"modal-header","justify-content-center","mb-1"],[1,"card-title","mb-0"],[1,"modal-body","pb-0"],[3,"formGroup"],[1,"form-group","text-center"],[1,"position-relative"],["type","file","accept","image/*","type","file",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"form-group"],["type","text","formControlName","catTitle","placeholder","Category Name",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-orange",3,"click"],[1,"text-error","mb-0"],[1,"text-error"],[1,"modal-header","d-flex","justify-content-end","pb-0","mb-2"],[1,"mb-2"],[1,"ft-x","text-error",3,"click"],[1,"modal-body","d-flex","justify-content-center","pt-0"],["onerror","src='../../../../assets/img/gallery/1.jpg'",1,"object-fit",3,"src"]],template:function(t,e){if(1&t){var i=p.Ub();p.Tb(0,"section",0),p.Gc(1,y,2,0,"div",1),p.Tb(2,"div",2),p.Tb(3,"div",3),p.Tb(4,"h3"),p.Ic(5,"Categories"),p.Sb(),p.Sb(),p.Tb(6,"div",4),p.Tb(7,"button",5),p.dc("click",function(){p.zc(i);var t=p.wc(45);return e.open(t)}),p.Ic(8,"Add New Category"),p.Sb(),p.Sb(),p.Tb(9,"div",6),p.Tb(10,"div",7),p.Ob(11,"i",8),p.Tb(12,"input",9),p.dc("ngModelChange",function(t){return e.search=t})("ngModelChange",function(){return e.getCat(e.search,1)}),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(13,"div",10),p.Tb(14,"div",11),p.Tb(15,"div",12),p.Tb(16,"div",13),p.Tb(17,"div",14),p.Tb(18,"table",15),p.Tb(19,"thead"),p.Tb(20,"tr"),p.Tb(21,"th"),p.Ic(22,"Title"),p.Sb(),p.Tb(23,"th"),p.Ic(24,"Image"),p.Sb(),p.Tb(25,"th"),p.Ic(26,"Locale"),p.Sb(),p.Tb(27,"th"),p.Ic(28,"Created By"),p.Sb(),p.Tb(29,"th"),p.Ic(30,"Status"),p.Sb(),p.Tb(31,"th"),p.Ic(32,"View / Update"),p.Sb(),p.Sb(),p.Sb(),p.Tb(33,"tbody"),p.Gc(34,I,16,7,"tr",16),p.Sb(),p.Sb(),p.Tb(35,"div",17),p.Tb(36,"p",18),p.Tb(37,"span",19),p.Ic(38,"Total Items"),p.Sb(),p.Ic(39," : "),p.Tb(40,"span",20),p.Ic(41),p.Sb(),p.Sb(),p.Tb(42,"nav",21),p.Gc(43,P,18,13,"ul",22),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Gc(44,z,22,5,"ng-template",null,23,p.Hc),p.Gc(46,D,5,1,"ng-template",null,24,p.Hc)}2&t&&(p.Ab(1),p.mc("ngIf",e.spinner),p.Ab(11),p.mc("ngModel",e.search),p.Ab(22),p.mc("ngForOf",e.allCat),p.Ab(7),p.Jc(e.totalitems),p.Ab(2),p.mc("ngIf",e.pager.pages&&e.pager.pages.length))},directives:[l.o,b.a,b.k,b.n,l.n,S.p,l.m,b.u,b.l,b.f,b.d],styles:["ul.nav-pills[_ngcontent-%COMP%]{padding-left:1rem}.parent[_ngcontent-%COMP%]{position:relative}.child[_ngcontent-%COMP%]{position:absolute;padding:8px 11px}#SearchBellboy[_ngcontent-%COMP%]::-moz-placeholder{color:#ccc;margin-left:10px}#SearchBellboy[_ngcontent-%COMP%]:-ms-input-placeholder{color:#ccc;margin-left:10px}#SearchBellboy[_ngcontent-%COMP%]::placeholder{color:#ccc;margin-left:10px}.upload-input[_ngcontent-%COMP%]{position:absolute;bottom:0;opacity:0;z-index:1;cursor:pointer}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:scale-down;object-fit:scale-down;border-radius:15px}.modal-footer[_ngcontent-%COMP%]{padding-top:0}.compress-image[_ngcontent-%COMP%]{position:absolute;bottom:0;margin-left:30px}.h-300[_ngcontent-%COMP%]{height:300px!important;width:300px!important}.ft-power[_ngcontent-%COMP%]{margin-left:10px;font-weight:700;font-size:15px}"]}),G),B=n("X9o6");function N(t,e){1&t&&(p.Tb(0,"span",26),p.Ic(1,"Deactive"),p.Sb())}function R(t,e){1&t&&(p.Tb(0,"span",26),p.Ic(1,"Active"),p.Sb())}function j(t,e){if(1&t){var i=p.Ub();p.Tb(0,"i",27),p.dc("click",function(){return p.zc(i),p.fc().changeStatus("true")}),p.Sb()}}function E(t,e){if(1&t){var i=p.Ub();p.Tb(0,"i",28),p.dc("click",function(){return p.zc(i),p.fc().changeStatus("false")}),p.Sb()}}function J(t,e){if(1&t){var i=p.Ub();p.Tb(0,"div",29),p.Tb(1,"div",30),p.Tb(2,"h5",31),p.Ic(3),p.Sb(),p.Sb(),p.Tb(4,"div",32),p.Tb(5,"div",33),p.Ob(6,"input",34),p.Sb(),p.Sb(),p.Tb(7,"div",35),p.Tb(8,"a"),p.Tb(9,"button",36),p.dc("click",function(){p.zc(i);var t=e.$implicit;return p.fc().updateLabel(t._id,t)}),p.Ic(10,"Update Label"),p.Sb(),p.Sb(),p.Sb(),p.Sb()}if(2&t){var a=e.$implicit;p.Ab(3),p.Jc(null==a||null==a.locale?null:a.locale.title),p.Ab(3),p.nc("id",a._id),p.nc("value",null==a?null:a.label)}}function q(t,e){if(1&t&&(p.Tb(0,"option",49),p.Ic(1),p.Sb()),2&t){var i=e.$implicit;p.pc("value","",i.code,"/",i._id,""),p.Ab(1),p.Kc(" ",i.title," ")}}function H(t,e){1&t&&(p.Tb(0,"div",41),p.Ob(1,"input",50),p.Sb())}function K(t,e){1&t&&(p.Tb(0,"div",41),p.Ob(1,"input",51),p.Sb())}function X(t,e){if(1&t){var i=p.Ub();p.Tb(0,"div",37),p.Tb(1,"h3",38),p.Ic(2,"Add Label"),p.Sb(),p.Sb(),p.Tb(3,"div",39),p.Tb(4,"form",40),p.Tb(5,"div",41),p.Tb(6,"select",42),p.dc("change",function(t){return p.zc(i),p.fc().changeLocal(t)}),p.Tb(7,"option",43),p.Ic(8,"Select Language"),p.Sb(),p.Gc(9,q,2,3,"option",44),p.Sb(),p.Sb(),p.Gc(10,H,2,0,"div",45),p.Gc(11,K,2,0,"div",45),p.Sb(),p.Sb(),p.Tb(12,"div",46),p.Tb(13,"button",47),p.dc("click",function(){return e.$implicit.close("Cross click")}),p.Ic(14,"Cancel"),p.Sb(),p.Tb(15,"button",48),p.dc("click",function(){p.zc(i);var t=p.fc();return t.submitLabel(t.labelForm)}),p.Ic(16,"Add Label"),p.Sb(),p.Sb()}if(2&t){var a=p.fc();p.Ab(4),p.mc("formGroup",a.labelForm),p.Ab(5),p.mc("ngForOf",a.locals),p.Ab(1),p.mc("ngIf","ur"==a.code||"ar"==a.code),p.Ab(1),p.mc("ngIf","en"==a.code)}}var V,Q,W=[{path:"",component:M},{path:"categorydetail/:id",component:(V=function(){function e(i,a,n,c,r,o,l){t(this,e),this.modalService=i,this.router=a,this.route=n,this.categoryService=c,this.fb=r,this.gs=o,this.imageCompressor=l,this.closeResult="",this.catDetail=[],this.locals=[],this.labelForm=this.fb.group({label:["",b.s.required]})}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe(function(e){t.id=e.id,t.categoryService.getCatById(t.id).subscribe(function(e){200==e.code&&(t.catDetail=e.data,t.imgURL="https://api.bellboy.co/"+t.catDetail.icon,t.locale=t.catDetail.labels[1].label)})}),this.gs.getLocals().subscribe(function(e){t.locals=e.data.data})}},{key:"changeLocal",value:function(t){this.singleLocal=t.target.value.split("/"),this.code=this.singleLocal[0],this.localId=this.singleLocal[1]}},{key:"preview",value:function(t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imageFile=t[0],0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(null==t[0].type.match(/image\/*/)){e.next=8;break}return e.next=5,function(t){return new Promise(function(e,i){var a=new FileReader;a.readAsDataURL(t[0]),a.onload=function(){return e(a.result)},a.onerror=function(t){return i(t)}})}(t).then(function(t){i.imgURL=t});case 5:this.gs.compress(this.imgURL,t[0].name).then(function(t){var e=t[0];if(1==e.status)return i.imageFile=e.file,void(i.imgURL=e.con64)}),e.next=9;break;case 8:this.message="Only images are supported.";case 9:case"end":return e.stop()}},e,this)}))}},{key:"open",value:function(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}},{key:"submitLabel",value:function(t){var e=this;this.categoryService.addLabelToCat(t.value.label,this.catDetail._id,this.localId).subscribe(function(t){200==t.code?(e.modalService.dismissAll(),h.a.fire({icon:"success",title:"Label successfully added.",width:"400px",timer:2500,showConfirmButton:!1})):500==t.code&&h.a.fire({icon:"error",title:t.message,width:"400px",timer:2500,showConfirmButton:!1})})}},{key:"changeStatus",value:function(t){var e=this;this.subsciption=this.categoryService.updateCat("",this.catDetail._id,"",t,"").subscribe(function(t){1==t.success?e.catDetail=t.data.category:e.showError(t.message)},function(t){e.showError(t.error.message)})}},{key:"updateLabel",value:function(t,e){var i=this,a=$("#"+t).val();if(e.label==a)return!1;this.categoryService.updateCat(a,this.id,t,"","").subscribe(function(t){1==t.success?(i.catDetail=t.data.category,i.showSuccess("Updated")):i.showError(t.message)},function(t){i.showError(t.error.message)})}},{key:"updateImage",value:function(){var t=this;this.categoryService.updateCat("",this.id,"","",this.imageFile).subscribe(function(e){1==e.success?(t.catDetail=e.data.category,t.showSuccess("Updated")):t.showError(e.message)},function(e){t.showError(e.error.message)})}},{key:"showError",value:function(t){h.a.fire({icon:"error",text:t,width:"300px",showConfirmButton:!1,showCancelButton:!1,timer:2500})}},{key:"showSuccess",value:function(t){h.a.fire({icon:"success",text:t,width:"300px",timer:2500,showConfirmButton:!1})}}]),e}(),V.\u0275fac=function(t){return new(t||V)(p.Nb(S.i),p.Nb(T.c),p.Nb(T.a),p.Nb(f),p.Nb(b.b),p.Nb(g.a),p.Nb(B.a))},V.\u0275cmp=p.Hb({type:V,selectors:[["app-category-detail"]],decls:43,vars:6,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-content"],[1,"card-body"],[1,"col-sm-6"],[1,"col-sm-6","text-right"],[1,"font-weight-bold"],["class","font-weight-light text-secondary",4,"ngIf"],[1,"ml-2"],["placement","top","ngbTooltip","Activate Category","class","ft-power text-success",3,"click",4,"ngIf"],["placement","top","ngbTooltip","Deactivate Category","class","ft-power text-error",3,"click",4,"ngIf"],[1,"col-sm-6","mb-3"],[1,"font-weight-bold","text-center"],["class","row align-items-center",4,"ngFor","ngForOf"],[1,"col-sm-4","d-flex","justify-content-end","align-items-center","position-relative"],["onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"position-absolute","image-style",3,"src"],["type","file","accept","image/*",1,"change-input",3,"change"],["file",""],[1,"change-button"],[1,"col-sm-2","text-right","d-flex","position-relative","justify-content-end"],[1,"text-orange",3,"click"],[1,"ft-plus","text-dark"],[1,"ml-1"],[1,"btn","btn-orange","bottom-place",3,"click"],["addLabel",""],[1,"font-weight-light","text-secondary"],["placement","top","ngbTooltip","Activate Category",1,"ft-power","text-success",3,"click"],["placement","top","ngbTooltip","Deactivate Category",1,"ft-power","text-error",3,"click"],[1,"row","align-items-center"],[1,"col-12"],[1,"font-weight-normal"],[1,"col-8"],[1,"form-group","mt-3"],["type","text","placeholder","Category Name",1,"form-control",3,"id","value"],[1,"col-4","text-left"],[1,"btn","btn-orange",3,"click"],[1,"modal-header","justify-content-center"],[1,"card-title","mb-0"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],[1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[3,"value"],["type","text","formControlName","label","placeholder","\u0644\u06cc\u0628\u0644",1,"form-control","text-right"],["type","text","formControlName","label","placeholder","Label",1,"form-control"]],template:function(t,e){if(1&t){var i=p.Ub();p.Tb(0,"section"),p.Tb(1,"div",0),p.Tb(2,"div",1),p.Tb(3,"div",2),p.Tb(4,"div",3),p.Tb(5,"div",4),p.Tb(6,"div",0),p.Tb(7,"div",5),p.Tb(8,"h3"),p.Ic(9,"Category Detail"),p.Sb(),p.Sb(),p.Tb(10,"div",6),p.Tb(11,"span",7),p.Ic(12,"Status: "),p.Sb(),p.Gc(13,N,2,0,"span",8),p.Gc(14,R,2,0,"span",8),p.Tb(15,"a",9),p.Gc(16,j,1,0,"i",10),p.Gc(17,E,1,0,"i",11),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Tb(18,"div",0),p.Tb(19,"div",1),p.Tb(20,"div",2),p.Tb(21,"div",3),p.Tb(22,"div",4),p.Tb(23,"div",0),p.Tb(24,"div",12),p.Tb(25,"h5",13),p.Ic(26,"Category Title"),p.Sb(),p.Gc(27,J,11,3,"div",14),p.Sb(),p.Tb(28,"div",15),p.Ob(29,"img",16),p.Tb(30,"input",17,18),p.dc("change",function(){p.zc(i);var t=p.wc(31);return e.preview(t.files)}),p.Sb(),p.Tb(32,"button",19),p.Ic(33,"Change"),p.Sb(),p.Sb(),p.Tb(34,"div",20),p.Tb(35,"a",21),p.dc("click",function(){p.zc(i);var t=p.wc(42);return e.open(t)}),p.Ob(36,"span",22),p.Tb(37,"span",23),p.Ic(38," Add Label "),p.Sb(),p.Sb(),p.Tb(39,"button",24),p.dc("click",function(){return e.updateImage()}),p.Ic(40,"Update Image"),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Sb(),p.Gc(41,X,17,4,"ng-template",null,25,p.Hc)}2&t&&(p.Ab(13),p.mc("ngIf",0==e.catDetail.status),p.Ab(1),p.mc("ngIf",1==e.catDetail.status),p.Ab(2),p.mc("ngIf",0==e.catDetail.status),p.Ab(1),p.mc("ngIf",1==e.catDetail.status),p.Ab(10),p.mc("ngForOf",e.catDetail.labels),p.Ab(2),p.nc("src",e.imgURL,p.Bc))},directives:[l.o,l.n,S.p,b.u,b.l,b.f,b.o,b.t,b.a,b.k,b.d],styles:[".image-style[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:15px;-o-object-fit:contain!important;object-fit:contain}.change-button[_ngcontent-%COMP%]{position:absolute;border:unset;background:rgba(0,0,0,.3);width:150px;bottom:35px;color:#fff;border-radius:0 0 15px 15px}.change-button[_ngcontent-%COMP%]:focus{outline:none!important}.bottom-place[_ngcontent-%COMP%]{position:absolute;bottom:35px;left:0;right:0}.btn[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content}.change-input[_ngcontent-%COMP%]{width:300px;position:absolute;bottom:35px;opacity:0;z-index:1;cursor:pointer}"]}),V),resolve:{data:n("Os+u").a},data:{text:"Category Detail",path:"/categorydetail/:id",nav:!0,breadcrumbs:!0}}],Y=((Q=function e(){t(this,e)}).\u0275mod=p.Lb({type:Q}),Q.\u0275inj=p.Kb({factory:function(t){return new(t||Q)},imports:[[l.c,T.g.forChild(W),b.g,b.q,S.j]]}),Q)}}])}();