(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"68rm":function(t,e,i){"use strict";i.r(e),i.d(e,"AdvertisementModule",function(){return G});var s=i("ofXK"),r=i("mrSG"),o=i("1kSV"),n=i("q2CC"),a=i("tkbi"),c=i("lJxs"),h=i("vkgz"),p=i("XNiG"),l=i("fXoL"),d=i("tk/3");let g=(()=>{class t{constructor(t){this.http=t,this._url=n.g,this.onError=new p.a,this.allAdvert=new p.a}postAdvertisement(t){let e=new FormData;return e.append("image",t),this.http.post(this._url+"api/admin/advertisement",e).pipe(Object(c.a)(t=>{1==t.success?Object(n.f)("success","Added Successfully"):Object(n.f)("warning",t.message)},t=>{Object(n.f)("error",t.error.message)}))}getAdvertisement(t,e,i){return this.http.get(this._url+"api/admin/advertisement"+(t=null!=t?"?status="+t:"")+(i=null!==e&&null!==i?"?year="+e+"&month="+i:"")).pipe(Object(c.a)(t=>t.data))}changeStatus(t,e){let i=new FormData;return i.append("status",t),i.append("_id",e),this.http.put(this._url+"api/admin/advertisement",i).pipe(Object(c.a)(t=>{1==t.success?Object(n.f)("success","Updated Successfully"):Object(n.f)("warning",t.message)},t=>{Object(n.f)("error",t.error.message)}))}deleteAdvert(t){return this.http.delete(n.g+"api/admin/advertisement/"+t).pipe(Object(h.a)(t=>{1==t.success?Object(n.f)("success","Successfully Deleted"):Object(n.f)("warning","Someting went Wrong")},t=>Object(n.f)("error","Someting went Wrong")))}}return t.\u0275fac=function(e){return new(e||t)(l.ac(d.b))},t.\u0275prov=l.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=i("l7P3"),u=i("3Pt+");const f=["*"];let b=(()=>{class t{constructor(t,e,i){this.el=t,this.zone=e,this.platformId=i,this.afterChange=new l.n,this.beforeChange=new l.n,this.breakpoint=new l.n,this.destroy=new l.n,this.init=new l.n,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if(!Object(s.A)(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){const t=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===t?this.unslick():(this._addedSlides.forEach(t=>{this.slides.push(t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",t.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(t=>{const e=this.slides.indexOf(t);this.slides=this.slides.filter(e=>e!==t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",e)})}),this._removedSlides=[]):t>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(t,e)=>{this.zone.run(()=>{this.init.emit({event:t,slick:e})})}),this.$instance.slick(this.config),this.zone.run(()=>{var t;this.initialized=!0,this.currentIndex=(null===(t=this.config)||void 0===t?void 0:t.initialSlide)||0}),this.$instance.on("afterChange",(t,e,i)=>{this.zone.run(()=>{this.afterChange.emit({event:t,slick:e,currentSlide:i,first:0===i,last:e.$slides.length===i+e.options.slidesToScroll}),this.currentIndex=i})}),this.$instance.on("beforeChange",(t,e,i,s)=>{this.zone.run(()=>{this.beforeChange.emit({event:t,slick:e,currentSlide:i,nextSlide:s}),this.currentIndex=s})}),this.$instance.on("breakpoint",(t,e,i)=>{this.zone.run(()=>{this.breakpoint.emit({event:t,slick:e,breakpoint:i})})}),this.$instance.on("destroy",(t,e)=>{this.zone.run(()=>{this.destroy.emit({event:t,slick:e}),this.initialized=!1})})})}addSlide(t){this._addedSlides.push(t)}removeSlide(t){this._removedSlides.push(t)}slickGoTo(t){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",t)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(t){if(this.initialized){const e=t.config;if(e.previousValue!==e.currentValue&&void 0!==e.currentValue){const t=e.currentValue.refresh,i=Object.assign({},e.currentValue);delete i.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",i,t)})}}}}return t.\u0275fac=function(e){return new(e||t)(l.Nb(l.l),l.Nb(l.z),l.Nb(l.B))},t.\u0275cmp=l.Hb({type:t,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[l.zb([{provide:u.j,useExisting:Object(l.V)(()=>t),multi:!0}]),l.yb],ngContentSelectors:f,decls:1,vars:0,template:function(t,e){1&t&&(l.lc(),l.kc(0))},encapsulation:2}),t})(),S=(()=>{class t{constructor(t,e,i){this.el=t,this.platformId=e,this.carousel=i}ngOnInit(){Object(s.z)(this.platformId)&&this.carousel.addSlide(this)}ngOnDestroy(){Object(s.z)(this.platformId)&&this.carousel.removeSlide(this)}}return t.\u0275fac=function(e){return new(e||t)(l.Nb(l.l),l.Nb(l.B),l.Nb(b,1))},t.\u0275dir=l.Ib({type:t,selectors:[["","ngxSlickItem",""]]}),t})(),v=(()=>{class t{}return t.\u0275mod=l.Lb({type:t}),t.\u0275inj=l.Kb({factory:function(e){return new(e||t)},imports:[[s.c]]}),t})();var A=i("jhN1");const x=["wrapper"],y=["sourceImage"];function M(t,e){if(1&t){const t=l.Ub();l.Tb(0,"img",4,5),l.dc("load",function(){return l.zc(t),l.fc().imageLoadedInView()}),l.Sb()}if(2&t){const t=l.fc();l.Fc("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),l.mc("src",t.safeImgDataUrl,l.Bc)}}function z(t,e){if(1&t){const t=l.Ub();l.Rb(0),l.Tb(1,"span",9),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"topleft")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"topleft")}),l.Ob(2,"span",10),l.Sb(),l.Tb(3,"span",11),l.Ob(4,"span",10),l.Sb(),l.Tb(5,"span",12),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"topright")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"topright")}),l.Ob(6,"span",10),l.Sb(),l.Tb(7,"span",13),l.Ob(8,"span",10),l.Sb(),l.Tb(9,"span",14),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")}),l.Ob(10,"span",10),l.Sb(),l.Tb(11,"span",15),l.Ob(12,"span",10),l.Sb(),l.Tb(13,"span",16),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")}),l.Ob(14,"span",10),l.Sb(),l.Tb(15,"span",17),l.Ob(16,"span",10),l.Sb(),l.Tb(17,"span",18),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"top")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"top")}),l.Sb(),l.Tb(18,"span",19),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"right")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"right")}),l.Sb(),l.Tb(19,"span",20),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottom")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottom")}),l.Sb(),l.Tb(20,"span",21),l.dc("mousedown",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"left")})("touchstart",function(e){l.zc(t);const i=l.fc(2);return i.startMove(e,i.moveTypes.Resize,"left")}),l.Sb(),l.Qb()}}function w(t,e){if(1&t){const t=l.Ub();l.Tb(0,"div",6),l.dc("keydown",function(e){return l.zc(t),l.fc().keyboardAccess(e)}),l.Tb(1,"div",7),l.dc("mousedown",function(e){l.zc(t);const i=l.fc();return i.startMove(e,i.moveTypes.Move)})("touchstart",function(e){l.zc(t);const i=l.fc();return i.startMove(e,i.moveTypes.Move)}),l.Sb(),l.Gc(2,z,21,0,"ng-container",8),l.Sb()}if(2&t){const t=l.fc();l.Fc("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),l.Fb("rounded",t.roundCropper),l.Ab(2),l.mc("ngIf",!t.hideResizeSquares)}}const C={Move:"move",Resize:"resize",Pinch:"pinch"};let I=(()=>{class t{constructor(t,e){this.sanitizer=t,this.cd=e,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.autoRotateSupported=new Promise(t=>{const e=new Image;e.onload=()=>{t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}),this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.moveTypes=C,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new l.n,this.startCropImage=new l.n,this.imageLoaded=new l.n,this.cropperReady=new l.n,this.loadImageFailed=new l.n,this.initCropper()}ngOnChanges(t){this.cropperStaticHeight&&this.cropperStaticWidth&&(this.hideResizeSquares=!0,this.cropperMinWidth=this.cropperStaticWidth,this.cropperMinHeight=this.cropperStaticHeight,this.maintainAspectRatio=!1),this.onChangesInputImage(t),this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.initCropper(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.stepSize=this.initialStepSize,this.activatePinchGesture()}initCropper(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImage(t,e){this.isValidImageType(e)?this.loadBase64Image(t):this.loadImageFailed.emit()}loadImageFile(t){const e=new FileReader;e.onload=e=>this.loadImage(e.target.result,t.type),e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}loadBase64Image(t){this.autoRotateSupported.then(e=>this.checkExifAndLoadBase64Image(t,e)).then(()=>this.transformOriginalImage()).catch(t=>{this.loadImageFailed.emit(),this.originalImage=null,this.originalBase64=null,console.error(t)})}checkExifAndLoadBase64Image(t,e){return new Promise((i,s)=>{this.originalImage=new Image,this.originalImage.onload=()=>{this.originalBase64=t,this.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=e.charCodeAt(r);return s.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const i=e.byteLength;let s=2;for(;s<i;){if(e.getUint16(s+2,!1)<=8)return-1;const t=e.getUint16(s,!1);if(s+=2,65505==t){if(1165519206!=e.getUint32(s+=2,!1))return-1;const t=18761==e.getUint16(s+=6,!1);s+=e.getUint32(s+4,t);const i=e.getUint16(s,t);s+=2;for(let r=0;r<i;r++)if(274==e.getUint16(s+12*r,t))return e.getUint16(s+12*r+8,t)}else{if(65280!=(65280&t))break;s+=e.getUint16(s,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(e?-1:t),this.originalSize.width=this.originalImage.naturalWidth,this.originalSize.height=this.originalImage.naturalHeight,i()},this.originalImage.onerror=s,this.originalImage.src=t})}loadImageFromURL(t){const e=new Image;e.onerror=()=>this.loadImageFailed.emit(),e.onload=()=>{const t=document.createElement("canvas"),i=t.getContext("2d");t.width=e.width,t.height=e.height,i.drawImage(e,0,0),this.loadBase64Image(t.toDataURL())},e.crossOrigin="anonymous",e.src=t}transformOriginalImage(){if(!this.originalImage||!this.originalImage.complete||!this.exifTransform)return Promise.reject(new Error("No image loaded"));const t=this.transformImageBase64();return this.setTransformedImage(t)}transformImageBase64(){const t=this.canvasRotation+this.exifTransform.rotate;if(0===t&&!this.exifTransform.flip&&!this.containWithinAspectRatio)return this.originalBase64;const e=this.getTransformedSize(),i=document.createElement("canvas");i.width=e.width,i.height=e.height;const s=i.getContext("2d");return s.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),s.rotate(Math.PI*(t/2)),s.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),i.toDataURL()}getTransformedSize(){const t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){const t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}{const t=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,t)}}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}setTransformedImage(t){return new Promise(e=>{this.transformedBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.transformedImage=new Image,this.transformedImage.onload=()=>{this.transformedSize.width=this.transformedImage.naturalWidth,this.transformedSize.height=this.transformedImage.naturalHeight,this.cd.markForCheck(),e()},this.transformedImage.src=this.transformedBase64})}imageLoadedInView(){null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else Object(l.W)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.cropperStaticHeight&&this.cropperStaticWidth)this.cropper.x1=0,this.cropper.x2=t.offsetWidth>this.cropperStaticWidth?this.cropperStaticWidth:t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight>this.cropperStaticHeight?this.cropperStaticHeight:t.offsetHeight;else if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?C.Resize:C.Move,i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),s=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(s),this.moveStop()}getPositionForKey(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}getInvertedPositionForKey(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}getEventForKey(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}startMove(t,e,i=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===C.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper))}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:C.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===C.Move?(this.move(t),this.checkCropperPosition(!0)):this.moveStart.type===C.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===C.Pinch&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"center":const s=t.scale,r=Math.abs(this.moveStart.x2-this.moveStart.x1)*s,o=Math.abs(this.moveStart.y2-this.moveStart.y1)*s,n=this.cropper.x1,a=this.cropper.y1;this.cropper.x1=Math.min(this.moveStart.clientX-r/2,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.clientY-o/2,this.cropper.y2-this.cropperScaledMinHeight),this.cropper.x2=Math.max(this.moveStart.clientX+r/2,n+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.clientY+o/2,a+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"center":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio;const i=Math.max(0-this.cropper.x1,0),s=Math.max(this.cropper.x2-this.maxSize.width,0),r=Math.max(this.cropper.y2-this.maxSize.height,0),o=Math.max(0-this.cropper.y1,0);(i>0||s>0||r>0||o>0)&&(this.cropper.x1+=r*this.aspectRatio>i?r*this.aspectRatio:i,this.cropper.x2-=o*this.aspectRatio>s?o*this.aspectRatio:s,this.cropper.y1+=o*this.aspectRatio>s?o:s/this.aspectRatio,this.cropper.y2-=r*this.aspectRatio>i?r:i/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();const t=this.getImagePosition(),e=t.x2-t.x1,i=t.y2-t.y1,s=document.createElement("canvas");s.width=e,s.height=i;const r=s.getContext("2d");if(r){null!=this.backgroundColor&&(r.fillStyle=this.backgroundColor,r.fillRect(0,0,e,i));const o=(this.transform.scale||1)*(this.transform.flipH?-1:1),n=(this.transform.scale||1)*(this.transform.flipV?-1:1);r.setTransform(o,0,0,n,this.transformedSize.width/2,this.transformedSize.height/2),r.translate(-t.x1/o,-t.y1/n),r.rotate((this.transform.rotate||0)*Math.PI/180),r.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);const a={width:e,height:i,imagePosition:t,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(a.offsetImagePosition=this.getOffsetImagePosition());const c=this.getResizeRatio(e,i);return 1!==c&&(a.width=Math.round(e*c),a.height=this.maintainAspectRatio?Math.round(a.width/this.aspectRatio):Math.round(i*c),function(t,e,i){const s=t.width,r=t.height,o=s/(e=Math.round(e)),n=r/(i=Math.round(i)),a=Math.ceil(o/2),c=Math.ceil(n/2),h=t.getContext("2d");if(h){const p=h.getImageData(0,0,s,r),l=h.createImageData(e,i),d=p.data,g=l.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const h=4*(i+t*e),p=t*n;let l=0,m=0,u=0,f=0,b=0,S=0,v=0;const A=Math.floor(i*o),x=Math.floor(t*n);let y=Math.ceil((i+1)*o),M=Math.ceil((t+1)*n);y=Math.min(y,s),M=Math.min(M,r);for(let t=x;t<M;t++){const e=Math.abs(p-t)/c,r=i*o,n=e*e;for(let i=A;i<y;i++){const e=Math.abs(r-i)/a,o=Math.sqrt(n+e*e);if(o>=1)continue;l=2*o*o*o-3*o*o+1;const c=4*(i+t*s);v+=l*d[c+3],u+=l,d[c+3]<255&&(l=l*d[c+3]/250),f+=l*d[c],b+=l*d[c+1],S+=l*d[c+2],m+=l}}g[h]=f/m,g[h+1]=b/m,g[h+2]=S/m,g[h+3]=v/u}t.width=e,t.height=i,h.putImageData(l,0,0)}}(s,a.width,a.height)),a.base64=this.cropToBase64(s),this.imageCropped.emit(a),a}}return null}getImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}getOffsetImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;let e,i;(this.canvasRotation+this.exifTransform.rotate)%2?(e=(this.transformedSize.width-this.originalSize.height)/2,i=(this.transformedSize.height-this.originalSize.width)/2):(e=(this.transformedSize.width-this.originalSize.width)/2,i=(this.transformedSize.height-this.originalSize.height)/2);const s={x1:Math.round(this.cropper.x1*t)-e,y1:Math.round(this.cropper.y1*t)-i,x2:Math.round(this.cropper.x2*t)-e,y2:Math.round(this.cropper.y2*t)-i};return this.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,this.transformedSize.width),s.y2=Math.min(s.y2,this.transformedSize.height)),s}cropToBase64(t){return t.toDataURL("image/"+this.format,this.getQuality())}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){const i=this.resizeToWidth/t,s=this.resizeToHeight/e,r=new Array;this.resizeToWidth>0&&r.push(i),this.resizeToHeight>0&&r.push(s);const o=0===r.length?1:Math.min(...r);return o>1&&!this.onlyScaleDown?o:Math.min(o,1)}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}return t.\u0275fac=function(e){return new(e||t)(l.Nb(A.b),l.Nb(l.h))},t.\u0275cmp=l.Hb({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){if(1&t&&(l.Ec(x,!0),l.Nc(y,!0)),2&t){let t;l.vc(t=l.ec())&&(e.wrapper=t.first),l.vc(t=l.ec())&&(e.sourceImage=t.first)}},hostVars:4,hostBindings:function(t,e){1&t&&l.dc("resize",function(){return e.onResize()},!1,l.yc)("mousemove",function(t){return e.moveImg(t)},!1,l.xc)("touchmove",function(t){return e.moveImg(t)},!1,l.xc)("mouseup",function(){return e.moveStop()},!1,l.xc)("touchend",function(){return e.moveStop()},!1,l.xc),2&t&&(l.Fc("text-align",e.alignImage),l.Fb("disabled",e.disabled))},inputs:{format:"format",maintainAspectRatio:"maintainAspectRatio",transform:"transform",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",backgroundColor:"backgroundColor"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[l.yb],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(l.Tb(0,"div",null,0),l.Gc(2,M,2,5,"img",1),l.Ob(3,"div",2),l.Gc(4,w,3,15,"div",3),l.Sb()),2&t&&(l.Fc("background",e.imageVisible&&e.backgroundColor),l.Ab(2),l.mc("ngIf",e.safeImgDataUrl),l.Ab(1),l.Fc("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),l.Ab(1),l.mc("ngIf",e.imageVisible))},directives:[s.o],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t})(),R=(()=>{class t{}return t.\u0275mod=l.Lb({type:t}),t.\u0275inj=l.Kb({factory:function(e){return new(e||t)},imports:[[s.c]]}),t})();function O(t,e){1&t&&(l.Tb(0,"h3"),l.Ic(1,"All Advertisement"),l.Sb())}function T(t,e){1&t&&(l.Tb(0,"h3"),l.Ic(1,"Active Advertisement"),l.Sb())}function P(t,e){1&t&&(l.Tb(0,"h3"),l.Ic(1,"Deactivate Advertisement"),l.Sb())}function k(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",29),l.dc("click",function(){l.zc(t);const e=l.fc().$implicit;return l.fc().updateStatus("true",e._id)}),l.Ic(1," Activate "),l.Sb()}if(2&t){const t=l.fc(2);l.mc("disabled","Super Admin"!==t.currentRole)}}function _(t,e){if(1&t){const t=l.Ub();l.Tb(0,"button",30),l.dc("click",function(){l.zc(t);const e=l.fc().$implicit;return l.fc().updateStatus("false",e._id)}),l.Ic(1," Deactivate "),l.Sb()}if(2&t){const t=l.fc(2);l.mc("disabled","Super Admin"!==t.currentRole)}}function E(t,e){if(1&t&&(l.Tb(0,"div",31),l.Tb(1,"strong"),l.Ic(2,"Last Action: "),l.Sb(),l.Tb(3,"small"),l.Ic(4),l.gc(5,"date"),l.gc(6,"date"),l.Sb(),l.Sb()),2&t){const t=l.fc().$implicit;l.Ab(4),l.Lc("",l.ic(5,2,t.actionDate,"mediumDate"),", ",l.ic(6,5,t.actionDate,"mediumTime"),"")}}const B=function(t,e){return{"text-success":t,"text-error":e}};function W(t,e){if(1&t){const t=l.Ub();l.Tb(0,"div",18),l.Tb(1,"div",19),l.Tb(2,"div",20),l.Tb(3,"h6"),l.Tb(4,"span",14),l.Ic(5,"Advertisement Title"),l.Sb(),l.Tb(6,"p",21),l.Tb(7,"small",14),l.Ic(8,"Status: "),l.Sb(),l.Tb(9,"small",22),l.Ic(10),l.Sb(),l.Sb(),l.Sb(),l.Ob(11,"img",23),l.Tb(12,"div",12),l.Tb(13,"div",2),l.Gc(14,k,2,1,"button",24),l.Gc(15,_,2,1,"button",25),l.Sb(),l.Tb(16,"div",26),l.Tb(17,"button",27),l.dc("click",function(){l.zc(t);const i=e.$implicit;return l.fc().deleteAdvert(i._id)}),l.Ic(18," Delete "),l.Sb(),l.Sb(),l.Gc(19,E,7,8,"div",28),l.Sb(),l.Sb(),l.Sb(),l.Sb()}if(2&t){const t=e.$implicit,i=l.fc();l.Ab(9),l.mc("ngClass",l.sc(8,B,t.status,!t.status)),l.Ab(1),l.Jc(t.status?"Activated":"Deactivated"),l.Ab(1),l.pc("src","",i.amazonUrl,"",t.image,"",l.Bc),l.Ab(3),l.mc("ngIf",0==t.status),l.Ab(1),l.mc("ngIf",1==t.status),l.Ab(2),l.mc("disabled","Super Admin"!==i.currentRole),l.Ab(2),l.mc("ngIf",t.actionDate)}}function Q(t,e){if(1&t&&(l.Tb(0,"p",47),l.Ic(1),l.Sb()),2&t){const t=l.fc(2);l.Ab(1),l.Jc(t.message)}}function H(t,e){1&t&&(l.Tb(0,"p",48),l.Ic(1,"Use *HD Quality and 16:9 Ratio*"),l.Sb())}function U(t,e){1&t&&(l.Tb(0,"p",49),l.Ic(1,"Only JPG, GIF, PNG, and BMP images are supported."),l.Sb())}function D(t,e){if(1&t){const t=l.Ub();l.Tb(0,"div",32),l.Tb(1,"h3"),l.Ic(2,"Upload File"),l.Sb(),l.Sb(),l.Tb(3,"div",33),l.Tb(4,"div",34),l.Tb(5,"image-cropper",35),l.dc("imageCropped",function(e){return l.zc(t),l.fc().imageCropped(e)})("imageLoaded",function(){return l.zc(t),l.fc().imageLoaded()}),l.Sb(),l.Tb(6,"input",36,37),l.dc("change",function(e){return l.zc(t),l.fc().fileChangeEvent(e)}),l.Sb(),l.Tb(8,"button",38),l.Ic(9,"Insert Image"),l.Sb(),l.Ob(10,"img",39),l.Sb(),l.Gc(11,Q,2,1,"p",40),l.Gc(12,H,2,0,"p",41),l.Gc(13,U,2,0,"p",42),l.Sb(),l.Tb(14,"div",43),l.Tb(15,"div",44),l.Tb(16,"button",45),l.dc("click",function(){return e.$implicit.close("close click")}),l.Ic(17,"Close"),l.Sb(),l.Tb(18,"button",46),l.dc("click",function(){return l.zc(t),l.fc().uploadImg()}),l.Ic(19,"Upload Image"),l.Sb(),l.Sb(),l.Sb()}if(2&t){const t=l.fc();l.Ab(5),l.Fc("display",t.showCropper?null:"none"),l.mc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",t.containWithinAspectRatio)("aspectRatio",16/9)("resizeToWidth",641)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",t.canvasRotation)("transform",t.transform)("alignImage","left"),l.Ab(5),l.nc("src",t.croppedImage,l.Bc),l.Ab(1),l.mc("ngIf",t.message),l.Ab(1),l.mc("ngIf",!t.croppedImage),l.Ab(1),l.mc("ngIf",!t.croppedImage)}}let F=(()=>{class t{constructor(t,e,i,s){this.modalService=t,this.service=e,this.gs=i,this.store=s,this.highlighted=!1,this.allAdvert=[],this.headStatus="all",this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={},this.amazonUrl=n.a,this.slideConfig={infinite:!0,speed:900,autoplay:!1,slidesToShow:3,slidesToScroll:2,prevArrow:'<button class="leftRs ft-chevron-left"></button>',nextArrow:'<button class="rightRs ft-chevron-right"></button>',responsive:[{breakpoint:1025,settings:{slidesToShow:2,slidesToScroll:2,infinite:!0}},{breakpoint:769,settings:{slidesToShow:1,slidesToScroll:2}},{breakpoint:605,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}}ngOnInit(){this.store.subscribe(t=>{},t=>{},()=>{this.subscription.unsubscribe()}),this.getAdvert(null,null,null)}getAdvert(t,e,i){this.service.getAdvertisement(t,e,i).subscribe(t=>{this.allAdvert=t})}preview(t){return Object(r.a)(this,void 0,void 0,function*(){if(this.imageFile=t[0],0===t.length)return!1;null!=t[0].type.match(/image\/*/)?(yield function(t){return new Promise((e,i)=>{const s=new FileReader;s.readAsDataURL(t[0]),s.onload=()=>e(s.result),s.onerror=t=>i(t)})}(t).then(t=>{this.imgURL=t}),this.gs.compress(this.imgURL,t[0].name).then(t=>{let e=t[0];if(1==e.status)return this.imageFile=e.file,void(this.imgURL=e.con64)})):this.message="Only images are supported."})}deleteAdvert(t){Object(n.c)().then(e=>{e&&this.service.deleteAdvert(t).subscribe(()=>{this.getAdvert(null,null,null)})})}uploadImg(){this.submitted=!0,null!=this.imageFile&&this.service.postAdvertisement(this.imageFile).subscribe(t=>{this.modalService.dismissAll(),this.getAdvert(null,null,null)},t=>{this.modalService.dismissAll()})}updateStatus(t,e){this.service.changeStatus(t,e).subscribe(()=>{this.getAdvert(null,null,null)})}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}fileChangeEvent(t){if(this.tempFile=t.target.files[0],this.imageChangedEvent=t,!this.tempFile)return!1;null!=this.tempFile.type.match(/image\/*/)||(this.message="Only images are supported.")}imageCropped(t){this.height=t.height,this.width=t.width,this.croppedImage=t.base64,this.imageFile=Object(a.b)(this.croppedImage,this.tempFile.name)}getDate(t){let e=t.split("-")[0],i=t.split("-")[1];this.getAdvert(null,e,i)}imageLoaded(){this.showCropper=!0}}return t.\u0275fac=function(e){return new(e||t)(l.Nb(o.i),l.Nb(g),l.Nb(a.a),l.Nb(m.a))},t.\u0275cmp=l.Hb({type:t,selectors:[["app-advertisement"]],features:[l.zb([o.c])],decls:37,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[4,"ngIf"],[1,"col-sm-6","d-flex","align-items-center","justify-content-end"],[1,"form-group","mb-0","mr-2"],["type","month","min","2020-01","max","2100-01",1,"form-control","perPage",3,"change"],[1,"btn","btn-orange","float-right",3,"click"],[1,"col-sm-12"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],[1,"row","py-2"],[1,"col-sm-12","text-right"],[1,"font-weight-500"],[1,"hoverTotal",3,"click"],[1,"text-orange"],["addAdvert",""],["ngxSlickItem","",1,"slide"],[1,"card"],[1,"card-body"],[1,"float-right"],[3,"ngClass"],["height","230px","width","300px","onerror","src='../../../assets/img/gallery/1.jpg'","alt","","width","100%",3,"src"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","btn btn-orange",3,"disabled","click",4,"ngIf"],[1,"col-sm-6","text-right"],[1,"btn","btn-danger",3,"disabled","click"],["class","col-sm-12 text-center mt-2",4,"ngIf"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-orange",3,"disabled","click"],[1,"col-sm-12","text-center","mt-2"],[1,"modal-header","justify-content-center"],[1,"modal-body"],[1,"position-relative","text-center"],["format","*",1,"cropper",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded"],["type","file","accept","image/x-png,image/gif,image/jpeg","multiple","",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-warning text-center",4,"ngIf"],["class","text-error text-center",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"text-error","mb-0"],[1,"text-warning","text-center"],[1,"text-error","text-center"]],template:function(t,e){if(1&t){const t=l.Ub();l.Tb(0,"div",0),l.Tb(1,"div",1),l.Tb(2,"div",2),l.Gc(3,O,2,0,"h3",3),l.Gc(4,T,2,0,"h3",3),l.Gc(5,P,2,0,"h3",3),l.Sb(),l.Tb(6,"div",4),l.Tb(7,"div",5),l.Tb(8,"input",6),l.dc("change",function(t){return e.getDate(t.target.value)}),l.Sb(),l.Sb(),l.Tb(9,"button",7),l.dc("click",function(){l.zc(t);const i=l.wc(36);return e.open(i)}),l.Ic(10,"Add Advertisement"),l.Sb(),l.Sb(),l.Sb(),l.Tb(11,"div",1),l.Tb(12,"div",8),l.Tb(13,"ngx-slick-carousel",9,10),l.Gc(15,W,20,11,"div",11),l.Sb(),l.Sb(),l.Sb(),l.Tb(16,"div",12),l.Tb(17,"div",13),l.Tb(18,"span",14),l.Tb(19,"a",15),l.dc("click",function(){return e.headStatus="active",e.getAdvert(!0,null,null)}),l.Ic(20,"Total Actived Advertisements: "),l.Sb(),l.Sb(),l.Tb(21,"span",16),l.Ic(22),l.Sb(),l.Ic(23," \xa0 "),l.Tb(24,"span",14),l.Tb(25,"a",15),l.dc("click",function(){return e.headStatus="deactivate",e.getAdvert(!1,null,null)}),l.Ic(26,"Total Deactivated Advertisements: "),l.Sb(),l.Sb(),l.Tb(27,"span",16),l.Ic(28),l.Sb(),l.Ic(29," \xa0 "),l.Tb(30,"span",14),l.Tb(31,"a",15),l.dc("click",function(){return e.headStatus="all",e.getAdvert(null,null,null)}),l.Ic(32,"Total Advertisements: "),l.Sb(),l.Sb(),l.Tb(33,"span",16),l.Ic(34),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Gc(35,D,20,17,"ng-template",null,17,l.Hc)}2&t&&(l.Ab(3),l.mc("ngIf","all"==e.headStatus),l.Ab(1),l.mc("ngIf","active"==e.headStatus),l.Ab(1),l.mc("ngIf","deactivate"==e.headStatus),l.Ab(8),l.mc("config",e.slideConfig),l.Ab(2),l.mc("ngForOf",e.allAdvert.advertisements),l.Ab(7),l.Jc(e.allAdvert.totalActive),l.Ab(6),l.Jc(e.allAdvert.totalDeactive),l.Ab(6),l.Jc(e.allAdvert.total))},directives:[s.o,b,s.n,S,s.m,I],pipes:[s.f],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;bottom:0;opacity:0;z-index:1;cursor:pointer}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:scale-down;object-fit:scale-down;border-radius:15px}.ft-chevron-left[_ngcontent-%COMP%], .ft-chevron-right[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:orange;text-shadow:0 0 10px rgba(0,0,0,.9)}.hoverTotal[_ngcontent-%COMP%]:hover{color:#1a73e8!important;text-decoration:underline!important}.cropper[_ngcontent-%COMP%]{height:200px;width:200px;margin:0 auto}"]}),t})();var L=i("tyNb"),j=i("RLft");const V=[{path:"",component:F}];let G=(()=>{class t{}return t.\u0275mod=l.Lb({type:t}),t.\u0275inj=l.Kb({factory:function(e){return new(e||t)},imports:[[s.c,o.j,v,L.g.forChild(V),R,m.b.forFeature("UserData",j.b)]]}),t})()}}]);