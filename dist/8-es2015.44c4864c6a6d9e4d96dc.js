(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"68rm":function(t,e,i){"use strict";i.r(e),i.d(e,"AdvertisementModule",function(){return V});var s,r=i("ofXK"),o=i("mrSG"),n=i("1kSV"),a=i("tkbi"),h=i("tk/3"),c=i("PSD3"),p=i.n(c),l=i("lJxs"),d=i("XNiG"),g=i("q2CC"),m=i("fXoL");let u=(()=>{class t{constructor(t,e){this.gs=t,this.http=e,this._url=g.f,this.onError=new d.a,this.allAdvert=new d.a,this.gs.token.subscribe(t=>{s={headers:new h.c({Authorization:"bearer "+t})}})}postAdvertisement(t){let e=new FormData;return e.append("image",t),this.http.post(this._url+"api/admin/advertisement",e,s).pipe(Object(l.a)(t=>{1==t.success?f("success","Added Successfully"):f("warning",t.message)},t=>{f("error",t.error.message)}))}getAdvertisement(t){return null!=t?this.http.get(this._url+"api/admin/advertisement?status="+t,s).pipe(Object(l.a)(t=>t.data)):this.http.get(this._url+"api/admin/advertisement",s).pipe(Object(l.a)(t=>t.data))}changeStatus(t,e){let i=new FormData;return i.append("status",t),i.append("_id",e),this.http.put(this._url+"api/admin/advertisement",i,s).pipe(Object(l.a)(t=>{1==t.success?f("success","Updated Successfully"):f("warning",t.message)},t=>{f("error",t.error.message)}))}}return t.\u0275fac=function(e){return new(e||t)(m.ac(a.a),m.ac(h.a))},t.\u0275prov=m.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function f(t,e){p.a.fire({icon:t,text:e,width:"300px",timer:2500,showConfirmButton:!1})}var b=i("X9o6"),S=i("3Pt+");const v=["*"];let A=(()=>{class t{constructor(t,e,i){this.el=t,this.zone=e,this.platformId=i,this.afterChange=new m.n,this.beforeChange=new m.n,this.breakpoint=new m.n,this.destroy=new m.n,this.init=new m.n,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if(!Object(r.A)(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){const t=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===t?this.unslick():(this._addedSlides.forEach(t=>{this.slides.push(t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",t.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(t=>{const e=this.slides.indexOf(t);this.slides=this.slides.filter(e=>e!==t),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",e)})}),this._removedSlides=[]):t>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(t,e)=>{this.zone.run(()=>{this.init.emit({event:t,slick:e})})}),this.$instance.slick(this.config),this.zone.run(()=>{var t;this.initialized=!0,this.currentIndex=(null===(t=this.config)||void 0===t?void 0:t.initialSlide)||0}),this.$instance.on("afterChange",(t,e,i)=>{this.zone.run(()=>{this.afterChange.emit({event:t,slick:e,currentSlide:i,first:0===i,last:e.$slides.length===i+e.options.slidesToScroll}),this.currentIndex=i})}),this.$instance.on("beforeChange",(t,e,i,s)=>{this.zone.run(()=>{this.beforeChange.emit({event:t,slick:e,currentSlide:i,nextSlide:s}),this.currentIndex=s})}),this.$instance.on("breakpoint",(t,e,i)=>{this.zone.run(()=>{this.breakpoint.emit({event:t,slick:e,breakpoint:i})})}),this.$instance.on("destroy",(t,e)=>{this.zone.run(()=>{this.destroy.emit({event:t,slick:e}),this.initialized=!1})})})}addSlide(t){this._addedSlides.push(t)}removeSlide(t){this._removedSlides.push(t)}slickGoTo(t){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",t)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(t){if(this.initialized){const e=t.config;if(e.previousValue!==e.currentValue&&void 0!==e.currentValue){const t=e.currentValue.refresh,i=Object.assign({},e.currentValue);delete i.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",i,t)})}}}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(m.l),m.Nb(m.z),m.Nb(m.B))},t.\u0275cmp=m.Hb({type:t,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[m.zb([{provide:S.j,useExisting:Object(m.V)(()=>t),multi:!0}]),m.yb],ngContentSelectors:v,decls:1,vars:0,template:function(t,e){1&t&&(m.lc(),m.kc(0))},encapsulation:2}),t})(),x=(()=>{class t{constructor(t,e,i){this.el=t,this.platformId=e,this.carousel=i}ngOnInit(){Object(r.z)(this.platformId)&&this.carousel.addSlide(this)}ngOnDestroy(){Object(r.z)(this.platformId)&&this.carousel.removeSlide(this)}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(m.l),m.Nb(m.B),m.Nb(A,1))},t.\u0275dir=m.Ib({type:t,selectors:[["","ngxSlickItem",""]]}),t})(),y=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[r.c]]}),t})();var M=i("jhN1");const z=["wrapper"],w=["sourceImage"];function C(t,e){if(1&t){const t=m.Ub();m.Tb(0,"img",4,5),m.dc("load",function(){return m.zc(t),m.fc().imageLoadedInView()}),m.Sb()}if(2&t){const t=m.fc();m.Fc("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle),m.mc("src",t.safeImgDataUrl,m.Bc)}}function I(t,e){if(1&t){const t=m.Ub();m.Rb(0),m.Tb(1,"span",9),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"topleft")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"topleft")}),m.Ob(2,"span",10),m.Sb(),m.Tb(3,"span",11),m.Ob(4,"span",10),m.Sb(),m.Tb(5,"span",12),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"topright")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"topright")}),m.Ob(6,"span",10),m.Sb(),m.Tb(7,"span",13),m.Ob(8,"span",10),m.Sb(),m.Tb(9,"span",14),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomright")}),m.Ob(10,"span",10),m.Sb(),m.Tb(11,"span",15),m.Ob(12,"span",10),m.Sb(),m.Tb(13,"span",16),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottomleft")}),m.Ob(14,"span",10),m.Sb(),m.Tb(15,"span",17),m.Ob(16,"span",10),m.Sb(),m.Tb(17,"span",18),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"top")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"top")}),m.Sb(),m.Tb(18,"span",19),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"right")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"right")}),m.Sb(),m.Tb(19,"span",20),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottom")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"bottom")}),m.Sb(),m.Tb(20,"span",21),m.dc("mousedown",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"left")})("touchstart",function(e){m.zc(t);const i=m.fc(2);return i.startMove(e,i.moveTypes.Resize,"left")}),m.Sb(),m.Qb()}}function R(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div",6),m.dc("keydown",function(e){return m.zc(t),m.fc().keyboardAccess(e)}),m.Tb(1,"div",7),m.dc("mousedown",function(e){m.zc(t);const i=m.fc();return i.startMove(e,i.moveTypes.Move)})("touchstart",function(e){m.zc(t);const i=m.fc();return i.startMove(e,i.moveTypes.Move)}),m.Sb(),m.Gc(2,I,21,0,"ng-container",8),m.Sb()}if(2&t){const t=m.fc();m.Fc("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),m.Fb("rounded",t.roundCropper),m.Ab(2),m.mc("ngIf",!t.hideResizeSquares)}}const O={Move:"move",Resize:"resize",Pinch:"pinch"};let P=(()=>{class t{constructor(t,e){this.sanitizer=t,this.cd=e,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.autoRotateSupported=new Promise(t=>{const e=new Image;e.onload=()=>{t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}),this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.moveTypes=O,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new m.n,this.startCropImage=new m.n,this.imageLoaded=new m.n,this.cropperReady=new m.n,this.loadImageFailed=new m.n,this.initCropper()}ngOnChanges(t){this.cropperStaticHeight&&this.cropperStaticWidth&&(this.hideResizeSquares=!0,this.cropperMinWidth=this.cropperStaticWidth,this.cropperMinHeight=this.cropperStaticHeight,this.maintainAspectRatio=!1),this.onChangesInputImage(t),this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.initCropper(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.stepSize=this.initialStepSize,this.activatePinchGesture()}initCropper(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImage(t,e){this.isValidImageType(e)?this.loadBase64Image(t):this.loadImageFailed.emit()}loadImageFile(t){const e=new FileReader;e.onload=e=>this.loadImage(e.target.result,t.type),e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}loadBase64Image(t){this.autoRotateSupported.then(e=>this.checkExifAndLoadBase64Image(t,e)).then(()=>this.transformOriginalImage()).catch(t=>{this.loadImageFailed.emit(),this.originalImage=null,this.originalBase64=null,console.error(t)})}checkExifAndLoadBase64Image(t,e){return new Promise((i,s)=>{this.originalImage=new Image,this.originalImage.onload=()=>{this.originalBase64=t,this.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=e.charCodeAt(r);return s.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const i=e.byteLength;let s=2;for(;s<i;){if(e.getUint16(s+2,!1)<=8)return-1;const t=e.getUint16(s,!1);if(s+=2,65505==t){if(1165519206!=e.getUint32(s+=2,!1))return-1;const t=18761==e.getUint16(s+=6,!1);s+=e.getUint32(s+4,t);const i=e.getUint16(s,t);s+=2;for(let r=0;r<i;r++)if(274==e.getUint16(s+12*r,t))return e.getUint16(s+12*r+8,t)}else{if(65280!=(65280&t))break;s+=e.getUint16(s,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(e?-1:t),this.originalSize.width=this.originalImage.naturalWidth,this.originalSize.height=this.originalImage.naturalHeight,i()},this.originalImage.onerror=s,this.originalImage.src=t})}loadImageFromURL(t){const e=new Image;e.onerror=()=>this.loadImageFailed.emit(),e.onload=()=>{const t=document.createElement("canvas"),i=t.getContext("2d");t.width=e.width,t.height=e.height,i.drawImage(e,0,0),this.loadBase64Image(t.toDataURL())},e.crossOrigin="anonymous",e.src=t}transformOriginalImage(){if(!this.originalImage||!this.originalImage.complete||!this.exifTransform)return Promise.reject(new Error("No image loaded"));const t=this.transformImageBase64();return this.setTransformedImage(t)}transformImageBase64(){const t=this.canvasRotation+this.exifTransform.rotate;if(0===t&&!this.exifTransform.flip&&!this.containWithinAspectRatio)return this.originalBase64;const e=this.getTransformedSize(),i=document.createElement("canvas");i.width=e.width,i.height=e.height;const s=i.getContext("2d");return s.setTransform(this.exifTransform.flip?-1:1,0,0,1,i.width/2,i.height/2),s.rotate(Math.PI*(t/2)),s.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),i.toDataURL()}getTransformedSize(){const t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){const t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}{const t=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,t)}}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}setTransformedImage(t){return new Promise(e=>{this.transformedBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.transformedImage=new Image,this.transformedImage.onload=()=>{this.transformedSize.width=this.transformedImage.naturalWidth,this.transformedSize.height=this.transformedImage.naturalHeight,this.cd.markForCheck(),e()},this.transformedImage.src=this.transformedBase64})}imageLoadedInView(){null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else Object(m.W)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.cropperStaticHeight&&this.cropperStaticWidth)this.cropper.x1=0,this.cropper.x2=t.offsetWidth>this.cropperStaticWidth?this.cropperStaticWidth:t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight>this.cropperStaticHeight?this.cropperStaticHeight:t.offsetHeight;else if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?O.Resize:O.Move,i=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),s=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,i),this.moveImg(s),this.moveStop()}getPositionForKey(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}getInvertedPositionForKey(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}getEventForKey(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}startMove(t,e,i=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===O.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper))}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:O.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===O.Move?(this.move(t),this.checkCropperPosition(!0)):this.moveStart.type===O.Resize&&(this.cropperStaticWidth||this.cropperStaticHeight||this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===O.Pinch&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"center":const s=t.scale,r=Math.abs(this.moveStart.x2-this.moveStart.x1)*s,o=Math.abs(this.moveStart.y2-this.moveStart.y1)*s,n=this.cropper.x1,a=this.cropper.y1;this.cropper.x1=Math.min(this.moveStart.clientX-r/2,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.clientY-o/2,this.cropper.y2-this.cropperScaledMinHeight),this.cropper.x2=Math.max(this.moveStart.clientX+r/2,n+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.clientY+o/2,a+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"center":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio;const i=Math.max(0-this.cropper.x1,0),s=Math.max(this.cropper.x2-this.maxSize.width,0),r=Math.max(this.cropper.y2-this.maxSize.height,0),o=Math.max(0-this.cropper.y1,0);(i>0||s>0||r>0||o>0)&&(this.cropper.x1+=r*this.aspectRatio>i?r*this.aspectRatio:i,this.cropper.x2-=o*this.aspectRatio>s?o*this.aspectRatio:s,this.cropper.y1+=o*this.aspectRatio>s?o:s/this.aspectRatio,this.cropper.y2-=r*this.aspectRatio>i?r:i/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();const t=this.getImagePosition(),e=t.x2-t.x1,i=t.y2-t.y1,s=document.createElement("canvas");s.width=e,s.height=i;const r=s.getContext("2d");if(r){null!=this.backgroundColor&&(r.fillStyle=this.backgroundColor,r.fillRect(0,0,e,i));const o=(this.transform.scale||1)*(this.transform.flipH?-1:1),n=(this.transform.scale||1)*(this.transform.flipV?-1:1);r.setTransform(o,0,0,n,this.transformedSize.width/2,this.transformedSize.height/2),r.translate(-t.x1/o,-t.y1/n),r.rotate((this.transform.rotate||0)*Math.PI/180),r.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);const a={width:e,height:i,imagePosition:t,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(a.offsetImagePosition=this.getOffsetImagePosition());const h=this.getResizeRatio(e,i);return 1!==h&&(a.width=Math.round(e*h),a.height=this.maintainAspectRatio?Math.round(a.width/this.aspectRatio):Math.round(i*h),function(t,e,i){const s=t.width,r=t.height,o=s/(e=Math.round(e)),n=r/(i=Math.round(i)),a=Math.ceil(o/2),h=Math.ceil(n/2),c=t.getContext("2d");if(c){const p=c.getImageData(0,0,s,r),l=c.createImageData(e,i),d=p.data,g=l.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const c=4*(i+t*e),p=t*n;let l=0,m=0,u=0,f=0,b=0,S=0,v=0;const A=Math.floor(i*o),x=Math.floor(t*n);let y=Math.ceil((i+1)*o),M=Math.ceil((t+1)*n);y=Math.min(y,s),M=Math.min(M,r);for(let t=x;t<M;t++){const e=Math.abs(p-t)/h,r=i*o,n=e*e;for(let i=A;i<y;i++){const e=Math.abs(r-i)/a,o=Math.sqrt(n+e*e);if(o>=1)continue;l=2*o*o*o-3*o*o+1;const h=4*(i+t*s);v+=l*d[h+3],u+=l,d[h+3]<255&&(l=l*d[h+3]/250),f+=l*d[h],b+=l*d[h+1],S+=l*d[h+2],m+=l}}g[c]=f/m,g[c+1]=b/m,g[c+2]=S/m,g[c+3]=v/u}t.width=e,t.height=i,c.putImageData(l,0,0)}}(s,a.width,a.height)),a.base64=this.cropToBase64(s),this.imageCropped.emit(a),a}}return null}getImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}getOffsetImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;let e,i;(this.canvasRotation+this.exifTransform.rotate)%2?(e=(this.transformedSize.width-this.originalSize.height)/2,i=(this.transformedSize.height-this.originalSize.width)/2):(e=(this.transformedSize.width-this.originalSize.width)/2,i=(this.transformedSize.height-this.originalSize.height)/2);const s={x1:Math.round(this.cropper.x1*t)-e,y1:Math.round(this.cropper.y1*t)-i,x2:Math.round(this.cropper.x2*t)-e,y2:Math.round(this.cropper.y2*t)-i};return this.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,this.transformedSize.width),s.y2=Math.min(s.y2,this.transformedSize.height)),s}cropToBase64(t){return t.toDataURL("image/"+this.format,this.getQuality())}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){const i=this.resizeToWidth/t,s=this.resizeToHeight/e,r=new Array;this.resizeToWidth>0&&r.push(i),this.resizeToHeight>0&&r.push(s);const o=0===r.length?1:Math.min(...r);return o>1&&!this.onlyScaleDown?o:Math.min(o,1)}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(M.b),m.Nb(m.h))},t.\u0275cmp=m.Hb({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){if(1&t&&(m.Ec(z,!0),m.Nc(w,!0)),2&t){let t;m.vc(t=m.ec())&&(e.wrapper=t.first),m.vc(t=m.ec())&&(e.sourceImage=t.first)}},hostVars:4,hostBindings:function(t,e){1&t&&m.dc("resize",function(){return e.onResize()},!1,m.yc)("mousemove",function(t){return e.moveImg(t)},!1,m.xc)("touchmove",function(t){return e.moveImg(t)},!1,m.xc)("mouseup",function(){return e.moveStop()},!1,m.xc)("touchend",function(){return e.moveStop()},!1,m.xc),2&t&&(m.Fc("text-align",e.alignImage),m.Fb("disabled",e.disabled))},inputs:{format:"format",maintainAspectRatio:"maintainAspectRatio",transform:"transform",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",backgroundColor:"backgroundColor"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[m.yb],decls:5,vars:10,consts:[["wrapper",""],["class","source-image",3,"src","visibility","transform","load",4,"ngIf"],[1,"overlay"],["class","cropper","tabindex","0",3,"rounded","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"source-image",3,"src","load"],["sourceImage",""],["tabindex","0",1,"cropper",3,"keydown"],[1,"move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(m.Tb(0,"div",null,0),m.Gc(2,C,2,5,"img",1),m.Ob(3,"div",2),m.Gc(4,R,3,15,"div",3),m.Sb()),2&t&&(m.Fc("background",e.imageVisible&&e.backgroundColor),m.Ab(2),m.mc("ngIf",e.safeImgDataUrl),m.Ab(1),m.Fc("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),m.Ab(1),m.mc("ngIf",e.imageVisible))},directives:[r.o],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],changeDetection:0}),t})(),T=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[r.c]]}),t})();function k(t,e){1&t&&(m.Tb(0,"h3"),m.Ic(1,"All Advertisement"),m.Sb())}function _(t,e){1&t&&(m.Tb(0,"h3"),m.Ic(1,"Active Advertisement"),m.Sb())}function E(t,e){1&t&&(m.Tb(0,"h3"),m.Ic(1,"Deactivate Advertisement"),m.Sb())}function B(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",25),m.dc("click",function(){m.zc(t);const e=m.fc().$implicit;return m.fc().updateStatus("true",e._id)}),m.Ic(1," Activate "),m.Sb()}}function W(t,e){if(1&t){const t=m.Ub();m.Tb(0,"button",5),m.dc("click",function(){m.zc(t);const e=m.fc().$implicit;return m.fc().updateStatus("false",e._id)}),m.Ic(1," Deactivate "),m.Sb()}}function Q(t,e){if(1&t&&(m.Tb(0,"div",16),m.Tb(1,"div",17),m.Tb(2,"div",18),m.Tb(3,"h6"),m.Tb(4,"span",12),m.Ic(5,"Advertisement Title"),m.Sb(),m.Tb(6,"p",19),m.Tb(7,"small",12),m.Ic(8,"Status: "),m.Sb(),m.Tb(9,"small",20),m.Ic(10),m.Sb(),m.Sb(),m.Sb(),m.Ob(11,"img",21),m.Tb(12,"div",10),m.Tb(13,"div",2),m.Gc(14,B,2,0,"button",22),m.Gc(15,W,2,0,"button",23),m.Sb(),m.Tb(16,"div",4),m.Tb(17,"button",24),m.Ic(18," Delete "),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Sb()),2&t){const t=e.$implicit;m.Ab(10),m.Jc(t.status),m.Ab(1),m.oc("src","https://bellboy-global-bucket.s3.amazonaws.com/",t.image,"",m.Bc),m.Ab(3),m.mc("ngIf",0==t.status),m.Ab(1),m.mc("ngIf",1==t.status)}}function H(t,e){if(1&t&&(m.Tb(0,"p",39),m.Ic(1),m.Sb()),2&t){const t=m.fc(2);m.Ab(1),m.Jc(t.message)}}function F(t,e){1&t&&(m.Tb(0,"p",40),m.Ic(1," Image is required "),m.Sb())}function U(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div",26),m.Tb(1,"h3"),m.Ic(2,"Upload File"),m.Sb(),m.Sb(),m.Tb(3,"div",27),m.Tb(4,"div",28),m.Tb(5,"image-cropper",29),m.dc("imageCropped",function(e){return m.zc(t),m.fc().imageCropped(e)})("imageLoaded",function(){return m.zc(t),m.fc().imageLoaded()}),m.Sb(),m.Tb(6,"input",30,31),m.dc("change",function(e){return m.zc(t),m.fc().fileChangeEvent(e)}),m.Sb(),m.Tb(8,"button",32),m.Ic(9,"Insert Image"),m.Sb(),m.Ob(10,"img",33),m.Gc(11,H,2,1,"p",34),m.Gc(12,F,2,0,"p",35),m.Sb(),m.Sb(),m.Tb(13,"div",36),m.Tb(14,"div",37),m.Tb(15,"button",38),m.dc("click",function(){return e.$implicit.close("close click")}),m.Ic(16,"Close"),m.Sb(),m.Tb(17,"button",25),m.dc("click",function(){return m.zc(t),m.fc().uploadImg()}),m.Ic(18,"Upload Image"),m.Sb(),m.Sb(),m.Sb()}if(2&t){const t=m.fc();m.Ab(5),m.Fc("display",t.showCropper?null:"none"),m.mc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("containWithinAspectRatio",t.containWithinAspectRatio)("aspectRatio",16/9)("resizeToWidth",256)("cropperMinWidth",128)("onlyScaleDown",!0)("roundCropper",!1)("canvasRotation",t.canvasRotation)("transform",t.transform)("alignImage","left"),m.Ab(5),m.nc("src",t.croppedImage,m.Bc),m.Ab(1),m.mc("ngIf",t.message),m.Ab(1),m.mc("ngIf",t.croppedImage&&t.submitted)}}let D=(()=>{class t{constructor(t,e,i,s){this.modalService=t,this.service=e,this.imageCompress=i,this.gs=s,this.highlighted=!1,this.allAdvert=[],this.headStatus="all",this.imageChangedEvent="",this.croppedImage="",this.canvasRotation=0,this.rotation=0,this.scale=1,this.showCropper=!1,this.containWithinAspectRatio=!1,this.transform={},this.slideConfig={infinite:!0,speed:900,autoplay:!1,slidesToShow:3,slidesToScroll:1,prevArrow:'<button class="leftRs ft-chevron-left"></button>',nextArrow:'<button class="rightRs ft-chevron-right"></button>',responsive:[{breakpoint:1025,settings:{slidesToShow:2,slidesToScroll:1,infinite:!0}},{breakpoint:769,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:605,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}}ngOnInit(){this.getAdvert(null)}getAdvert(t){this.service.getAdvertisement(t).subscribe(t=>{this.allAdvert=t})}preview(t){return Object(o.a)(this,void 0,void 0,function*(){if(this.imageFile=t[0],0===t.length)return!1;null!=t[0].type.match(/image\/*/)?(yield function(t){return new Promise((e,i)=>{const s=new FileReader;s.readAsDataURL(t[0]),s.onload=()=>e(s.result),s.onerror=t=>i(t)})}(t).then(t=>{this.imgURL=t}),this.gs.compress(this.imgURL,t[0].name).then(t=>{let e=t[0];if(1==e.status)return this.imageFile=e.file,void(this.imgURL=e.con64)})):this.message="Only images are supported."})}uploadImg(){this.submitted=!0,null!=this.imageFile&&this.service.postAdvertisement(this.imageFile).subscribe(t=>{this.modalService.dismissAll(),this.getAdvert(null)},t=>{this.modalService.dismissAll()})}updateStatus(t,e){this.service.changeStatus(t,e).subscribe(()=>{this.getAdvert(null)})}open(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}fileChangeEvent(t){if(this.tempFile=t.target.files[0],this.imageChangedEvent=t,!this.tempFile)return!1;null!=this.tempFile.type.match(/image\/*/)||(this.message="Only images are supported.")}imageCropped(t){this.croppedImage=t.base64,this.imageFile=Object(a.b)(this.croppedImage,this.tempFile.name)}imageLoaded(){this.showCropper=!0}}return t.\u0275fac=function(e){return new(e||t)(m.Nb(n.i),m.Nb(u),m.Nb(b.a),m.Nb(a.a))},t.\u0275cmp=m.Hb({type:t,selectors:[["app-advertisement"]],features:[m.zb([n.c])],decls:35,vars:8,consts:[[1,"container"],[1,"row"],[1,"col-sm-6"],[4,"ngIf"],[1,"col-sm-6","text-right"],[1,"btn","btn-orange",3,"click"],[1,"col-sm-12"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","","class","slide",4,"ngFor","ngForOf"],[1,"row","py-2"],[1,"col-sm-12","text-right"],[1,"font-weight-500"],[1,"hoverTotal",3,"click"],[1,"text-orange"],["addAdvert",""],["ngxSlickItem","",1,"slide"],[1,"card"],[1,"card-body"],[1,"float-right"],[1,"text-success"],["height","230px","width","300px","onerror","src='../../../assets/img/gallery/1.jpg'","alt","","width","100%",3,"src"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-orange",3,"click",4,"ngIf"],[1,"btn","btn-danger"],[1,"btn","btn-success",3,"click"],[1,"modal-header","justify-content-center"],[1,"modal-body"],[1,"position-relative","text-center"],["format","png",1,"cropper",3,"imageChangedEvent","maintainAspectRatio","containWithinAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth","onlyScaleDown","roundCropper","canvasRotation","transform","alignImage","imageCropped","imageLoaded"],["type","file","accept","image/*","type","file",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"modal-footer"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"text-error","mb-0"],[1,"text-error"]],template:function(t,e){if(1&t){const t=m.Ub();m.Tb(0,"div",0),m.Tb(1,"div",1),m.Tb(2,"div",2),m.Gc(3,k,2,0,"h3",3),m.Gc(4,_,2,0,"h3",3),m.Gc(5,E,2,0,"h3",3),m.Sb(),m.Tb(6,"div",4),m.Tb(7,"button",5),m.dc("click",function(){m.zc(t);const i=m.wc(34);return e.open(i)}),m.Ic(8,"Add Advertisement"),m.Sb(),m.Sb(),m.Sb(),m.Tb(9,"div",1),m.Tb(10,"div",6),m.Tb(11,"ngx-slick-carousel",7,8),m.Gc(13,Q,19,4,"div",9),m.Sb(),m.Sb(),m.Sb(),m.Tb(14,"div",10),m.Tb(15,"div",11),m.Tb(16,"span",12),m.Tb(17,"a",13),m.dc("click",function(){return e.headStatus="active",e.getAdvert(!0)}),m.Ic(18,"Total Actived Advertisements: "),m.Sb(),m.Sb(),m.Tb(19,"span",14),m.Ic(20),m.Sb(),m.Ic(21," \xa0 "),m.Tb(22,"span",12),m.Tb(23,"a",13),m.dc("click",function(){return e.headStatus="deactivate",e.getAdvert(!1)}),m.Ic(24,"Total Deactivated Advertisements: "),m.Sb(),m.Sb(),m.Tb(25,"span",14),m.Ic(26),m.Sb(),m.Ic(27," \xa0 "),m.Tb(28,"span",12),m.Tb(29,"a",13),m.dc("click",function(){return e.headStatus="all",e.getAdvert(null)}),m.Ic(30,"Total Advertisements: "),m.Sb(),m.Sb(),m.Tb(31,"span",14),m.Ic(32),m.Sb(),m.Sb(),m.Sb(),m.Sb(),m.Gc(33,U,19,16,"ng-template",null,15,m.Hc)}2&t&&(m.Ab(3),m.mc("ngIf","all"==e.headStatus),m.Ab(1),m.mc("ngIf","active"==e.headStatus),m.Ab(1),m.mc("ngIf","deactivate"==e.headStatus),m.Ab(6),m.mc("config",e.slideConfig),m.Ab(2),m.mc("ngForOf",e.allAdvert.advertisements),m.Ab(7),m.Jc(e.allAdvert.totalActive),m.Ab(6),m.Jc(e.allAdvert.totalDeactive),m.Ab(6),m.Jc(e.allAdvert.total))},directives:[r.o,A,r.n,x,P],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;bottom:0;opacity:0;z-index:1;cursor:pointer}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:scale-down;object-fit:scale-down;border-radius:15px}.ft-chevron-left[_ngcontent-%COMP%], .ft-chevron-right[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:orange;text-shadow:0 0 10px rgba(0,0,0,.9)}.hoverTotal[_ngcontent-%COMP%]:hover{color:#1a73e8!important;text-decoration:underline!important}.cropper[_ngcontent-%COMP%]{height:200px;width:200px;margin:0 auto}"]}),t})();var L=i("tyNb");const j=[{path:"",component:D}];let V=(()=>{class t{}return t.\u0275mod=m.Lb({type:t}),t.\u0275inj=m.Kb({factory:function(e){return new(e||t)},imports:[[r.c,n.j,y,L.g.forChild(j),T]]}),t})()}}]);