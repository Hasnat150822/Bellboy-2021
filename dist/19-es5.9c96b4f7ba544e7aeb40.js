!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"0eu4":function(e,n,c){"use strict";c.r(n),c.d(n,"HiringActionsModule",function(){return Z});var o,r,a=c("ofXK"),b=c("mrSG"),l=c("3Pt+"),s=c("tk/3"),u=c("lJxs"),d=c("vkgz"),f=c("q2CC"),g=c("fXoL"),m=c("1kSV"),p=((r=function(){function e(i,n){t(this,e),this.http=i,this.modalService=n,this._url=f.g,o={headers:new s.d({"Content-Type":"application/x-www-form-urlencoded"})}}return i(e,[{key:"getHiringActions",value:function(t){return this.http.get(this._url+"api/admin/hiring-action-type?status="+t)}},{key:"addHiringActions",value:function(t,e){var i=new FormData;return i.append("title",t.title),i.append("description",t.desc),i.append("icon",e),this.http.post(this._url+"api/admin/hiring-action-type",i).pipe(Object(u.a)(function(t){return 1==t.success?Object(f.f)("success","Added"):Object(f.f)("error",t.msg),t},function(t){Object(f.f)("error",t.error.msg)}))}},{key:"assignLabel",value:function(t,e,i){var n=this,c=(new s.e).set("label",e).set("hiringActionType",t).set("locale",i);return this.http.post(this._url+"api/admin/hiring-action-type/assignLabel",c.toString(),o).pipe(Object(u.a)(function(t){return 200==t.code?(Object(f.f)("success","Label Successfully Added"),n.modalService.dismissAll()):(Object(f.f)("error",t.msg),n.modalService.dismissAll()),t},function(t){Object(f.f)("error",t.error.msg),n.modalService.dismissAll()}))}},{key:"changeStatus",value:function(t,e){var i=new FormData;return i.append("status",t),i.append("action_type_id",e),this.http.put(this._url+"api/admin/hiring-action-type",i).pipe(Object(d.a)(function(){Object(f.f)("success","Status is Changed")},function(t){Object(f.f)("error",t.error.msg)}))}}]),e}()).\u0275fac=function(t){return new(t||r)(g.ac(s.b),g.ac(m.i))},r.\u0275prov=g.Jb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),h=c("tkbi");function v(t,e){if(1&t){var i=g.Ub();g.Tb(0,"div",20),g.dc("click",function(){g.zc(i);var t=g.fc();return t.tableContext="all",t.getActions("")}),g.Ic(1,"All Actions"),g.Sb()}}function S(t,e){1&t&&g.Pb(0)}function T(t,e){1&t&&g.Pb(0)}function A(t,e){if(1&t&&(g.Tb(0,"table",21),g.Tb(1,"thead"),g.Gc(2,S,1,0,"ng-container",22),g.Sb(),g.Tb(3,"tbody"),g.Gc(4,T,1,0,"ng-container",22),g.Sb(),g.Sb()),2&t){g.fc();var i=g.wc(30),n=g.wc(32);g.Ab(2),g.mc("ngTemplateOutlet",i),g.Ab(2),g.mc("ngTemplateOutlet",n)}}function y(t,e){if(1&t){var i=g.Ub();g.Tb(0,"div",20),g.dc("click",function(){g.zc(i);var t=g.fc();return t.tableContext="active",t.getActions("true")}),g.Ic(1,"Active Actions"),g.Sb()}}function I(t,e){1&t&&g.Pb(0)}function k(t,e){1&t&&g.Pb(0)}function w(t,e){if(1&t&&(g.Tb(0,"table",21),g.Tb(1,"thead"),g.Gc(2,I,1,0,"ng-container",22),g.Sb(),g.Tb(3,"tbody"),g.Gc(4,k,1,0,"ng-container",22),g.Sb(),g.Sb()),2&t){g.fc();var i=g.wc(30),n=g.wc(32);g.Ab(2),g.mc("ngTemplateOutlet",i),g.Ab(2),g.mc("ngTemplateOutlet",n)}}function O(t,e){if(1&t){var i=g.Ub();g.Tb(0,"div",20),g.dc("click",function(){g.zc(i);var t=g.fc();return t.tableContext="blocked",t.getActions("false")}),g.Ic(1,"Blocked Actions"),g.Sb()}}function x(t,e){1&t&&g.Pb(0)}function G(t,e){1&t&&g.Pb(0)}function L(t,e){if(1&t&&(g.Tb(0,"table",21),g.Tb(1,"thead"),g.Gc(2,x,1,0,"ng-container",22),g.Sb(),g.Tb(3,"tbody"),g.Gc(4,G,1,0,"ng-container",22),g.Sb(),g.Sb()),2&t){g.fc();var i=g.wc(30),n=g.wc(32);g.Ab(2),g.mc("ngTemplateOutlet",i),g.Ab(2),g.mc("ngTemplateOutlet",n)}}function C(t,e){if(1&t&&(g.Tb(0,"p",42),g.Ic(1),g.Sb()),2&t){var i=g.fc(2);g.Ab(1),g.Jc(i.message)}}function j(t,e){1&t&&(g.Tb(0,"p",43),g.Ic(1," Image is required "),g.Sb())}function H(t,e){1&t&&(g.Tb(0,"p",43),g.Ic(1," Title is required "),g.Sb())}function z(t,e){1&t&&(g.Tb(0,"p",43),g.Ic(1," Description is required "),g.Sb())}function U(t,e){if(1&t){var i=g.Ub();g.Tb(0,"div",23),g.Tb(1,"h3",24),g.Ic(2,"Add Vehicle Type"),g.Sb(),g.Tb(3,"a",25),g.dc("click",function(){return e.$implicit.close("Cancel Modal")}),g.Ob(4,"i",26),g.Sb(),g.Sb(),g.Tb(5,"div",27),g.Tb(6,"form",28),g.Tb(7,"div",29),g.Tb(8,"div",30),g.Tb(9,"input",31,32),g.dc("change",function(){g.zc(i);var t=g.wc(10);return g.fc().preview(t.files)}),g.Sb(),g.Tb(11,"button",33),g.Ic(12,"Add Image"),g.Sb(),g.Ob(13,"img",34),g.Gc(14,C,2,1,"p",35),g.Gc(15,j,2,0,"p",36),g.Sb(),g.Sb(),g.Tb(16,"div",37),g.Ob(17,"input",38),g.Gc(18,H,2,0,"p",36),g.Sb(),g.Tb(19,"div",37),g.Ob(20,"input",39),g.Gc(21,z,2,0,"p",36),g.Sb(),g.Sb(),g.Sb(),g.Tb(22,"div",40),g.Tb(23,"div"),g.Tb(24,"button",41),g.dc("click",function(){g.zc(i);var t=g.fc();return t.addAction(t.addHiringAction)}),g.Ic(25,"Add"),g.Sb(),g.Sb(),g.Sb()}if(2&t){var n=g.fc();g.Ab(6),g.mc("formGroup",n.addHiringAction),g.Ab(7),g.nc("src",n.imgURL,g.Bc),g.Ab(1),g.mc("ngIf",n.message),g.Ab(1),g.mc("ngIf",null==n.imgURL&&n.submitted),g.Ab(3),g.mc("ngIf",n.addHiringAction.controls.title.hasError("required")&&n.submitted),g.Ab(3),g.mc("ngIf",n.addHiringAction.controls.desc.hasError("required")&&n.submitted)}}function P(t,e){if(1&t&&(g.Tb(0,"option",52),g.Ic(1),g.Sb()),2&t){var i=e.$implicit;g.pc("value","",i.code,"/",i._id,""),g.Ab(1),g.Kc(" ",i.title," ")}}function _(t,e){1&t&&(g.Tb(0,"div",37),g.Ob(1,"input",53),g.Sb())}function F(t,e){1&t&&(g.Tb(0,"div",37),g.Ob(1,"input",54),g.Sb())}function R(t,e){if(1&t){var i=g.Ub();g.Tb(0,"div",44),g.Tb(1,"h3",24),g.Ic(2,"Add Label"),g.Sb(),g.Tb(3,"a",25),g.dc("click",function(){return e.$implicit.close("Cancel Modal")}),g.Ob(4,"i",26),g.Sb(),g.Sb(),g.Tb(5,"div",45),g.Tb(6,"form",28),g.Tb(7,"div",37),g.Tb(8,"select",46),g.dc("change",function(t){return g.zc(i),g.fc().changeLocal(t)}),g.Tb(9,"option",47),g.Ic(10,"Select Language"),g.Sb(),g.Gc(11,P,2,3,"option",48),g.Sb(),g.Sb(),g.Gc(12,_,2,0,"div",49),g.Gc(13,F,2,0,"div",49),g.Sb(),g.Sb(),g.Tb(14,"div",50),g.Tb(15,"button",51),g.dc("click",function(){g.zc(i);var t=g.fc();return t.submitLabel(t.assignLabel)}),g.Ic(16,"Add Label"),g.Sb(),g.Sb()}if(2&t){var n=g.fc();g.Ab(6),g.mc("formGroup",n.assignLabel),g.Ab(5),g.mc("ngForOf",n.locals),g.Ab(1),g.mc("ngIf","ur"==n.code||"ar"==n.code),g.Ab(1),g.mc("ngIf","en"==n.code)}}function q(t,e){if(1&t&&(g.Tb(0,"div",55),g.Tb(1,"a",56),g.Tb(2,"span",57),g.dc("click",function(){return e.$implicit.close("Cancel Cick")}),g.Sb(),g.Sb(),g.Sb(),g.Tb(3,"div",58),g.Ob(4,"img",59),g.Sb()),2&t){var i=g.fc();g.Ab(4),g.nc("src",i.currentImage,g.Bc)}}function M(t,e){1&t&&(g.Tb(0,"tr"),g.Tb(1,"th"),g.Ic(2,"Icon"),g.Sb(),g.Tb(3,"th"),g.Ic(4,"Title"),g.Sb(),g.Tb(5,"th",60),g.Ic(6,"Description"),g.Sb(),g.Tb(7,"th"),g.Ic(8,"Task Performed"),g.Sb(),g.Tb(9,"th"),g.Ic(10,"Action"),g.Sb(),g.Sb())}function N(t,e){1&t&&g.Pb(0)}function $(t,e){if(1&t){var i=g.Ub();g.Tb(0,"button",69),g.dc("click",function(){g.zc(i);var t=g.fc().$implicit;return g.fc(2).changeActionStatus(!1,t._id)}),g.Ic(1,"Block Action"),g.Sb()}}function B(t,e){if(1&t){var i=g.Ub();g.Tb(0,"button",70),g.dc("click",function(){g.zc(i);var t=g.fc().$implicit;return g.fc(2).changeActionStatus(!0,t._id)}),g.Ic(1,"Active Action"),g.Sb()}}function J(t,e){if(1&t){var i=g.Ub();g.Tb(0,"tr"),g.Tb(1,"td",62),g.Tb(2,"img",63),g.dc("click",function(){g.zc(i);var t=e.$implicit,n=g.fc(2),c=g.wc(28);return n.bigImage(c,t.icon)}),g.Sb(),g.Sb(),g.Tb(3,"td"),g.Ic(4),g.Sb(),g.Tb(5,"td",64),g.Ic(6),g.Sb(),g.Tb(7,"td"),g.Ic(8),g.Sb(),g.Tb(9,"td",65),g.Tb(10,"button",66),g.dc("click",function(){g.zc(i);var t=e.$implicit,n=g.fc(2),c=g.wc(26);return n.open(c),n.actionTypeId=t._id}),g.Ic(11,"Assign Label"),g.Sb(),g.Gc(12,$,2,0,"button",67),g.Gc(13,B,2,0,"button",68),g.Sb(),g.Sb()}if(2&t){var n=e.$implicit,c=g.fc(2);g.Ab(2),g.pc("src","",c.amazonImgUrl,"",n.icon,"",g.Bc),g.Ab(2),g.Jc(n.title),g.Ab(2),g.Jc(n.description),g.Ab(2),g.Jc(n.actionCount),g.Ab(4),g.mc("ngIf","active"==c.tableContext),g.Ab(1),g.mc("ngIf","blocked"==c.tableContext)}}function D(t,e){if(1&t&&(g.Gc(0,N,1,0,"ng-container",22),g.Gc(1,J,14,7,"tr",61)),2&t){var i=g.fc(),n=g.wc(34);g.mc("ngTemplateOutlet",n),g.Ab(1),g.mc("ngForOf",i.hiringActions)}}function V(t,e){1&t&&(g.Tb(0,"tr"),g.Tb(1,"td",72),g.Ob(2,"div",73),g.Sb(),g.Sb())}function E(t,e){if(1&t&&g.Gc(0,V,3,0,"tr",71),2&t){var i=g.fc();g.mc("ngIf",i.spinner)}}var K,X,Q=((K=function(){function e(i,n,c,o){t(this,e),this.fb=i,this.modalService=n,this.hirngActService=c,this.globalService=o,this.locals=[],this.tableContext="all",this.amazonImgUrl=f.a,this.addHiringAction=this.fb.group({title:["",l.s.required],hasLocation:[""],desc:["",l.s.required]}),this.assignLabel=this.fb.group({label:["",l.s.required]})}return i(e,[{key:"ngOnInit",value:function(){var t=this;this.getActions(""),this.globalService.getLocals().subscribe(function(e){200==e.code&&(t.locals=e.data.data)})}},{key:"open",value:function(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}},{key:"changeLocal",value:function(t){this.singleLocal=t.target.value.split("/"),this.code=this.singleLocal[0],this.localId=this.singleLocal[1]}},{key:"bigImage",value:function(t,e){this.currentImage=this.amazonImgUrl+e,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"})}},{key:"preview",value:function(t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.imageFile=t[0],0!==t.length){e.next=2;break}return e.abrupt("return",!1);case 2:if(null==t[0].type.match(/image\/*/)){e.next=8;break}return e.next=5,function(t){return new Promise(function(e,i){var n=new FileReader;n.readAsDataURL(t[0]),n.onload=function(){return e(n.result)},n.onerror=function(t){return i(t)}})}(t).then(function(t){i.imgURL=t});case 5:this.globalService.compress(this.imgURL,t[0].name).then(function(t){var e=t[0];if(1==e.status)return i.imageFile=e.file,void(i.imgURL=e.con64)}),e.next=9;break;case 8:this.message="Only images are supported.";case 9:case"end":return e.stop()}},e,this)}))}},{key:"addAction",value:function(t){var e=this;if(this.submitted=!0,!t.valid||void 0===this.imageFile)return!1;var i=t.getRawValue();this.hirngActService.addHiringActions(i,this.imageFile).subscribe(function(t){1==t.success?(e.modalService.dismissAll(),e.getActions("")):e.modalService.dismissAll()},function(t){e.modalService.dismissAll()})}},{key:"getActions",value:function(t){var e=this;this.spinner=!0,this.hiringActions=[],this.hirngActService.getHiringActions(t).subscribe(function(t){e.spinner=!1,e.hiringActions=t.data.HiringActionTypes})}},{key:"submitLabel",value:function(t){var e=this;if(this.submitted=!0,t.valid){var i=t.getRawValue();this.hirngActService.assignLabel(this.actionTypeId,i.label,this.localId).subscribe(function(t){200==t.code&&e.getActions("")})}}},{key:"changeActionStatus",value:function(t,e){var i=this;this.hirngActService.changeStatus(t,e).subscribe(function(){i.getActions(!t)})}}]),e}()).\u0275fac=function(t){return new(t||K)(g.Nb(l.b),g.Nb(m.i),g.Nb(p),g.Nb(h.a))},K.\u0275cmp=g.Hb({type:K,selectors:[["app-hiring-actions"]],decls:35,vars:0,consts:[["id","tabs"],[1,"row","text-left","mt-2"],[1,"col-sm-6","mb-1"],[1,"mb-0"],[1,"col-sm-6","text-right"],[1,"btn","btn-orange","mb-0",3,"click"],[1,"row","text-left"],[1,"col-md-12","col-lg-12"],[1,"card"],[1,"card-content"],[1,"card-body"],["type","pills"],["ngbTabTitle",""],["ngbTabContent",""],["addActionsModel",""],["addLabel",""],["bigImg",""],["tableHeader",""],["tableBody",""],["shimmer",""],[1,"tab-padding",3,"click"],[1,"table","table-responsive-md","table-striped"],[4,"ngTemplateOutlet"],[1,"modal-header","justify-content-center","mb-1"],[1,"card-title","mb-0"],[3,"click"],[1,"ft-x","close-icon"],[1,"modal-body","pb-0"],[3,"formGroup"],[1,"form-group","text-center","col-sm-12"],[1,"position-relative"],["accept","image/*","type","file","accept","image/*","type","file",1,"upload-input",3,"change"],["file",""],[1,"camera-icon","btn","btn-orange"],["id","img1","onerror","src='../../../assets/img/ico/bb-brand.jpg'",1,"upload-image",3,"src"],["class","text-error mb-0",4,"ngIf"],["class","text-error",4,"ngIf"],[1,"form-group"],["type","text","formControlName","title","placeholder","Action Title",1,"form-control"],["type","text","formControlName","desc","placeholder","Description",1,"form-control"],[1,"modal-footer","mb-2"],["type","submit",1,"btn","btn-success",3,"click"],[1,"text-error","mb-0"],[1,"text-error"],[1,"modal-header","justify-content-center"],[1,"modal-body"],[1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],[3,"value"],["type","text","formControlName","label","placeholder","\u0644\u06cc\u0628\u0644",1,"form-control","text-right"],["type","text","formControlName","label","placeholder","Label",1,"form-control"],[1,"modal-header","d-flex","justify-content-end","pb-0","mb-2"],[1,"mb-2"],[1,"ft-x","text-error",3,"click"],[1,"modal-body","d-flex","justify-content-center","pt-0"],["onerror","src='../../../../assets/img/gallery/1.jpg'",1,"object-fit",3,"src"],[1,"text-left"],[4,"ngFor","ngForOf"],[1,"image-td"],["onerror","src='../../../assets/img/gallery/1.jpg'","alt","img",1,"table-img-size",3,"src","click"],[1,"desc"],[2,"width","210px !important"],[1,"btn","btn-orange",3,"click"],["class","btn btn-danger ml-2",3,"click",4,"ngIf"],["class","btn btn-success ml-2",3,"click",4,"ngIf"],[1,"btn","btn-danger","ml-2",3,"click"],[1,"btn","btn-success","ml-2",3,"click"],[4,"ngIf"],["colspan","12"],[1,"py-3","shine","w-100"]],template:function(t,e){if(1&t){var i=g.Ub();g.Tb(0,"section",0),g.Tb(1,"div",1),g.Tb(2,"div",2),g.Tb(3,"h3",3),g.Ic(4,"Hiring Actions Types"),g.Sb(),g.Sb(),g.Tb(5,"div",4),g.Tb(6,"button",5),g.dc("click",function(){g.zc(i);var t=g.wc(24);return e.open(t)}),g.Ic(7,"Add Action Type"),g.Sb(),g.Sb(),g.Sb(),g.Tb(8,"div",6),g.Tb(9,"div",7),g.Tb(10,"div",8),g.Tb(11,"div",9),g.Tb(12,"div",10),g.Tb(13,"ngb-tabset",11),g.Tb(14,"ngb-tab"),g.Gc(15,v,2,0,"ng-template",12),g.Gc(16,A,5,2,"ng-template",13),g.Sb(),g.Tb(17,"ngb-tab"),g.Gc(18,y,2,0,"ng-template",12),g.Gc(19,w,5,2,"ng-template",13),g.Sb(),g.Tb(20,"ngb-tab"),g.Gc(21,O,2,0,"ng-template",12),g.Gc(22,L,5,2,"ng-template",13),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Gc(23,U,26,6,"ng-template",null,14,g.Hc),g.Gc(25,R,17,4,"ng-template",null,15,g.Hc),g.Gc(27,q,5,1,"ng-template",null,16,g.Hc),g.Gc(29,M,11,0,"ng-template",null,17,g.Hc),g.Gc(31,D,2,2,"ng-template",null,18,g.Hc),g.Gc(33,E,1,1,"ng-template",null,19,g.Hc)}},directives:[m.o,m.l,m.n,m.m,a.p,l.u,l.l,l.f,a.o,l.a,l.k,l.d,l.o,l.t,a.n],styles:[".upload-input[_ngcontent-%COMP%]{position:absolute;right:0;opacity:0;bottom:0;z-index:1;cursor:pointer}.upload-image[_ngcontent-%COMP%]{width:120px;height:120px;-o-object-fit:cover;object-fit:cover;border-radius:15px}.camera-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:66px}.ng2-smart-page-item[_ngcontent-%COMP%]{line-height:unset;margin:0!important}.form-check-label[_ngcontent-%COMP%]{cursor:pointer;text-transform:capitalize}"]}),K),W=c("tyNb"),Y=[{path:"",component:Q}],Z=((X=function e(){t(this,e)}).\u0275mod=g.Lb({type:X}),X.\u0275inj=g.Kb({factory:function(t){return new(t||X)},imports:[[a.c,l.g,m.j,l.q,W.g.forChild(Y)]]}),X)}}])}();